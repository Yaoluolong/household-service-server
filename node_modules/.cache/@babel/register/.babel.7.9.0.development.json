{
  "{\"sourceRoot\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"filename\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\app.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"plugins\":[],\"presets\":[]}:7.9.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "G:\\Project\\Web\\git\\household-service-server",
      "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\app.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "G:\\Project\\Web\\git\\household-service-server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "G:\\Project\\Web\\git\\household-service-server\\src\\app.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\app.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\",
        "sourceFileName": "app.js"
      }
    },
    "ast": null,
    "code": "const express = require('express'); //引入express框架\n\n\nconst router = require('./router'); //引入路由\n\n\nconst fs = require('fs'); //引入用于文件操作的组件\n\n\nconst https = require('https'); //引入用于搭建https服务的组件\n\n\nconst bodyParser = require('body-parser'); //引入用于解析request请求包的中间件\n\n\nconst cors = require('cors'); //引入用于解决跨域问题的中间件\n\n\nconst colors = require('colors'); //引入控制台颜色控制模块\n\n\nconst app = express();\napp.use(cors());\napp.use(bodyParser.urlencoded({\n  extended: true\n}));\napp.use(bodyParser.json());\napp.use('/', router);\nconst privateKey = fs.readFileSync('https/3750007_yaoluolong.xyz.key', 'utf8');\nconst certificate = fs.readFileSync('https/3750007_yaoluolong.xyz.pem', 'utf8');\nconst credentials = {\n  key: privateKey,\n  cert: certificate\n};\nconst httpsServer = https.createServer(credentials, app);\nconst SSLPORT = 18082;\nhttpsServer.listen(SSLPORT, function () {\n  console.log('\\n' + '    --https服务器已启动' + ': https://localhost:%s'.blue + '\\n\\n', SSLPORT);\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInJvdXRlciIsImZzIiwiaHR0cHMiLCJib2R5UGFyc2VyIiwiY29ycyIsImNvbG9ycyIsImFwcCIsInVzZSIsInVybGVuY29kZWQiLCJleHRlbmRlZCIsImpzb24iLCJwcml2YXRlS2V5IiwicmVhZEZpbGVTeW5jIiwiY2VydGlmaWNhdGUiLCJjcmVkZW50aWFscyIsImtleSIsImNlcnQiLCJodHRwc1NlcnZlciIsImNyZWF0ZVNlcnZlciIsIlNTTFBPUlQiLCJsaXN0ZW4iLCJjb25zb2xlIiwibG9nIiwiYmx1ZSJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBRCxDQUF2QixDLENBQXlDOzs7QUFDekMsTUFBTUMsTUFBTSxHQUFDRCxPQUFPLENBQUMsVUFBRCxDQUFwQixDLENBQXlDOzs7QUFDekMsTUFBTUUsRUFBRSxHQUFHRixPQUFPLENBQUMsSUFBRCxDQUFsQixDLENBQXlDOzs7QUFDekMsTUFBTUcsS0FBSyxHQUFHSCxPQUFPLENBQUMsT0FBRCxDQUFyQixDLENBQXlDOzs7QUFDekMsTUFBTUksVUFBVSxHQUFHSixPQUFPLENBQUMsYUFBRCxDQUExQixDLENBQXlDOzs7QUFDekMsTUFBTUssSUFBSSxHQUFDTCxPQUFPLENBQUMsTUFBRCxDQUFsQixDLENBQXlDOzs7QUFDekMsTUFBTU0sTUFBTSxHQUFDTixPQUFPLENBQUMsUUFBRCxDQUFwQixDLENBQXlDOzs7QUFFekMsTUFBTU8sR0FBRyxHQUFDUixPQUFPLEVBQWpCO0FBRUFRLEdBQUcsQ0FBQ0MsR0FBSixDQUFRSCxJQUFJLEVBQVo7QUFDQUUsR0FBRyxDQUFDQyxHQUFKLENBQVFKLFVBQVUsQ0FBQ0ssVUFBWCxDQUFzQjtBQUFFQyxFQUFBQSxRQUFRLEVBQUU7QUFBWixDQUF0QixDQUFSO0FBQ0FILEdBQUcsQ0FBQ0MsR0FBSixDQUFRSixVQUFVLENBQUNPLElBQVgsRUFBUjtBQUNBSixHQUFHLENBQUNDLEdBQUosQ0FBUSxHQUFSLEVBQVlQLE1BQVo7QUFFQSxNQUFNVyxVQUFVLEdBQUdWLEVBQUUsQ0FBQ1csWUFBSCxDQUFnQixrQ0FBaEIsRUFBb0QsTUFBcEQsQ0FBbkI7QUFDQSxNQUFNQyxXQUFXLEdBQUdaLEVBQUUsQ0FBQ1csWUFBSCxDQUFnQixrQ0FBaEIsRUFBb0QsTUFBcEQsQ0FBcEI7QUFDQSxNQUFNRSxXQUFXLEdBQUc7QUFBRUMsRUFBQUEsR0FBRyxFQUFFSixVQUFQO0FBQW1CSyxFQUFBQSxJQUFJLEVBQUVIO0FBQXpCLENBQXBCO0FBQ0EsTUFBTUksV0FBVyxHQUFHZixLQUFLLENBQUNnQixZQUFOLENBQW1CSixXQUFuQixFQUFnQ1IsR0FBaEMsQ0FBcEI7QUFDQSxNQUFNYSxPQUFPLEdBQUcsS0FBaEI7QUFFQUYsV0FBVyxDQUFDRyxNQUFaLENBQW1CRCxPQUFuQixFQUE0QixZQUFXO0FBQ3JDRSxFQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxPQUFLLG1CQUFMLEdBQXlCLHlCQUF5QkMsSUFBbEQsR0FBdUQsTUFBbkUsRUFBMkVKLE9BQTNFO0FBQ0QsQ0FGRCIsInNvdXJjZVJvb3QiOiJHOlxcUHJvamVjdFxcV2ViXFxnaXRcXGhvdXNlaG9sZC1zZXJ2aWNlLXNlcnZlclxcc3JjXFwiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpICAgICAgIC8v5byV5YWlZXhwcmVzc+ahhuaetlxuY29uc3Qgcm91dGVyPXJlcXVpcmUoJy4vcm91dGVyJykgICAgICAgICAvL+W8leWFpei3r+eUsVxuY29uc3QgZnMgPSByZXF1aXJlKCdmcycpICAgICAgICAgICAgICAgICAvL+W8leWFpeeUqOS6juaWh+S7tuaTjeS9nOeahOe7hOS7tlxuY29uc3QgaHR0cHMgPSByZXF1aXJlKCdodHRwcycpICAgICAgICAgICAvL+W8leWFpeeUqOS6juaQreW7umh0dHBz5pyN5Yqh55qE57uE5Lu2XG5jb25zdCBib2R5UGFyc2VyID0gcmVxdWlyZSgnYm9keS1wYXJzZXInKS8v5byV5YWl55So5LqO6Kej5p6QcmVxdWVzdOivt+axguWMheeahOS4remXtOS7tlxuY29uc3QgY29ycz1yZXF1aXJlKCdjb3JzJykgICAgICAgICAgICAgICAvL+W8leWFpeeUqOS6juino+WGs+i3qOWfn+mXrumimOeahOS4remXtOS7tlxuY29uc3QgY29sb3JzPXJlcXVpcmUoJ2NvbG9ycycpICAgICAgICAgICAvL+W8leWFpeaOp+WItuWPsOminOiJsuaOp+WItuaooeWdl1xuXG5jb25zdCBhcHA9ZXhwcmVzcygpXG5cbmFwcC51c2UoY29ycygpKTtcbmFwcC51c2UoYm9keVBhcnNlci51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IHRydWUgfSkpXG5hcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKVxuYXBwLnVzZSgnLycscm91dGVyKVxuXG5jb25zdCBwcml2YXRlS2V5ID0gZnMucmVhZEZpbGVTeW5jKCdodHRwcy8zNzUwMDA3X3lhb2x1b2xvbmcueHl6LmtleScsICd1dGY4JylcbmNvbnN0IGNlcnRpZmljYXRlID0gZnMucmVhZEZpbGVTeW5jKCdodHRwcy8zNzUwMDA3X3lhb2x1b2xvbmcueHl6LnBlbScsICd1dGY4JylcbmNvbnN0IGNyZWRlbnRpYWxzID0geyBrZXk6IHByaXZhdGVLZXksIGNlcnQ6IGNlcnRpZmljYXRlIH1cbmNvbnN0IGh0dHBzU2VydmVyID0gaHR0cHMuY3JlYXRlU2VydmVyKGNyZWRlbnRpYWxzLCBhcHApXG5jb25zdCBTU0xQT1JUID0gMTgwODJcblxuaHR0cHNTZXJ2ZXIubGlzdGVuKFNTTFBPUlQsIGZ1bmN0aW9uKCkge1xuICBjb25zb2xlLmxvZygnXFxuJysnICAgIC0taHR0cHPmnI3liqHlmajlt7LlkK/liqgnKyc6IGh0dHBzOi8vbG9jYWxob3N0OiVzJy5ibHVlKydcXG5cXG4nLCBTU0xQT1JUKVxufSlcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "app.js"
      ],
      "names": [
        "express",
        "require",
        "router",
        "fs",
        "https",
        "bodyParser",
        "cors",
        "colors",
        "app",
        "use",
        "urlencoded",
        "extended",
        "json",
        "privateKey",
        "readFileSync",
        "certificate",
        "credentials",
        "key",
        "cert",
        "httpsServer",
        "createServer",
        "SSLPORT",
        "listen",
        "console",
        "log",
        "blue"
      ],
      "mappings": "AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB,C,CAAyC;;;AACzC,MAAMC,MAAM,GAACD,OAAO,CAAC,UAAD,CAApB,C,CAAyC;;;AACzC,MAAME,EAAE,GAAGF,OAAO,CAAC,IAAD,CAAlB,C,CAAyC;;;AACzC,MAAMG,KAAK,GAAGH,OAAO,CAAC,OAAD,CAArB,C,CAAyC;;;AACzC,MAAMI,UAAU,GAAGJ,OAAO,CAAC,aAAD,CAA1B,C,CAAyC;;;AACzC,MAAMK,IAAI,GAACL,OAAO,CAAC,MAAD,CAAlB,C,CAAyC;;;AACzC,MAAMM,MAAM,GAACN,OAAO,CAAC,QAAD,CAApB,C,CAAyC;;;AAEzC,MAAMO,GAAG,GAACR,OAAO,EAAjB;AAEAQ,GAAG,CAACC,GAAJ,CAAQH,IAAI,EAAZ;AACAE,GAAG,CAACC,GAAJ,CAAQJ,UAAU,CAACK,UAAX,CAAsB;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAAtB,CAAR;AACAH,GAAG,CAACC,GAAJ,CAAQJ,UAAU,CAACO,IAAX,EAAR;AACAJ,GAAG,CAACC,GAAJ,CAAQ,GAAR,EAAYP,MAAZ;AAEA,MAAMW,UAAU,GAAGV,EAAE,CAACW,YAAH,CAAgB,kCAAhB,EAAoD,MAApD,CAAnB;AACA,MAAMC,WAAW,GAAGZ,EAAE,CAACW,YAAH,CAAgB,kCAAhB,EAAoD,MAApD,CAApB;AACA,MAAME,WAAW,GAAG;AAAEC,EAAAA,GAAG,EAAEJ,UAAP;AAAmBK,EAAAA,IAAI,EAAEH;AAAzB,CAApB;AACA,MAAMI,WAAW,GAAGf,KAAK,CAACgB,YAAN,CAAmBJ,WAAnB,EAAgCR,GAAhC,CAApB;AACA,MAAMa,OAAO,GAAG,KAAhB;AAEAF,WAAW,CAACG,MAAZ,CAAmBD,OAAnB,EAA4B,YAAW;AACrCE,EAAAA,OAAO,CAACC,GAAR,CAAY,OAAK,mBAAL,GAAyB,yBAAyBC,IAAlD,GAAuD,MAAnE,EAA2EJ,OAA3E;AACD,CAFD",
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\",
      "sourcesContent": [
        "const express = require('express')       //引入express框架\nconst router=require('./router')         //引入路由\nconst fs = require('fs')                 //引入用于文件操作的组件\nconst https = require('https')           //引入用于搭建https服务的组件\nconst bodyParser = require('body-parser')//引入用于解析request请求包的中间件\nconst cors=require('cors')               //引入用于解决跨域问题的中间件\nconst colors=require('colors')           //引入控制台颜色控制模块\n\nconst app=express()\n\napp.use(cors());\napp.use(bodyParser.urlencoded({ extended: true }))\napp.use(bodyParser.json())\napp.use('/',router)\n\nconst privateKey = fs.readFileSync('https/3750007_yaoluolong.xyz.key', 'utf8')\nconst certificate = fs.readFileSync('https/3750007_yaoluolong.xyz.pem', 'utf8')\nconst credentials = { key: privateKey, cert: certificate }\nconst httpsServer = https.createServer(credentials, app)\nconst SSLPORT = 18082\n\nhttpsServer.listen(SSLPORT, function() {\n  console.log('\\n'+'    --https服务器已启动'+': https://localhost:%s'.blue+'\\n\\n', SSLPORT)\n})\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1588054995143
  },
  "{\"sourceRoot\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\router\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"filename\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\router\\\\index.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"plugins\":[],\"presets\":[]}:7.9.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "G:\\Project\\Web\\git\\household-service-server",
      "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\index.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "G:\\Project\\Web\\git\\household-service-server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\index.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "const express = require('express');\n\nconst boom = require('boom'); //引入用于处理404请求的中间件\n\n\nconst userRouter = require('./user');\n\nconst staffRouter = require('./staff');\n\nconst uploadRouter = require('./upload');\n\nconst classRouter = require('./class');\n\nconst orderRouter = require('./order');\n\nconst evaluateRouter = require('./evaluate');\n\nconst commodityRouter = require('./commodity');\n\nconst promotionRouter = require('./promotion');\n\nconst wechatRouter = require('./wechat');\n\nconst {\n  jwtAuth\n} = require('./jwt');\n\nconst Result = require('../models/Result'); // 注册路由\n\n\nconst router = express.Router();\nrouter.use(jwtAuth);\nrouter.get('/', (req, res) => {\n  return res.send('Hello Household');\n});\n/*\r\n  综合\r\n */\n\nrouter.use('/user', userRouter);\nrouter.use('/staff', staffRouter);\nrouter.use('/upload', uploadRouter);\nrouter.use('/class', classRouter);\nrouter.use('/commodity', commodityRouter);\nrouter.use('/order', orderRouter);\nrouter.use('/evaluate', evaluateRouter);\nrouter.use('/promotion', promotionRouter);\nrouter.use('/wechat', wechatRouter);\n/*\r\n  集中处理404请求的中间件\r\n */\n\nrouter.use((req, res, next) => {\n  next(boom.notFound('地址不存在'));\n});\n/*\r\n  自定义路由异常处理中间件\r\n */\n\nrouter.use((err, req, res, next) => {\n  if (err.name === 'UnauthorizedError') {\n    new Result(null, 'token失效', {\n      error: err.status,\n      errorMsg: err.name\n    }).expired(res.status(err.status));\n  } else {\n    const msg = err && err.message || '系统错误';\n    const statusCode = err.output && err.output.statusCode || 500;\n    const errorMsg = err.output && err.output.payload && err.output.payload.error || err.message;\n    new Result(null, msg, {\n      error: statusCode || status,\n      errorMsg\n    }).fail(res.status(statusCode));\n  }\n});\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImV4cHJlc3MiLCJyZXF1aXJlIiwiYm9vbSIsInVzZXJSb3V0ZXIiLCJzdGFmZlJvdXRlciIsInVwbG9hZFJvdXRlciIsImNsYXNzUm91dGVyIiwib3JkZXJSb3V0ZXIiLCJldmFsdWF0ZVJvdXRlciIsImNvbW1vZGl0eVJvdXRlciIsInByb21vdGlvblJvdXRlciIsIndlY2hhdFJvdXRlciIsImp3dEF1dGgiLCJSZXN1bHQiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJ1c2UiLCJnZXQiLCJyZXEiLCJyZXMiLCJzZW5kIiwibmV4dCIsIm5vdEZvdW5kIiwiZXJyIiwibmFtZSIsImVycm9yIiwic3RhdHVzIiwiZXJyb3JNc2ciLCJleHBpcmVkIiwibXNnIiwibWVzc2FnZSIsInN0YXR1c0NvZGUiLCJvdXRwdXQiLCJwYXlsb2FkIiwiZmFpbCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQUQsQ0FBdkI7O0FBQ0EsTUFBTUMsSUFBSSxHQUFHRCxPQUFPLENBQUMsTUFBRCxDQUFwQixDLENBQXNDOzs7QUFDdEMsTUFBTUUsVUFBVSxHQUFHRixPQUFPLENBQUMsUUFBRCxDQUExQjs7QUFDQSxNQUFNRyxXQUFXLEdBQUdILE9BQU8sQ0FBQyxTQUFELENBQTNCOztBQUNBLE1BQU1JLFlBQVksR0FBQ0osT0FBTyxDQUFDLFVBQUQsQ0FBMUI7O0FBQ0EsTUFBTUssV0FBVyxHQUFHTCxPQUFPLENBQUMsU0FBRCxDQUEzQjs7QUFDQSxNQUFNTSxXQUFXLEdBQUdOLE9BQU8sQ0FBQyxTQUFELENBQTNCOztBQUNBLE1BQU1PLGNBQWMsR0FBR1AsT0FBTyxDQUFDLFlBQUQsQ0FBOUI7O0FBQ0EsTUFBTVEsZUFBZSxHQUFHUixPQUFPLENBQUMsYUFBRCxDQUEvQjs7QUFDQSxNQUFNUyxlQUFlLEdBQUdULE9BQU8sQ0FBQyxhQUFELENBQS9COztBQUNBLE1BQU1VLFlBQVksR0FBR1YsT0FBTyxDQUFDLFVBQUQsQ0FBNUI7O0FBQ0EsTUFBTTtBQUFFVyxFQUFBQTtBQUFGLElBQWNYLE9BQU8sQ0FBQyxPQUFELENBQTNCOztBQUNBLE1BQU1ZLE1BQU0sR0FBR1osT0FBTyxDQUFDLGtCQUFELENBQXRCLEMsQ0FFQTs7O0FBQ0EsTUFBTWEsTUFBTSxHQUFHZCxPQUFPLENBQUNlLE1BQVIsRUFBZjtBQUdBRCxNQUFNLENBQUNFLEdBQVAsQ0FBV0osT0FBWDtBQUVBRSxNQUFNLENBQUNHLEdBQVAsQ0FBVyxHQUFYLEVBQWdCLENBQUNDLEdBQUQsRUFBTUMsR0FBTixLQUFjO0FBQzVCLFNBQU9BLEdBQUcsQ0FBQ0MsSUFBSixDQUFTLGlCQUFULENBQVA7QUFDRCxDQUZEO0FBSUE7Ozs7QUFHQU4sTUFBTSxDQUFDRSxHQUFQLENBQVcsT0FBWCxFQUFvQmIsVUFBcEI7QUFDQVcsTUFBTSxDQUFDRSxHQUFQLENBQVcsUUFBWCxFQUFxQlosV0FBckI7QUFDQVUsTUFBTSxDQUFDRSxHQUFQLENBQVcsU0FBWCxFQUFxQlgsWUFBckI7QUFDQVMsTUFBTSxDQUFDRSxHQUFQLENBQVcsUUFBWCxFQUFvQlYsV0FBcEI7QUFDQVEsTUFBTSxDQUFDRSxHQUFQLENBQVcsWUFBWCxFQUF3QlAsZUFBeEI7QUFDQUssTUFBTSxDQUFDRSxHQUFQLENBQVcsUUFBWCxFQUFvQlQsV0FBcEI7QUFDQU8sTUFBTSxDQUFDRSxHQUFQLENBQVcsV0FBWCxFQUF1QlIsY0FBdkI7QUFDQU0sTUFBTSxDQUFDRSxHQUFQLENBQVcsWUFBWCxFQUF3Qk4sZUFBeEI7QUFDQUksTUFBTSxDQUFDRSxHQUFQLENBQVcsU0FBWCxFQUFzQkwsWUFBdEI7QUFJQTs7OztBQUdBRyxNQUFNLENBQUNFLEdBQVAsQ0FBVyxDQUFDRSxHQUFELEVBQU1DLEdBQU4sRUFBV0UsSUFBWCxLQUFvQjtBQUM3QkEsRUFBQUEsSUFBSSxDQUFDbkIsSUFBSSxDQUFDb0IsUUFBTCxDQUFjLE9BQWQsQ0FBRCxDQUFKO0FBQ0QsQ0FGRDtBQUlBOzs7O0FBR0FSLE1BQU0sQ0FBQ0UsR0FBUCxDQUFXLENBQUNPLEdBQUQsRUFBTUwsR0FBTixFQUFXQyxHQUFYLEVBQWdCRSxJQUFoQixLQUF5QjtBQUNsQyxNQUFJRSxHQUFHLENBQUNDLElBQUosS0FBYSxtQkFBakIsRUFBc0M7QUFDcEMsUUFBSVgsTUFBSixDQUFXLElBQVgsRUFBaUIsU0FBakIsRUFBNEI7QUFDMUJZLE1BQUFBLEtBQUssRUFBRUYsR0FBRyxDQUFDRyxNQURlO0FBRTFCQyxNQUFBQSxRQUFRLEVBQUVKLEdBQUcsQ0FBQ0M7QUFGWSxLQUE1QixFQUdHSSxPQUhILENBR1dULEdBQUcsQ0FBQ08sTUFBSixDQUFXSCxHQUFHLENBQUNHLE1BQWYsQ0FIWDtBQUlELEdBTEQsTUFNSztBQUNILFVBQU1HLEdBQUcsR0FBSU4sR0FBRyxJQUFJQSxHQUFHLENBQUNPLE9BQVosSUFBd0IsTUFBcEM7QUFDQSxVQUFNQyxVQUFVLEdBQUlSLEdBQUcsQ0FBQ1MsTUFBSixJQUFjVCxHQUFHLENBQUNTLE1BQUosQ0FBV0QsVUFBMUIsSUFBeUMsR0FBNUQ7QUFDQSxVQUFNSixRQUFRLEdBQUlKLEdBQUcsQ0FBQ1MsTUFBSixJQUFjVCxHQUFHLENBQUNTLE1BQUosQ0FBV0MsT0FBekIsSUFBb0NWLEdBQUcsQ0FBQ1MsTUFBSixDQUFXQyxPQUFYLENBQW1CUixLQUF4RCxJQUFrRUYsR0FBRyxDQUFDTyxPQUF2RjtBQUNBLFFBQUlqQixNQUFKLENBQVcsSUFBWCxFQUFpQmdCLEdBQWpCLEVBQXNCO0FBQ3BCSixNQUFBQSxLQUFLLEVBQUVNLFVBQVUsSUFBSUwsTUFERDtBQUVwQkMsTUFBQUE7QUFGb0IsS0FBdEIsRUFHR08sSUFISCxDQUdRZixHQUFHLENBQUNPLE1BQUosQ0FBV0ssVUFBWCxDQUhSO0FBSUQ7QUFFRixDQWpCRDtBQW1CQUksTUFBTSxDQUFDQyxPQUFQLEdBQWlCdEIsTUFBakIiLCJzb3VyY2VSb290IjoiRzpcXFByb2plY3RcXFdlYlxcZ2l0XFxob3VzZWhvbGQtc2VydmljZS1zZXJ2ZXJcXHNyY1xccm91dGVyXFwiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpXHJcbmNvbnN0IGJvb20gPSByZXF1aXJlKCdib29tJykgICAgICAgICAgLy/lvJXlhaXnlKjkuo7lpITnkIY0MDTor7fmsYLnmoTkuK3pl7Tku7ZcclxuY29uc3QgdXNlclJvdXRlciA9IHJlcXVpcmUoJy4vdXNlcicpXHJcbmNvbnN0IHN0YWZmUm91dGVyID0gcmVxdWlyZSgnLi9zdGFmZicpXHJcbmNvbnN0IHVwbG9hZFJvdXRlcj1yZXF1aXJlKCcuL3VwbG9hZCcpXHJcbmNvbnN0IGNsYXNzUm91dGVyID0gcmVxdWlyZSgnLi9jbGFzcycpXHJcbmNvbnN0IG9yZGVyUm91dGVyID0gcmVxdWlyZSgnLi9vcmRlcicpXHJcbmNvbnN0IGV2YWx1YXRlUm91dGVyID0gcmVxdWlyZSgnLi9ldmFsdWF0ZScpXHJcbmNvbnN0IGNvbW1vZGl0eVJvdXRlciA9IHJlcXVpcmUoJy4vY29tbW9kaXR5JylcclxuY29uc3QgcHJvbW90aW9uUm91dGVyID0gcmVxdWlyZSgnLi9wcm9tb3Rpb24nKVxyXG5jb25zdCB3ZWNoYXRSb3V0ZXIgPSByZXF1aXJlKCcuL3dlY2hhdCcpXHJcbmNvbnN0IHsgand0QXV0aCB9ID0gcmVxdWlyZSgnLi9qd3QnKVxyXG5jb25zdCBSZXN1bHQgPSByZXF1aXJlKCcuLi9tb2RlbHMvUmVzdWx0JylcclxuXHJcbi8vIOazqOWGjOi3r+eUsVxyXG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpXHJcblxyXG5cclxucm91dGVyLnVzZShqd3RBdXRoKVxyXG5cclxucm91dGVyLmdldCgnLycsIChyZXEsIHJlcykgPT4ge1xyXG4gIHJldHVybiByZXMuc2VuZCgnSGVsbG8gSG91c2Vob2xkJylcclxufSlcclxuXHJcbi8qXHJcbiAg57u85ZCIXHJcbiAqL1xyXG5yb3V0ZXIudXNlKCcvdXNlcicsIHVzZXJSb3V0ZXIpXHJcbnJvdXRlci51c2UoJy9zdGFmZicsIHN0YWZmUm91dGVyKVxyXG5yb3V0ZXIudXNlKCcvdXBsb2FkJyx1cGxvYWRSb3V0ZXIpXHJcbnJvdXRlci51c2UoJy9jbGFzcycsY2xhc3NSb3V0ZXIpXHJcbnJvdXRlci51c2UoJy9jb21tb2RpdHknLGNvbW1vZGl0eVJvdXRlcilcclxucm91dGVyLnVzZSgnL29yZGVyJyxvcmRlclJvdXRlcilcclxucm91dGVyLnVzZSgnL2V2YWx1YXRlJyxldmFsdWF0ZVJvdXRlcilcclxucm91dGVyLnVzZSgnL3Byb21vdGlvbicscHJvbW90aW9uUm91dGVyKVxyXG5yb3V0ZXIudXNlKCcvd2VjaGF0Jywgd2VjaGF0Um91dGVyKVxyXG5cclxuXHJcblxyXG4vKlxyXG4gIOmbhuS4reWkhOeQhjQwNOivt+axgueahOS4remXtOS7tlxyXG4gKi9cclxucm91dGVyLnVzZSgocmVxLCByZXMsIG5leHQpID0+IHtcclxuICBuZXh0KGJvb20ubm90Rm91bmQoJ+WcsOWdgOS4jeWtmOWcqCcpKVxyXG59KVxyXG5cclxuLypcclxuICDoh6rlrprkuYnot6/nlLHlvILluLjlpITnkIbkuK3pl7Tku7ZcclxuICovXHJcbnJvdXRlci51c2UoKGVyciwgcmVxLCByZXMsIG5leHQpID0+IHtcclxuICBpZiAoZXJyLm5hbWUgPT09ICdVbmF1dGhvcml6ZWRFcnJvcicpIHtcclxuICAgIG5ldyBSZXN1bHQobnVsbCwgJ3Rva2Vu5aSx5pWIJywge1xyXG4gICAgICBlcnJvcjogZXJyLnN0YXR1cyxcclxuICAgICAgZXJyb3JNc2c6IGVyci5uYW1lXHJcbiAgICB9KS5leHBpcmVkKHJlcy5zdGF0dXMoZXJyLnN0YXR1cykpXHJcbiAgfVxyXG4gIGVsc2Uge1xyXG4gICAgY29uc3QgbXNnID0gKGVyciAmJiBlcnIubWVzc2FnZSkgfHwgJ+ezu+e7n+mUmeivrydcclxuICAgIGNvbnN0IHN0YXR1c0NvZGUgPSAoZXJyLm91dHB1dCAmJiBlcnIub3V0cHV0LnN0YXR1c0NvZGUpIHx8IDUwMDtcclxuICAgIGNvbnN0IGVycm9yTXNnID0gKGVyci5vdXRwdXQgJiYgZXJyLm91dHB1dC5wYXlsb2FkICYmIGVyci5vdXRwdXQucGF5bG9hZC5lcnJvcikgfHwgZXJyLm1lc3NhZ2VcclxuICAgIG5ldyBSZXN1bHQobnVsbCwgbXNnLCB7XHJcbiAgICAgIGVycm9yOiBzdGF0dXNDb2RlIHx8IHN0YXR1cyxcclxuICAgICAgZXJyb3JNc2dcclxuICAgIH0pLmZhaWwocmVzLnN0YXR1cyhzdGF0dXNDb2RlKSlcclxuICB9XHJcblxyXG59KVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXIiXX0=",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "express",
        "require",
        "boom",
        "userRouter",
        "staffRouter",
        "uploadRouter",
        "classRouter",
        "orderRouter",
        "evaluateRouter",
        "commodityRouter",
        "promotionRouter",
        "wechatRouter",
        "jwtAuth",
        "Result",
        "router",
        "Router",
        "use",
        "get",
        "req",
        "res",
        "send",
        "next",
        "notFound",
        "err",
        "name",
        "error",
        "status",
        "errorMsg",
        "expired",
        "msg",
        "message",
        "statusCode",
        "output",
        "payload",
        "fail",
        "module",
        "exports"
      ],
      "mappings": "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",
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\",
      "sourcesContent": [
        "const express = require('express')\r\nconst boom = require('boom')          //引入用于处理404请求的中间件\r\nconst userRouter = require('./user')\r\nconst staffRouter = require('./staff')\r\nconst uploadRouter=require('./upload')\r\nconst classRouter = require('./class')\r\nconst orderRouter = require('./order')\r\nconst evaluateRouter = require('./evaluate')\r\nconst commodityRouter = require('./commodity')\r\nconst promotionRouter = require('./promotion')\r\nconst wechatRouter = require('./wechat')\r\nconst { jwtAuth } = require('./jwt')\r\nconst Result = require('../models/Result')\r\n\r\n// 注册路由\r\nconst router = express.Router()\r\n\r\n\r\nrouter.use(jwtAuth)\r\n\r\nrouter.get('/', (req, res) => {\r\n  return res.send('Hello Household')\r\n})\r\n\r\n/*\r\n  综合\r\n */\r\nrouter.use('/user', userRouter)\r\nrouter.use('/staff', staffRouter)\r\nrouter.use('/upload',uploadRouter)\r\nrouter.use('/class',classRouter)\r\nrouter.use('/commodity',commodityRouter)\r\nrouter.use('/order',orderRouter)\r\nrouter.use('/evaluate',evaluateRouter)\r\nrouter.use('/promotion',promotionRouter)\r\nrouter.use('/wechat', wechatRouter)\r\n\r\n\r\n\r\n/*\r\n  集中处理404请求的中间件\r\n */\r\nrouter.use((req, res, next) => {\r\n  next(boom.notFound('地址不存在'))\r\n})\r\n\r\n/*\r\n  自定义路由异常处理中间件\r\n */\r\nrouter.use((err, req, res, next) => {\r\n  if (err.name === 'UnauthorizedError') {\r\n    new Result(null, 'token失效', {\r\n      error: err.status,\r\n      errorMsg: err.name\r\n    }).expired(res.status(err.status))\r\n  }\r\n  else {\r\n    const msg = (err && err.message) || '系统错误'\r\n    const statusCode = (err.output && err.output.statusCode) || 500;\r\n    const errorMsg = (err.output && err.output.payload && err.output.payload.error) || err.message\r\n    new Result(null, msg, {\r\n      error: statusCode || status,\r\n      errorMsg\r\n    }).fail(res.status(statusCode))\r\n  }\r\n\r\n})\r\n\r\nmodule.exports = router"
      ]
    },
    "sourceType": "module",
    "mtime": 1588563083074
  },
  "{\"sourceRoot\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\router\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"filename\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\router\\\\user.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"plugins\":[],\"presets\":[]}:7.9.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "G:\\Project\\Web\\git\\household-service-server",
      "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\user.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "G:\\Project\\Web\\git\\household-service-server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\user.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\user.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\",
        "sourceFileName": "user.js"
      }
    },
    "ast": null,
    "code": "const express = require('express');\n\nconst Result = require('../models/Result');\n\nconst {\n  login,\n  findUser,\n  create,\n  update,\n  list\n} = require('../service/user');\n\nconst {\n  md5\n} = require('../utils/encryption');\n\nconst {\n  PWD_SALT,\n  PRIVATE_KEY,\n  JWT_EXPIRED\n} = require('../utils/constant');\n\nconst {\n  body,\n  validationResult\n} = require('express-validator');\n\nconst boom = require('boom');\n\nconst jwt = require('jsonwebtoken');\n\nconst {\n  decode\n} = require('../utils/decode');\n\nconst {\n  increase\n} = require('../utils/auto-increase');\n\nconst router = express.Router();\nrouter.post('/login', [body('username').isString().withMessage('username类型不为String'), body('password').isString().withMessage('password类型不为String')], function (req, res, next) {\n  const err = validationResult(req);\n\n  if (!err.isEmpty()) {\n    const [{\n      msg\n    }] = err.errors;\n    next(boom.badRequest(msg));\n  } else {\n    const username = req.body.username;\n    const password = md5(req.body.password) + md5(PWD_SALT);\n    login(username, password).then(result => {\n      if (!result || result.length === 0) {\n        new Result('用户名或密码错误').fail(res);\n      } else {\n        const token = jwt.sign({\n          username\n        }, PRIVATE_KEY, {\n          expiresIn: JWT_EXPIRED\n        });\n        new Result({\n          token\n        }, '登录成功').success(res);\n      }\n    });\n  }\n});\nrouter.get('/create', (req, res) => {\n  const password = md5('123456') + md5(PWD_SALT);\n  list().then(result => {\n    let data = new Result(result, '查询成功').data;\n    create(increase(data, 'username'), password).then(result => {\n      if (result) {\n        new Result('新增成功').success(res);\n      } else {\n        new Result('新增失败').fail(res);\n      }\n    });\n  });\n});\nrouter.post('/update', (req, res) => {\n  const password = md5('123456') + md5(PWD_SALT);\n  update(req.body.username, password, req.body.role).then(result => {\n    if (result) {\n      new Result('更新成功').success(res);\n    } else {\n      new Result('更新失败').fail(res);\n    }\n  });\n});\nrouter.get('/list', (req, res) => {\n  list().then(result => {\n    if (result) {\n      new Result(result, '查询成功').success(res);\n    } else {\n      new Result('查询失败').fail(res);\n    }\n  });\n});\nrouter.get('/info', function (req, res) {\n  const decoded = decode(req);\n\n  if (decoded && decoded.username) {\n    findUser(decoded.username).then(user => {\n      if (user) {\n        user.roles = [user.role];\n        new Result(user, '获取用户信息成功').success(res);\n      } else {\n        new Result('获取用户信息失败').fail(res);\n      }\n    });\n  } else {\n    new Result('用户信息解析失败').fail(res);\n  }\n});\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIuanMiXSwibmFtZXMiOlsiZXhwcmVzcyIsInJlcXVpcmUiLCJSZXN1bHQiLCJsb2dpbiIsImZpbmRVc2VyIiwiY3JlYXRlIiwidXBkYXRlIiwibGlzdCIsIm1kNSIsIlBXRF9TQUxUIiwiUFJJVkFURV9LRVkiLCJKV1RfRVhQSVJFRCIsImJvZHkiLCJ2YWxpZGF0aW9uUmVzdWx0IiwiYm9vbSIsImp3dCIsImRlY29kZSIsImluY3JlYXNlIiwicm91dGVyIiwiUm91dGVyIiwicG9zdCIsImlzU3RyaW5nIiwid2l0aE1lc3NhZ2UiLCJyZXEiLCJyZXMiLCJuZXh0IiwiZXJyIiwiaXNFbXB0eSIsIm1zZyIsImVycm9ycyIsImJhZFJlcXVlc3QiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwidGhlbiIsInJlc3VsdCIsImxlbmd0aCIsImZhaWwiLCJ0b2tlbiIsInNpZ24iLCJleHBpcmVzSW4iLCJzdWNjZXNzIiwiZ2V0IiwiZGF0YSIsInJvbGUiLCJkZWNvZGVkIiwidXNlciIsInJvbGVzIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBRCxDQUF2Qjs7QUFDQSxNQUFNQyxNQUFNLEdBQUdELE9BQU8sQ0FBQyxrQkFBRCxDQUF0Qjs7QUFDQSxNQUFNO0FBQUVFLEVBQUFBLEtBQUY7QUFBU0MsRUFBQUEsUUFBVDtBQUFtQkMsRUFBQUEsTUFBbkI7QUFBMkJDLEVBQUFBLE1BQTNCO0FBQW1DQyxFQUFBQTtBQUFuQyxJQUE0Q04sT0FBTyxDQUFDLGlCQUFELENBQXpEOztBQUNBLE1BQU07QUFBRU8sRUFBQUE7QUFBRixJQUFVUCxPQUFPLENBQUMscUJBQUQsQ0FBdkI7O0FBQ0EsTUFBTTtBQUFFUSxFQUFBQSxRQUFGO0FBQVlDLEVBQUFBLFdBQVo7QUFBeUJDLEVBQUFBO0FBQXpCLElBQXlDVixPQUFPLENBQUMsbUJBQUQsQ0FBdEQ7O0FBQ0EsTUFBTTtBQUFFVyxFQUFBQSxJQUFGO0FBQVFDLEVBQUFBO0FBQVIsSUFBNkJaLE9BQU8sQ0FBQyxtQkFBRCxDQUExQzs7QUFDQSxNQUFNYSxJQUFJLEdBQUdiLE9BQU8sQ0FBQyxNQUFELENBQXBCOztBQUNBLE1BQU1jLEdBQUcsR0FBR2QsT0FBTyxDQUFDLGNBQUQsQ0FBbkI7O0FBQ0EsTUFBTTtBQUFFZSxFQUFBQTtBQUFGLElBQWFmLE9BQU8sQ0FBQyxpQkFBRCxDQUExQjs7QUFDQSxNQUFNO0FBQUVnQixFQUFBQTtBQUFGLElBQWVoQixPQUFPLENBQUMsd0JBQUQsQ0FBNUI7O0FBRUEsTUFBTWlCLE1BQU0sR0FBR2xCLE9BQU8sQ0FBQ21CLE1BQVIsRUFBZjtBQUVBRCxNQUFNLENBQUNFLElBQVAsQ0FBWSxRQUFaLEVBQ0UsQ0FDRVIsSUFBSSxDQUFDLFVBQUQsQ0FBSixDQUFpQlMsUUFBakIsR0FBNEJDLFdBQTVCLENBQXdDLG9CQUF4QyxDQURGLEVBRUVWLElBQUksQ0FBQyxVQUFELENBQUosQ0FBaUJTLFFBQWpCLEdBQTRCQyxXQUE1QixDQUF3QyxvQkFBeEMsQ0FGRixDQURGLEVBS0UsVUFBVUMsR0FBVixFQUFlQyxHQUFmLEVBQW9CQyxJQUFwQixFQUEwQjtBQUN4QixRQUFNQyxHQUFHLEdBQUdiLGdCQUFnQixDQUFDVSxHQUFELENBQTVCOztBQUNBLE1BQUksQ0FBQ0csR0FBRyxDQUFDQyxPQUFKLEVBQUwsRUFBb0I7QUFDbEIsVUFBTSxDQUFDO0FBQUVDLE1BQUFBO0FBQUYsS0FBRCxJQUFZRixHQUFHLENBQUNHLE1BQXRCO0FBQ0FKLElBQUFBLElBQUksQ0FBQ1gsSUFBSSxDQUFDZ0IsVUFBTCxDQUFnQkYsR0FBaEIsQ0FBRCxDQUFKO0FBQ0QsR0FIRCxNQUdPO0FBQ0wsVUFBTUcsUUFBUSxHQUFHUixHQUFHLENBQUNYLElBQUosQ0FBU21CLFFBQTFCO0FBQ0EsVUFBTUMsUUFBUSxHQUFHeEIsR0FBRyxDQUFDZSxHQUFHLENBQUNYLElBQUosQ0FBU29CLFFBQVYsQ0FBSCxHQUF5QnhCLEdBQUcsQ0FBQ0MsUUFBRCxDQUE3QztBQUVBTixJQUFBQSxLQUFLLENBQUM0QixRQUFELEVBQVdDLFFBQVgsQ0FBTCxDQUEwQkMsSUFBMUIsQ0FBK0JDLE1BQU0sSUFBSTtBQUN2QyxVQUFJLENBQUNBLE1BQUQsSUFBV0EsTUFBTSxDQUFDQyxNQUFQLEtBQWtCLENBQWpDLEVBQW9DO0FBQ2xDLFlBQUlqQyxNQUFKLENBQVcsVUFBWCxFQUF1QmtDLElBQXZCLENBQTRCWixHQUE1QjtBQUNELE9BRkQsTUFHSztBQUNILGNBQU1hLEtBQUssR0FBR3RCLEdBQUcsQ0FBQ3VCLElBQUosQ0FDWjtBQUFFUCxVQUFBQTtBQUFGLFNBRFksRUFFWnJCLFdBRlksRUFHWjtBQUFFNkIsVUFBQUEsU0FBUyxFQUFFNUI7QUFBYixTQUhZLENBQWQ7QUFLQSxZQUFJVCxNQUFKLENBQVc7QUFBRW1DLFVBQUFBO0FBQUYsU0FBWCxFQUFzQixNQUF0QixFQUE4QkcsT0FBOUIsQ0FBc0NoQixHQUF0QztBQUNEO0FBQ0YsS0FaRDtBQWFEO0FBQ0YsQ0E1Qkg7QUE4QkFOLE1BQU0sQ0FBQ3VCLEdBQVAsQ0FBVyxTQUFYLEVBQXNCLENBQUNsQixHQUFELEVBQU1DLEdBQU4sS0FBYztBQUNsQyxRQUFNUSxRQUFRLEdBQUd4QixHQUFHLENBQUMsUUFBRCxDQUFILEdBQWdCQSxHQUFHLENBQUNDLFFBQUQsQ0FBcEM7QUFDQUYsRUFBQUEsSUFBSSxHQUFHMEIsSUFBUCxDQUFZQyxNQUFNLElBQUk7QUFDcEIsUUFBSVEsSUFBSSxHQUFHLElBQUl4QyxNQUFKLENBQVdnQyxNQUFYLEVBQW1CLE1BQW5CLEVBQTJCUSxJQUF0QztBQUNBckMsSUFBQUEsTUFBTSxDQUFDWSxRQUFRLENBQUN5QixJQUFELEVBQU8sVUFBUCxDQUFULEVBQTZCVixRQUE3QixDQUFOLENBQTZDQyxJQUE3QyxDQUFrREMsTUFBTSxJQUFJO0FBQzFELFVBQUlBLE1BQUosRUFBWTtBQUNWLFlBQUloQyxNQUFKLENBQVcsTUFBWCxFQUFtQnNDLE9BQW5CLENBQTJCaEIsR0FBM0I7QUFDRCxPQUZELE1BRU87QUFDTCxZQUFJdEIsTUFBSixDQUFXLE1BQVgsRUFBbUJrQyxJQUFuQixDQUF3QlosR0FBeEI7QUFDRDtBQUNGLEtBTkQ7QUFPRCxHQVREO0FBVUQsQ0FaRDtBQWNBTixNQUFNLENBQUNFLElBQVAsQ0FBWSxTQUFaLEVBQXNCLENBQUNHLEdBQUQsRUFBS0MsR0FBTCxLQUFXO0FBQy9CLFFBQU1RLFFBQVEsR0FBR3hCLEdBQUcsQ0FBQyxRQUFELENBQUgsR0FBZ0JBLEdBQUcsQ0FBQ0MsUUFBRCxDQUFwQztBQUNBSCxFQUFBQSxNQUFNLENBQUNpQixHQUFHLENBQUNYLElBQUosQ0FBU21CLFFBQVYsRUFBbUJDLFFBQW5CLEVBQTRCVCxHQUFHLENBQUNYLElBQUosQ0FBUytCLElBQXJDLENBQU4sQ0FBaURWLElBQWpELENBQXNEQyxNQUFNLElBQUU7QUFDNUQsUUFBSUEsTUFBSixFQUFZO0FBQ1YsVUFBSWhDLE1BQUosQ0FBVyxNQUFYLEVBQW1Cc0MsT0FBbkIsQ0FBMkJoQixHQUEzQjtBQUNELEtBRkQsTUFFTztBQUNMLFVBQUl0QixNQUFKLENBQVcsTUFBWCxFQUFtQmtDLElBQW5CLENBQXdCWixHQUF4QjtBQUNEO0FBQ0YsR0FORDtBQU9ELENBVEQ7QUFXQU4sTUFBTSxDQUFDdUIsR0FBUCxDQUFXLE9BQVgsRUFBb0IsQ0FBQ2xCLEdBQUQsRUFBTUMsR0FBTixLQUFjO0FBQ2hDakIsRUFBQUEsSUFBSSxHQUFHMEIsSUFBUCxDQUFZQyxNQUFNLElBQUk7QUFDcEIsUUFBSUEsTUFBSixFQUFZO0FBQ1YsVUFBSWhDLE1BQUosQ0FBV2dDLE1BQVgsRUFBbUIsTUFBbkIsRUFBMkJNLE9BQTNCLENBQW1DaEIsR0FBbkM7QUFDRCxLQUZELE1BRU87QUFDTCxVQUFJdEIsTUFBSixDQUFXLE1BQVgsRUFBbUJrQyxJQUFuQixDQUF3QlosR0FBeEI7QUFDRDtBQUNGLEdBTkQ7QUFPRCxDQVJEO0FBVUFOLE1BQU0sQ0FBQ3VCLEdBQVAsQ0FBVyxPQUFYLEVBQW9CLFVBQVVsQixHQUFWLEVBQWVDLEdBQWYsRUFBb0I7QUFDdEMsUUFBTW9CLE9BQU8sR0FBRzVCLE1BQU0sQ0FBQ08sR0FBRCxDQUF0Qjs7QUFDQSxNQUFJcUIsT0FBTyxJQUFJQSxPQUFPLENBQUNiLFFBQXZCLEVBQWlDO0FBQy9CM0IsSUFBQUEsUUFBUSxDQUFDd0MsT0FBTyxDQUFDYixRQUFULENBQVIsQ0FBMkJFLElBQTNCLENBQWdDWSxJQUFJLElBQUk7QUFDdEMsVUFBSUEsSUFBSixFQUFVO0FBQ1JBLFFBQUFBLElBQUksQ0FBQ0MsS0FBTCxHQUFhLENBQUNELElBQUksQ0FBQ0YsSUFBTixDQUFiO0FBQ0EsWUFBSXpDLE1BQUosQ0FBVzJDLElBQVgsRUFBaUIsVUFBakIsRUFBNkJMLE9BQTdCLENBQXFDaEIsR0FBckM7QUFDRCxPQUhELE1BR087QUFDTCxZQUFJdEIsTUFBSixDQUFXLFVBQVgsRUFBdUJrQyxJQUF2QixDQUE0QlosR0FBNUI7QUFDRDtBQUNGLEtBUEQ7QUFRRCxHQVRELE1BU087QUFDTCxRQUFJdEIsTUFBSixDQUFXLFVBQVgsRUFBdUJrQyxJQUF2QixDQUE0QlosR0FBNUI7QUFDRDtBQUNGLENBZEQ7QUFnQkF1QixNQUFNLENBQUNDLE9BQVAsR0FBaUI5QixNQUFqQiIsInNvdXJjZVJvb3QiOiJHOlxcUHJvamVjdFxcV2ViXFxnaXRcXGhvdXNlaG9sZC1zZXJ2aWNlLXNlcnZlclxcc3JjXFxyb3V0ZXJcXCIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJylcbmNvbnN0IFJlc3VsdCA9IHJlcXVpcmUoJy4uL21vZGVscy9SZXN1bHQnKVxuY29uc3QgeyBsb2dpbiwgZmluZFVzZXIsIGNyZWF0ZSwgdXBkYXRlLCBsaXN0IH0gPSByZXF1aXJlKCcuLi9zZXJ2aWNlL3VzZXInKVxuY29uc3QgeyBtZDUgfSA9IHJlcXVpcmUoJy4uL3V0aWxzL2VuY3J5cHRpb24nKVxuY29uc3QgeyBQV0RfU0FMVCwgUFJJVkFURV9LRVksIEpXVF9FWFBJUkVEIH0gPSByZXF1aXJlKCcuLi91dGlscy9jb25zdGFudCcpXG5jb25zdCB7IGJvZHksIHZhbGlkYXRpb25SZXN1bHQgfSA9IHJlcXVpcmUoJ2V4cHJlc3MtdmFsaWRhdG9yJylcbmNvbnN0IGJvb20gPSByZXF1aXJlKCdib29tJylcbmNvbnN0IGp3dCA9IHJlcXVpcmUoJ2pzb253ZWJ0b2tlbicpXG5jb25zdCB7IGRlY29kZSB9ID0gcmVxdWlyZSgnLi4vdXRpbHMvZGVjb2RlJylcbmNvbnN0IHsgaW5jcmVhc2UgfSA9IHJlcXVpcmUoJy4uL3V0aWxzL2F1dG8taW5jcmVhc2UnKVxuXG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpXG5cbnJvdXRlci5wb3N0KCcvbG9naW4nLFxuICBbXG4gICAgYm9keSgndXNlcm5hbWUnKS5pc1N0cmluZygpLndpdGhNZXNzYWdlKCd1c2VybmFtZeexu+Wei+S4jeS4ulN0cmluZycpLFxuICAgIGJvZHkoJ3Bhc3N3b3JkJykuaXNTdHJpbmcoKS53aXRoTWVzc2FnZSgncGFzc3dvcmTnsbvlnovkuI3kuLpTdHJpbmcnKVxuICBdLFxuICBmdW5jdGlvbiAocmVxLCByZXMsIG5leHQpIHtcbiAgICBjb25zdCBlcnIgPSB2YWxpZGF0aW9uUmVzdWx0KHJlcSlcbiAgICBpZiAoIWVyci5pc0VtcHR5KCkpIHtcbiAgICAgIGNvbnN0IFt7IG1zZyB9XSA9IGVyci5lcnJvcnNcbiAgICAgIG5leHQoYm9vbS5iYWRSZXF1ZXN0KG1zZykpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHVzZXJuYW1lID0gcmVxLmJvZHkudXNlcm5hbWVcbiAgICAgIGNvbnN0IHBhc3N3b3JkID0gbWQ1KHJlcS5ib2R5LnBhc3N3b3JkKSArIG1kNShQV0RfU0FMVClcblxuICAgICAgbG9naW4odXNlcm5hbWUsIHBhc3N3b3JkKS50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgIGlmICghcmVzdWx0IHx8IHJlc3VsdC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBuZXcgUmVzdWx0KCfnlKjmiLflkI3miJblr4bnoIHplJnor68nKS5mYWlsKHJlcylcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBjb25zdCB0b2tlbiA9IGp3dC5zaWduKFxuICAgICAgICAgICAgeyB1c2VybmFtZSB9LFxuICAgICAgICAgICAgUFJJVkFURV9LRVksXG4gICAgICAgICAgICB7IGV4cGlyZXNJbjogSldUX0VYUElSRUQgfVxuICAgICAgICAgIClcbiAgICAgICAgICBuZXcgUmVzdWx0KHsgdG9rZW4gfSwgJ+eZu+W9leaIkOWKnycpLnN1Y2Nlc3MocmVzKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfSlcblxucm91dGVyLmdldCgnL2NyZWF0ZScsIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCBwYXNzd29yZCA9IG1kNSgnMTIzNDU2JykgKyBtZDUoUFdEX1NBTFQpXG4gIGxpc3QoKS50aGVuKHJlc3VsdCA9PiB7XG4gICAgbGV0IGRhdGEgPSBuZXcgUmVzdWx0KHJlc3VsdCwgJ+afpeivouaIkOWKnycpLmRhdGFcbiAgICBjcmVhdGUoaW5jcmVhc2UoZGF0YSwgJ3VzZXJuYW1lJyksIHBhc3N3b3JkKS50aGVuKHJlc3VsdCA9PiB7XG4gICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgIG5ldyBSZXN1bHQoJ+aWsOWinuaIkOWKnycpLnN1Y2Nlc3MocmVzKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IFJlc3VsdCgn5paw5aKe5aSx6LSlJykuZmFpbChyZXMpXG4gICAgICB9XG4gICAgfSlcbiAgfSlcbn0pXG5cbnJvdXRlci5wb3N0KCcvdXBkYXRlJywocmVxLHJlcyk9PntcbiAgY29uc3QgcGFzc3dvcmQgPSBtZDUoJzEyMzQ1NicpICsgbWQ1KFBXRF9TQUxUKVxuICB1cGRhdGUocmVxLmJvZHkudXNlcm5hbWUscGFzc3dvcmQscmVxLmJvZHkucm9sZSkudGhlbihyZXN1bHQ9PntcbiAgICBpZiAocmVzdWx0KSB7XG4gICAgICBuZXcgUmVzdWx0KCfmm7TmlrDmiJDlip8nKS5zdWNjZXNzKHJlcylcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3IFJlc3VsdCgn5pu05paw5aSx6LSlJykuZmFpbChyZXMpXG4gICAgfVxuICB9KVxufSlcblxucm91dGVyLmdldCgnL2xpc3QnLCAocmVxLCByZXMpID0+IHtcbiAgbGlzdCgpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICBpZiAocmVzdWx0KSB7XG4gICAgICBuZXcgUmVzdWx0KHJlc3VsdCwgJ+afpeivouaIkOWKnycpLnN1Y2Nlc3MocmVzKVxuICAgIH0gZWxzZSB7XG4gICAgICBuZXcgUmVzdWx0KCfmn6Xor6LlpLHotKUnKS5mYWlsKHJlcylcbiAgICB9XG4gIH0pXG59KVxuXG5yb3V0ZXIuZ2V0KCcvaW5mbycsIGZ1bmN0aW9uIChyZXEsIHJlcykge1xuICBjb25zdCBkZWNvZGVkID0gZGVjb2RlKHJlcSlcbiAgaWYgKGRlY29kZWQgJiYgZGVjb2RlZC51c2VybmFtZSkge1xuICAgIGZpbmRVc2VyKGRlY29kZWQudXNlcm5hbWUpLnRoZW4odXNlciA9PiB7XG4gICAgICBpZiAodXNlcikge1xuICAgICAgICB1c2VyLnJvbGVzID0gW3VzZXIucm9sZV1cbiAgICAgICAgbmV3IFJlc3VsdCh1c2VyLCAn6I635Y+W55So5oi35L+h5oGv5oiQ5YqfJykuc3VjY2VzcyhyZXMpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgUmVzdWx0KCfojrflj5bnlKjmiLfkv6Hmga/lpLHotKUnKS5mYWlsKHJlcylcbiAgICAgIH1cbiAgICB9KVxuICB9IGVsc2Uge1xuICAgIG5ldyBSZXN1bHQoJ+eUqOaIt+S/oeaBr+ino+aekOWksei0pScpLmZhaWwocmVzKVxuICB9XG59KVxuXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlciJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "user.js"
      ],
      "names": [
        "express",
        "require",
        "Result",
        "login",
        "findUser",
        "create",
        "update",
        "list",
        "md5",
        "PWD_SALT",
        "PRIVATE_KEY",
        "JWT_EXPIRED",
        "body",
        "validationResult",
        "boom",
        "jwt",
        "decode",
        "increase",
        "router",
        "Router",
        "post",
        "isString",
        "withMessage",
        "req",
        "res",
        "next",
        "err",
        "isEmpty",
        "msg",
        "errors",
        "badRequest",
        "username",
        "password",
        "then",
        "result",
        "length",
        "fail",
        "token",
        "sign",
        "expiresIn",
        "success",
        "get",
        "data",
        "role",
        "decoded",
        "user",
        "roles",
        "module",
        "exports"
      ],
      "mappings": "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",
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\",
      "sourcesContent": [
        "const express = require('express')\nconst Result = require('../models/Result')\nconst { login, findUser, create, update, list } = require('../service/user')\nconst { md5 } = require('../utils/encryption')\nconst { PWD_SALT, PRIVATE_KEY, JWT_EXPIRED } = require('../utils/constant')\nconst { body, validationResult } = require('express-validator')\nconst boom = require('boom')\nconst jwt = require('jsonwebtoken')\nconst { decode } = require('../utils/decode')\nconst { increase } = require('../utils/auto-increase')\n\nconst router = express.Router()\n\nrouter.post('/login',\n  [\n    body('username').isString().withMessage('username类型不为String'),\n    body('password').isString().withMessage('password类型不为String')\n  ],\n  function (req, res, next) {\n    const err = validationResult(req)\n    if (!err.isEmpty()) {\n      const [{ msg }] = err.errors\n      next(boom.badRequest(msg))\n    } else {\n      const username = req.body.username\n      const password = md5(req.body.password) + md5(PWD_SALT)\n\n      login(username, password).then(result => {\n        if (!result || result.length === 0) {\n          new Result('用户名或密码错误').fail(res)\n        }\n        else {\n          const token = jwt.sign(\n            { username },\n            PRIVATE_KEY,\n            { expiresIn: JWT_EXPIRED }\n          )\n          new Result({ token }, '登录成功').success(res)\n        }\n      })\n    }\n  })\n\nrouter.get('/create', (req, res) => {\n  const password = md5('123456') + md5(PWD_SALT)\n  list().then(result => {\n    let data = new Result(result, '查询成功').data\n    create(increase(data, 'username'), password).then(result => {\n      if (result) {\n        new Result('新增成功').success(res)\n      } else {\n        new Result('新增失败').fail(res)\n      }\n    })\n  })\n})\n\nrouter.post('/update',(req,res)=>{\n  const password = md5('123456') + md5(PWD_SALT)\n  update(req.body.username,password,req.body.role).then(result=>{\n    if (result) {\n      new Result('更新成功').success(res)\n    } else {\n      new Result('更新失败').fail(res)\n    }\n  })\n})\n\nrouter.get('/list', (req, res) => {\n  list().then(result => {\n    if (result) {\n      new Result(result, '查询成功').success(res)\n    } else {\n      new Result('查询失败').fail(res)\n    }\n  })\n})\n\nrouter.get('/info', function (req, res) {\n  const decoded = decode(req)\n  if (decoded && decoded.username) {\n    findUser(decoded.username).then(user => {\n      if (user) {\n        user.roles = [user.role]\n        new Result(user, '获取用户信息成功').success(res)\n      } else {\n        new Result('获取用户信息失败').fail(res)\n      }\n    })\n  } else {\n    new Result('用户信息解析失败').fail(res)\n  }\n})\n\nmodule.exports = router"
      ]
    },
    "sourceType": "module",
    "mtime": 1588158978905
  },
  "{\"sourceRoot\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"filename\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\models\\\\Result.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"plugins\":[],\"presets\":[]}:7.9.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\models\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "G:\\Project\\Web\\git\\household-service-server",
      "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\models\\Result.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "G:\\Project\\Web\\git\\household-service-server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "G:\\Project\\Web\\git\\household-service-server\\src\\models\\Result.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\models\\Result.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\models\\",
        "sourceFileName": "Result.js"
      }
    },
    "ast": null,
    "code": "const {\n  CODE_ERROR,\n  CODE_SUCCESS,\n  CODE_TOKEN_EXPIRED\n} = require('../utils/constant');\n\nclass Result {\n  constructor(data, msg = '操作成功', options) {\n    this.data = null;\n\n    if (arguments.length === 0) {\n      this.msg = '操作成功';\n    } else if (arguments.length === 1) {\n      this.msg = data;\n    } else {\n      this.data = JSON.parse(JSON.stringify(data));\n      this.msg = msg;\n\n      if (options) {\n        this.options = options;\n      }\n    }\n  }\n\n  createResult() {\n    if (!this.code) {\n      this.code = CODE_SUCCESS;\n    }\n\n    let base = {\n      code: this.code,\n      msg: this.msg\n    };\n\n    if (this.data) {\n      base.data = this.data;\n    }\n\n    if (this.options) {\n      base = { ...base,\n        ...this.options\n      };\n    }\n\n    return base;\n  }\n\n  json(res) {\n    res.json(this.createResult());\n  }\n\n  success(res) {\n    this.code = CODE_SUCCESS;\n    this.json(res);\n  }\n\n  fail(res) {\n    this.code = CODE_ERROR;\n    this.json(res);\n  }\n\n  expired(res) {\n    this.code = CODE_TOKEN_EXPIRED;\n    this.json(res);\n  }\n\n}\n\nmodule.exports = Result;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlJlc3VsdC5qcyJdLCJuYW1lcyI6WyJDT0RFX0VSUk9SIiwiQ09ERV9TVUNDRVNTIiwiQ09ERV9UT0tFTl9FWFBJUkVEIiwicmVxdWlyZSIsIlJlc3VsdCIsImNvbnN0cnVjdG9yIiwiZGF0YSIsIm1zZyIsIm9wdGlvbnMiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJKU09OIiwicGFyc2UiLCJzdHJpbmdpZnkiLCJjcmVhdGVSZXN1bHQiLCJjb2RlIiwiYmFzZSIsImpzb24iLCJyZXMiLCJzdWNjZXNzIiwiZmFpbCIsImV4cGlyZWQiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNO0FBQ0pBLEVBQUFBLFVBREk7QUFFSkMsRUFBQUEsWUFGSTtBQUdKQyxFQUFBQTtBQUhJLElBSUZDLE9BQU8sQ0FBQyxtQkFBRCxDQUpYOztBQU1BLE1BQU1DLE1BQU4sQ0FBYTtBQUNYQyxFQUFBQSxXQUFXLENBQUNDLElBQUQsRUFBT0MsR0FBRyxHQUFHLE1BQWIsRUFBcUJDLE9BQXJCLEVBQThCO0FBQ3ZDLFNBQUtGLElBQUwsR0FBWSxJQUFaOztBQUNBLFFBQUlHLFNBQVMsQ0FBQ0MsTUFBVixLQUFxQixDQUF6QixFQUE0QjtBQUMxQixXQUFLSCxHQUFMLEdBQVcsTUFBWDtBQUNELEtBRkQsTUFFTyxJQUFJRSxTQUFTLENBQUNDLE1BQVYsS0FBcUIsQ0FBekIsRUFBNEI7QUFDakMsV0FBS0gsR0FBTCxHQUFXRCxJQUFYO0FBQ0QsS0FGTSxNQUVBO0FBQ0wsV0FBS0EsSUFBTCxHQUFZSyxJQUFJLENBQUNDLEtBQUwsQ0FBV0QsSUFBSSxDQUFDRSxTQUFMLENBQWVQLElBQWYsQ0FBWCxDQUFaO0FBQ0EsV0FBS0MsR0FBTCxHQUFXQSxHQUFYOztBQUNBLFVBQUlDLE9BQUosRUFBYTtBQUNYLGFBQUtBLE9BQUwsR0FBZUEsT0FBZjtBQUNEO0FBQ0Y7QUFDRjs7QUFFRE0sRUFBQUEsWUFBWSxHQUFHO0FBQ2IsUUFBSSxDQUFDLEtBQUtDLElBQVYsRUFBZ0I7QUFDZCxXQUFLQSxJQUFMLEdBQVlkLFlBQVo7QUFDRDs7QUFDRCxRQUFJZSxJQUFJLEdBQUc7QUFDVEQsTUFBQUEsSUFBSSxFQUFFLEtBQUtBLElBREY7QUFFVFIsTUFBQUEsR0FBRyxFQUFFLEtBQUtBO0FBRkQsS0FBWDs7QUFJQSxRQUFJLEtBQUtELElBQVQsRUFBZTtBQUNiVSxNQUFBQSxJQUFJLENBQUNWLElBQUwsR0FBWSxLQUFLQSxJQUFqQjtBQUNEOztBQUNELFFBQUksS0FBS0UsT0FBVCxFQUFrQjtBQUNoQlEsTUFBQUEsSUFBSSxHQUFHLEVBQUUsR0FBR0EsSUFBTDtBQUFXLFdBQUcsS0FBS1I7QUFBbkIsT0FBUDtBQUNEOztBQUNELFdBQU9RLElBQVA7QUFDRDs7QUFFREMsRUFBQUEsSUFBSSxDQUFDQyxHQUFELEVBQU07QUFDUkEsSUFBQUEsR0FBRyxDQUFDRCxJQUFKLENBQVMsS0FBS0gsWUFBTCxFQUFUO0FBQ0Q7O0FBRURLLEVBQUFBLE9BQU8sQ0FBQ0QsR0FBRCxFQUFNO0FBQ1gsU0FBS0gsSUFBTCxHQUFZZCxZQUFaO0FBQ0EsU0FBS2dCLElBQUwsQ0FBVUMsR0FBVjtBQUNEOztBQUVERSxFQUFBQSxJQUFJLENBQUNGLEdBQUQsRUFBTTtBQUNSLFNBQUtILElBQUwsR0FBWWYsVUFBWjtBQUNBLFNBQUtpQixJQUFMLENBQVVDLEdBQVY7QUFDRDs7QUFFREcsRUFBQUEsT0FBTyxDQUFDSCxHQUFELEVBQU07QUFDWCxTQUFLSCxJQUFMLEdBQVliLGtCQUFaO0FBQ0EsU0FBS2UsSUFBTCxDQUFVQyxHQUFWO0FBQ0Q7O0FBbERVOztBQXFEYkksTUFBTSxDQUFDQyxPQUFQLEdBQWlCbkIsTUFBakIiLCJzb3VyY2VSb290IjoiRzpcXFByb2plY3RcXFdlYlxcZ2l0XFxob3VzZWhvbGQtc2VydmljZS1zZXJ2ZXJcXHNyY1xcbW9kZWxzXFwiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7XG4gIENPREVfRVJST1IsXG4gIENPREVfU1VDQ0VTUyxcbiAgQ09ERV9UT0tFTl9FWFBJUkVEXG59ID0gcmVxdWlyZSgnLi4vdXRpbHMvY29uc3RhbnQnKVxuXG5jbGFzcyBSZXN1bHQge1xuICBjb25zdHJ1Y3RvcihkYXRhLCBtc2cgPSAn5pON5L2c5oiQ5YqfJywgb3B0aW9ucykge1xuICAgIHRoaXMuZGF0YSA9IG51bGxcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5tc2cgPSAn5pON5L2c5oiQ5YqfJ1xuICAgIH0gZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgdGhpcy5tc2cgPSBkYXRhXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZGF0YSkpXG4gICAgICB0aGlzLm1zZyA9IG1zZ1xuICAgICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9uc1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNyZWF0ZVJlc3VsdCgpIHtcbiAgICBpZiAoIXRoaXMuY29kZSkge1xuICAgICAgdGhpcy5jb2RlID0gQ09ERV9TVUNDRVNTXG4gICAgfVxuICAgIGxldCBiYXNlID0ge1xuICAgICAgY29kZTogdGhpcy5jb2RlLFxuICAgICAgbXNnOiB0aGlzLm1zZ1xuICAgIH1cbiAgICBpZiAodGhpcy5kYXRhKSB7XG4gICAgICBiYXNlLmRhdGEgPSB0aGlzLmRhdGFcbiAgICB9XG4gICAgaWYgKHRoaXMub3B0aW9ucykge1xuICAgICAgYmFzZSA9IHsgLi4uYmFzZSwgLi4udGhpcy5vcHRpb25zIH1cbiAgICB9XG4gICAgcmV0dXJuIGJhc2VcbiAgfVxuXG4gIGpzb24ocmVzKSB7XG4gICAgcmVzLmpzb24odGhpcy5jcmVhdGVSZXN1bHQoKSlcbiAgfVxuXG4gIHN1Y2Nlc3MocmVzKSB7XG4gICAgdGhpcy5jb2RlID0gQ09ERV9TVUNDRVNTXG4gICAgdGhpcy5qc29uKHJlcylcbiAgfVxuXG4gIGZhaWwocmVzKSB7XG4gICAgdGhpcy5jb2RlID0gQ09ERV9FUlJPUlxuICAgIHRoaXMuanNvbihyZXMpXG4gIH1cblxuICBleHBpcmVkKHJlcykge1xuICAgIHRoaXMuY29kZSA9IENPREVfVE9LRU5fRVhQSVJFRFxuICAgIHRoaXMuanNvbihyZXMpXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBSZXN1bHQiXX0=",
    "map": {
      "version": 3,
      "sources": [
        "Result.js"
      ],
      "names": [
        "CODE_ERROR",
        "CODE_SUCCESS",
        "CODE_TOKEN_EXPIRED",
        "require",
        "Result",
        "constructor",
        "data",
        "msg",
        "options",
        "arguments",
        "length",
        "JSON",
        "parse",
        "stringify",
        "createResult",
        "code",
        "base",
        "json",
        "res",
        "success",
        "fail",
        "expired",
        "module",
        "exports"
      ],
      "mappings": "AAAA,MAAM;AACJA,EAAAA,UADI;AAEJC,EAAAA,YAFI;AAGJC,EAAAA;AAHI,IAIFC,OAAO,CAAC,mBAAD,CAJX;;AAMA,MAAMC,MAAN,CAAa;AACXC,EAAAA,WAAW,CAACC,IAAD,EAAOC,GAAG,GAAG,MAAb,EAAqBC,OAArB,EAA8B;AACvC,SAAKF,IAAL,GAAY,IAAZ;;AACA,QAAIG,SAAS,CAACC,MAAV,KAAqB,CAAzB,EAA4B;AAC1B,WAAKH,GAAL,GAAW,MAAX;AACD,KAFD,MAEO,IAAIE,SAAS,CAACC,MAAV,KAAqB,CAAzB,EAA4B;AACjC,WAAKH,GAAL,GAAWD,IAAX;AACD,KAFM,MAEA;AACL,WAAKA,IAAL,GAAYK,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeP,IAAf,CAAX,CAAZ;AACA,WAAKC,GAAL,GAAWA,GAAX;;AACA,UAAIC,OAAJ,EAAa;AACX,aAAKA,OAAL,GAAeA,OAAf;AACD;AACF;AACF;;AAEDM,EAAAA,YAAY,GAAG;AACb,QAAI,CAAC,KAAKC,IAAV,EAAgB;AACd,WAAKA,IAAL,GAAYd,YAAZ;AACD;;AACD,QAAIe,IAAI,GAAG;AACTD,MAAAA,IAAI,EAAE,KAAKA,IADF;AAETR,MAAAA,GAAG,EAAE,KAAKA;AAFD,KAAX;;AAIA,QAAI,KAAKD,IAAT,EAAe;AACbU,MAAAA,IAAI,CAACV,IAAL,GAAY,KAAKA,IAAjB;AACD;;AACD,QAAI,KAAKE,OAAT,EAAkB;AAChBQ,MAAAA,IAAI,GAAG,EAAE,GAAGA,IAAL;AAAW,WAAG,KAAKR;AAAnB,OAAP;AACD;;AACD,WAAOQ,IAAP;AACD;;AAEDC,EAAAA,IAAI,CAACC,GAAD,EAAM;AACRA,IAAAA,GAAG,CAACD,IAAJ,CAAS,KAAKH,YAAL,EAAT;AACD;;AAEDK,EAAAA,OAAO,CAACD,GAAD,EAAM;AACX,SAAKH,IAAL,GAAYd,YAAZ;AACA,SAAKgB,IAAL,CAAUC,GAAV;AACD;;AAEDE,EAAAA,IAAI,CAACF,GAAD,EAAM;AACR,SAAKH,IAAL,GAAYf,UAAZ;AACA,SAAKiB,IAAL,CAAUC,GAAV;AACD;;AAEDG,EAAAA,OAAO,CAACH,GAAD,EAAM;AACX,SAAKH,IAAL,GAAYb,kBAAZ;AACA,SAAKe,IAAL,CAAUC,GAAV;AACD;;AAlDU;;AAqDbI,MAAM,CAACC,OAAP,GAAiBnB,MAAjB",
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\models\\",
      "sourcesContent": [
        "const {\n  CODE_ERROR,\n  CODE_SUCCESS,\n  CODE_TOKEN_EXPIRED\n} = require('../utils/constant')\n\nclass Result {\n  constructor(data, msg = '操作成功', options) {\n    this.data = null\n    if (arguments.length === 0) {\n      this.msg = '操作成功'\n    } else if (arguments.length === 1) {\n      this.msg = data\n    } else {\n      this.data = JSON.parse(JSON.stringify(data))\n      this.msg = msg\n      if (options) {\n        this.options = options\n      }\n    }\n  }\n\n  createResult() {\n    if (!this.code) {\n      this.code = CODE_SUCCESS\n    }\n    let base = {\n      code: this.code,\n      msg: this.msg\n    }\n    if (this.data) {\n      base.data = this.data\n    }\n    if (this.options) {\n      base = { ...base, ...this.options }\n    }\n    return base\n  }\n\n  json(res) {\n    res.json(this.createResult())\n  }\n\n  success(res) {\n    this.code = CODE_SUCCESS\n    this.json(res)\n  }\n\n  fail(res) {\n    this.code = CODE_ERROR\n    this.json(res)\n  }\n\n  expired(res) {\n    this.code = CODE_TOKEN_EXPIRED\n    this.json(res)\n  }\n}\n\nmodule.exports = Result"
      ]
    },
    "sourceType": "module",
    "mtime": 1587108544876
  },
  "{\"sourceRoot\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\utils\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"filename\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\utils\\\\constant.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"plugins\":[],\"presets\":[]}:7.9.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\utils\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "G:\\Project\\Web\\git\\household-service-server",
      "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\utils\\constant.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "G:\\Project\\Web\\git\\household-service-server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "G:\\Project\\Web\\git\\household-service-server\\src\\utils\\constant.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\utils\\constant.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\utils\\",
        "sourceFileName": "constant.js"
      }
    },
    "ast": null,
    "code": "const UPLOAD_PATH = 'C:/Users/yao/upload/household-service';\nconst SOURCE_PATH = 'https://yaoluolong.xyz:8088/household-service';\nmodule.exports = {\n  CODE_ERROR: -1,\n  //错误状态码\n  CODE_SUCCESS: 0,\n  //成功状态码\n  CODE_TOKEN_EXPIRED: -2,\n  //token已过期\n  debug: false,\n  //debug模式开关\n  PWD_SALT: 'yaoluolong',\n  //MD5加密密钥\n  PRIVATE_KEY: 'yaoluolong',\n  //JWT密钥\n  JWT_EXPIRED: 60 * 60 * 2,\n  //token失效时间\n  UPLOAD_PATH,\n  //照片上传路径\n  SOURCE_PATH //资源服务器地址      \n\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnN0YW50LmpzIl0sIm5hbWVzIjpbIlVQTE9BRF9QQVRIIiwiU09VUkNFX1BBVEgiLCJtb2R1bGUiLCJleHBvcnRzIiwiQ09ERV9FUlJPUiIsIkNPREVfU1VDQ0VTUyIsIkNPREVfVE9LRU5fRVhQSVJFRCIsImRlYnVnIiwiUFdEX1NBTFQiLCJQUklWQVRFX0tFWSIsIkpXVF9FWFBJUkVEIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxXQUFXLEdBQUUsdUNBQW5CO0FBQ0EsTUFBTUMsV0FBVyxHQUFFLCtDQUFuQjtBQUVBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUI7QUFDZkMsRUFBQUEsVUFBVSxFQUFFLENBQUMsQ0FERTtBQUNjO0FBQzdCQyxFQUFBQSxZQUFZLEVBQUUsQ0FGQztBQUVjO0FBQzdCQyxFQUFBQSxrQkFBa0IsRUFBRSxDQUFDLENBSE47QUFHYztBQUM3QkMsRUFBQUEsS0FBSyxFQUFFLEtBSlE7QUFJYztBQUM3QkMsRUFBQUEsUUFBUSxFQUFFLFlBTEs7QUFLYztBQUM3QkMsRUFBQUEsV0FBVyxFQUFFLFlBTkU7QUFNYztBQUM3QkMsRUFBQUEsV0FBVyxFQUFFLEtBQUcsRUFBSCxHQUFNLENBUEo7QUFPYztBQUM3QlYsRUFBQUEsV0FSZTtBQVFjO0FBQzdCQyxFQUFBQSxXQVRlLENBU2M7O0FBVGQsQ0FBakIiLCJzb3VyY2VSb290IjoiRzpcXFByb2plY3RcXFdlYlxcZ2l0XFxob3VzZWhvbGQtc2VydmljZS1zZXJ2ZXJcXHNyY1xcdXRpbHNcXCIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFVQTE9BRF9QQVRIID0nQzovVXNlcnMveWFvL3VwbG9hZC9ob3VzZWhvbGQtc2VydmljZSdcbmNvbnN0IFNPVVJDRV9QQVRIID0naHR0cHM6Ly95YW9sdW9sb25nLnh5ejo4MDg4L2hvdXNlaG9sZC1zZXJ2aWNlJ1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgQ09ERV9FUlJPUjogLTEsICAgICAgICAgICAgICAvL+mUmeivr+eKtuaAgeeggVxuICBDT0RFX1NVQ0NFU1M6IDAsICAgICAgICAgICAgIC8v5oiQ5Yqf54q25oCB56CBXG4gIENPREVfVE9LRU5fRVhQSVJFRDogLTIgLCAgICAgLy90b2tlbuW3sui/h+acn1xuICBkZWJ1ZzogZmFsc2UsICAgICAgICAgICAgICAgIC8vZGVidWfmqKHlvI/lvIDlhbNcbiAgUFdEX1NBTFQ6ICd5YW9sdW9sb25nJywgICAgICAvL01ENeWKoOWvhuWvhumSpVxuICBQUklWQVRFX0tFWTogJ3lhb2x1b2xvbmcnLCAgIC8vSldU5a+G6ZKlXG4gIEpXVF9FWFBJUkVEOiA2MCo2MCoyLCAgICAgICAgLy90b2tlbuWkseaViOaXtumXtFxuICBVUExPQURfUEFUSCwgICAgICAgICAgICAgICAgIC8v54Wn54mH5LiK5Lyg6Lev5b6EXG4gIFNPVVJDRV9QQVRIICAgICAgICAgICAgICAgICAgLy/otYTmupDmnI3liqHlmajlnLDlnYAgICAgICBcbn0iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "constant.js"
      ],
      "names": [
        "UPLOAD_PATH",
        "SOURCE_PATH",
        "module",
        "exports",
        "CODE_ERROR",
        "CODE_SUCCESS",
        "CODE_TOKEN_EXPIRED",
        "debug",
        "PWD_SALT",
        "PRIVATE_KEY",
        "JWT_EXPIRED"
      ],
      "mappings": "AAAA,MAAMA,WAAW,GAAE,uCAAnB;AACA,MAAMC,WAAW,GAAE,+CAAnB;AAEAC,MAAM,CAACC,OAAP,GAAiB;AACfC,EAAAA,UAAU,EAAE,CAAC,CADE;AACc;AAC7BC,EAAAA,YAAY,EAAE,CAFC;AAEc;AAC7BC,EAAAA,kBAAkB,EAAE,CAAC,CAHN;AAGc;AAC7BC,EAAAA,KAAK,EAAE,KAJQ;AAIc;AAC7BC,EAAAA,QAAQ,EAAE,YALK;AAKc;AAC7BC,EAAAA,WAAW,EAAE,YANE;AAMc;AAC7BC,EAAAA,WAAW,EAAE,KAAG,EAAH,GAAM,CAPJ;AAOc;AAC7BV,EAAAA,WARe;AAQc;AAC7BC,EAAAA,WATe,CASc;;AATd,CAAjB",
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\utils\\",
      "sourcesContent": [
        "const UPLOAD_PATH ='C:/Users/yao/upload/household-service'\nconst SOURCE_PATH ='https://yaoluolong.xyz:8088/household-service'\n\nmodule.exports = {\n  CODE_ERROR: -1,              //错误状态码\n  CODE_SUCCESS: 0,             //成功状态码\n  CODE_TOKEN_EXPIRED: -2 ,     //token已过期\n  debug: false,                //debug模式开关\n  PWD_SALT: 'yaoluolong',      //MD5加密密钥\n  PRIVATE_KEY: 'yaoluolong',   //JWT密钥\n  JWT_EXPIRED: 60*60*2,        //token失效时间\n  UPLOAD_PATH,                 //照片上传路径\n  SOURCE_PATH                  //资源服务器地址      \n}"
      ]
    },
    "sourceType": "module",
    "mtime": 1587277525425
  },
  "{\"sourceRoot\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\service\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"filename\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\service\\\\user.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"plugins\":[],\"presets\":[]}:7.9.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "G:\\Project\\Web\\git\\household-service-server",
      "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\user.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "G:\\Project\\Web\\git\\household-service-server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\user.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\user.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\",
        "sourceFileName": "user.js"
      }
    },
    "ast": null,
    "code": "const {\n  querySql\n} = require('../mysql');\n\nfunction login(username, password) {\n  const sql = `select * from user where username='${username}' and password='${password}'`;\n  return querySql(sql);\n}\n\nfunction findUser(username) {\n  const sql = `select * from user where username='${username}'`;\n  return querySql(sql);\n}\n\nfunction create(username, password) {\n  const sql = `INSERT INTO \\`user\\` (\\`username\\`, \\`password\\`, \\`role\\`, \\`avatar\\`) VALUES ('${username}', '${password}', 'guest', 'https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif')`;\n  return querySql(sql);\n}\n\nfunction list() {\n  const sql = 'select * from \\`user\\`';\n  return querySql(sql);\n}\n\nfunction update(username, password, role) {\n  let sql;\n  if (role) sql = `update user set role='${role}' where username='${username}'`;else sql = `update user set password='${password}' where username='${username}'`;\n  return querySql(sql);\n}\n\nmodule.exports = {\n  login,\n  findUser,\n  create,\n  list,\n  update\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIuanMiXSwibmFtZXMiOlsicXVlcnlTcWwiLCJyZXF1aXJlIiwibG9naW4iLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwic3FsIiwiZmluZFVzZXIiLCJjcmVhdGUiLCJsaXN0IiwidXBkYXRlIiwicm9sZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU07QUFBRUEsRUFBQUE7QUFBRixJQUFlQyxPQUFPLENBQUMsVUFBRCxDQUE1Qjs7QUFFQSxTQUFTQyxLQUFULENBQWVDLFFBQWYsRUFBeUJDLFFBQXpCLEVBQW1DO0FBQ2pDLFFBQU1DLEdBQUcsR0FBSSxzQ0FBcUNGLFFBQVMsbUJBQWtCQyxRQUFTLEdBQXRGO0FBQ0EsU0FBT0osUUFBUSxDQUFDSyxHQUFELENBQWY7QUFDRDs7QUFFRCxTQUFTQyxRQUFULENBQWtCSCxRQUFsQixFQUE0QjtBQUMxQixRQUFNRSxHQUFHLEdBQUksc0NBQXFDRixRQUFTLEdBQTNEO0FBQ0EsU0FBT0gsUUFBUSxDQUFDSyxHQUFELENBQWY7QUFDRDs7QUFFRCxTQUFTRSxNQUFULENBQWdCSixRQUFoQixFQUEwQkMsUUFBMUIsRUFBb0M7QUFDbEMsUUFBTUMsR0FBRyxHQUFJLG9GQUFtRkYsUUFBUyxPQUFNQyxRQUFTLG9GQUF4SDtBQUNBLFNBQU9KLFFBQVEsQ0FBQ0ssR0FBRCxDQUFmO0FBQ0Q7O0FBRUQsU0FBU0csSUFBVCxHQUFnQjtBQUNkLFFBQU1ILEdBQUcsR0FBRyx3QkFBWjtBQUNBLFNBQU9MLFFBQVEsQ0FBQ0ssR0FBRCxDQUFmO0FBQ0Q7O0FBRUQsU0FBU0ksTUFBVCxDQUFnQk4sUUFBaEIsRUFBMEJDLFFBQTFCLEVBQW9DTSxJQUFwQyxFQUEwQztBQUN4QyxNQUFJTCxHQUFKO0FBQ0EsTUFBSUssSUFBSixFQUNFTCxHQUFHLEdBQUkseUJBQXdCSyxJQUFLLHFCQUFvQlAsUUFBUyxHQUFqRSxDQURGLEtBR0VFLEdBQUcsR0FBSSw2QkFBNEJELFFBQVMscUJBQW9CRCxRQUFTLEdBQXpFO0FBQ0YsU0FBT0gsUUFBUSxDQUFDSyxHQUFELENBQWY7QUFDRDs7QUFFRE0sTUFBTSxDQUFDQyxPQUFQLEdBQWlCO0FBQ2ZWLEVBQUFBLEtBRGU7QUFFZkksRUFBQUEsUUFGZTtBQUdmQyxFQUFBQSxNQUhlO0FBSWZDLEVBQUFBLElBSmU7QUFLZkMsRUFBQUE7QUFMZSxDQUFqQiIsInNvdXJjZVJvb3QiOiJHOlxcUHJvamVjdFxcV2ViXFxnaXRcXGhvdXNlaG9sZC1zZXJ2aWNlLXNlcnZlclxcc3JjXFxzZXJ2aWNlXFwiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IHF1ZXJ5U3FsIH0gPSByZXF1aXJlKCcuLi9teXNxbCcpO1xuXG5mdW5jdGlvbiBsb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpIHtcbiAgY29uc3Qgc3FsID0gYHNlbGVjdCAqIGZyb20gdXNlciB3aGVyZSB1c2VybmFtZT0nJHt1c2VybmFtZX0nIGFuZCBwYXNzd29yZD0nJHtwYXNzd29yZH0nYFxuICByZXR1cm4gcXVlcnlTcWwoc3FsKVxufVxuXG5mdW5jdGlvbiBmaW5kVXNlcih1c2VybmFtZSkge1xuICBjb25zdCBzcWwgPSBgc2VsZWN0ICogZnJvbSB1c2VyIHdoZXJlIHVzZXJuYW1lPScke3VzZXJuYW1lfSdgXG4gIHJldHVybiBxdWVyeVNxbChzcWwpXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZSh1c2VybmFtZSwgcGFzc3dvcmQpIHtcbiAgY29uc3Qgc3FsID0gYElOU0VSVCBJTlRPIFxcYHVzZXJcXGAgKFxcYHVzZXJuYW1lXFxgLCBcXGBwYXNzd29yZFxcYCwgXFxgcm9sZVxcYCwgXFxgYXZhdGFyXFxgKSBWQUxVRVMgKCcke3VzZXJuYW1lfScsICcke3Bhc3N3b3JkfScsICdndWVzdCcsICdodHRwczovL3dwaW1nLndhbGxzdGNuLmNvbS9mNzc4NzM4Yy1lNGY4LTQ4NzAtYjYzNC01NjcwM2I0YWNhZmUuZ2lmJylgXG4gIHJldHVybiBxdWVyeVNxbChzcWwpXG59XG5cbmZ1bmN0aW9uIGxpc3QoKSB7XG4gIGNvbnN0IHNxbCA9ICdzZWxlY3QgKiBmcm9tIFxcYHVzZXJcXGAnXG4gIHJldHVybiBxdWVyeVNxbChzcWwpXG59XG5cbmZ1bmN0aW9uIHVwZGF0ZSh1c2VybmFtZSwgcGFzc3dvcmQsIHJvbGUpIHtcbiAgbGV0IHNxbFxuICBpZiAocm9sZSlcbiAgICBzcWwgPSBgdXBkYXRlIHVzZXIgc2V0IHJvbGU9JyR7cm9sZX0nIHdoZXJlIHVzZXJuYW1lPScke3VzZXJuYW1lfSdgXG4gIGVsc2VcbiAgICBzcWwgPSBgdXBkYXRlIHVzZXIgc2V0IHBhc3N3b3JkPScke3Bhc3N3b3JkfScgd2hlcmUgdXNlcm5hbWU9JyR7dXNlcm5hbWV9J2BcbiAgcmV0dXJuIHF1ZXJ5U3FsKHNxbClcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGxvZ2luLFxuICBmaW5kVXNlcixcbiAgY3JlYXRlLFxuICBsaXN0LFxuICB1cGRhdGVcbn0iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "user.js"
      ],
      "names": [
        "querySql",
        "require",
        "login",
        "username",
        "password",
        "sql",
        "findUser",
        "create",
        "list",
        "update",
        "role",
        "module",
        "exports"
      ],
      "mappings": "AAAA,MAAM;AAAEA,EAAAA;AAAF,IAAeC,OAAO,CAAC,UAAD,CAA5B;;AAEA,SAASC,KAAT,CAAeC,QAAf,EAAyBC,QAAzB,EAAmC;AACjC,QAAMC,GAAG,GAAI,sCAAqCF,QAAS,mBAAkBC,QAAS,GAAtF;AACA,SAAOJ,QAAQ,CAACK,GAAD,CAAf;AACD;;AAED,SAASC,QAAT,CAAkBH,QAAlB,EAA4B;AAC1B,QAAME,GAAG,GAAI,sCAAqCF,QAAS,GAA3D;AACA,SAAOH,QAAQ,CAACK,GAAD,CAAf;AACD;;AAED,SAASE,MAAT,CAAgBJ,QAAhB,EAA0BC,QAA1B,EAAoC;AAClC,QAAMC,GAAG,GAAI,oFAAmFF,QAAS,OAAMC,QAAS,oFAAxH;AACA,SAAOJ,QAAQ,CAACK,GAAD,CAAf;AACD;;AAED,SAASG,IAAT,GAAgB;AACd,QAAMH,GAAG,GAAG,wBAAZ;AACA,SAAOL,QAAQ,CAACK,GAAD,CAAf;AACD;;AAED,SAASI,MAAT,CAAgBN,QAAhB,EAA0BC,QAA1B,EAAoCM,IAApC,EAA0C;AACxC,MAAIL,GAAJ;AACA,MAAIK,IAAJ,EACEL,GAAG,GAAI,yBAAwBK,IAAK,qBAAoBP,QAAS,GAAjE,CADF,KAGEE,GAAG,GAAI,6BAA4BD,QAAS,qBAAoBD,QAAS,GAAzE;AACF,SAAOH,QAAQ,CAACK,GAAD,CAAf;AACD;;AAEDM,MAAM,CAACC,OAAP,GAAiB;AACfV,EAAAA,KADe;AAEfI,EAAAA,QAFe;AAGfC,EAAAA,MAHe;AAIfC,EAAAA,IAJe;AAKfC,EAAAA;AALe,CAAjB",
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\",
      "sourcesContent": [
        "const { querySql } = require('../mysql');\n\nfunction login(username, password) {\n  const sql = `select * from user where username='${username}' and password='${password}'`\n  return querySql(sql)\n}\n\nfunction findUser(username) {\n  const sql = `select * from user where username='${username}'`\n  return querySql(sql)\n}\n\nfunction create(username, password) {\n  const sql = `INSERT INTO \\`user\\` (\\`username\\`, \\`password\\`, \\`role\\`, \\`avatar\\`) VALUES ('${username}', '${password}', 'guest', 'https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif')`\n  return querySql(sql)\n}\n\nfunction list() {\n  const sql = 'select * from \\`user\\`'\n  return querySql(sql)\n}\n\nfunction update(username, password, role) {\n  let sql\n  if (role)\n    sql = `update user set role='${role}' where username='${username}'`\n  else\n    sql = `update user set password='${password}' where username='${username}'`\n  return querySql(sql)\n}\n\nmodule.exports = {\n  login,\n  findUser,\n  create,\n  list,\n  update\n}"
      ]
    },
    "sourceType": "module",
    "mtime": 1588159023079
  },
  "{\"sourceRoot\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\mysql\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"filename\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\mysql\\\\index.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"plugins\":[],\"presets\":[]}:7.9.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\mysql\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "G:\\Project\\Web\\git\\household-service-server",
      "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\mysql\\index.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "G:\\Project\\Web\\git\\household-service-server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "G:\\Project\\Web\\git\\household-service-server\\src\\mysql\\index.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\mysql\\index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\mysql\\",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "const mysql = require('mysql');\n\nconst {\n  host,\n  user,\n  password,\n  database\n} = require('./config');\n\nconst {\n  debug\n} = require('../utils/constant');\n\nfunction connect() {\n  return mysql.createConnection({\n    host,\n    user,\n    password,\n    database,\n    multipleStatements: true\n  });\n}\n\nfunction querySql(sql) {\n  const conn = connect();\n  if (debug) console.log(sql);\n  return new Promise((resolve, reject) => {\n    try {\n      conn.query(sql, (err, results) => {\n        if (err) {\n          if (debug) console.log('查询失败，原因:' + JSON.stringify(err));\n          reject(err);\n        } else {\n          if (debug) console.log('查询成功', JSON.stringify(results));\n          if (results && results.length === 1) resolve(results[0]);else resolve(results);\n        }\n      });\n    } catch (e) {\n      reject(e);\n    } finally {\n      conn.end();\n    }\n  });\n}\n\nmodule.exports = {\n  querySql\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIm15c3FsIiwicmVxdWlyZSIsImhvc3QiLCJ1c2VyIiwicGFzc3dvcmQiLCJkYXRhYmFzZSIsImRlYnVnIiwiY29ubmVjdCIsImNyZWF0ZUNvbm5lY3Rpb24iLCJtdWx0aXBsZVN0YXRlbWVudHMiLCJxdWVyeVNxbCIsInNxbCIsImNvbm4iLCJjb25zb2xlIiwibG9nIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJxdWVyeSIsImVyciIsInJlc3VsdHMiLCJKU09OIiwic3RyaW5naWZ5IiwibGVuZ3RoIiwiZSIsImVuZCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLEtBQUssR0FBR0MsT0FBTyxDQUFDLE9BQUQsQ0FBckI7O0FBQ0EsTUFBTTtBQUFFQyxFQUFBQSxJQUFGO0FBQVFDLEVBQUFBLElBQVI7QUFBY0MsRUFBQUEsUUFBZDtBQUF3QkMsRUFBQUE7QUFBeEIsSUFBcUNKLE9BQU8sQ0FBQyxVQUFELENBQWxEOztBQUNBLE1BQU07QUFBRUssRUFBQUE7QUFBRixJQUFZTCxPQUFPLENBQUMsbUJBQUQsQ0FBekI7O0FBRUEsU0FBU00sT0FBVCxHQUFtQjtBQUNqQixTQUFPUCxLQUFLLENBQUNRLGdCQUFOLENBQXVCO0FBQzVCTixJQUFBQSxJQUQ0QjtBQUU1QkMsSUFBQUEsSUFGNEI7QUFHNUJDLElBQUFBLFFBSDRCO0FBSTVCQyxJQUFBQSxRQUo0QjtBQUs1QkksSUFBQUEsa0JBQWtCLEVBQUU7QUFMUSxHQUF2QixDQUFQO0FBT0Q7O0FBRUQsU0FBU0MsUUFBVCxDQUFrQkMsR0FBbEIsRUFBdUI7QUFDckIsUUFBTUMsSUFBSSxHQUFHTCxPQUFPLEVBQXBCO0FBQ0EsTUFBR0QsS0FBSCxFQUNFTyxPQUFPLENBQUNDLEdBQVIsQ0FBWUgsR0FBWjtBQUNGLFNBQU8sSUFBSUksT0FBSixDQUFZLENBQUNDLE9BQUQsRUFBVUMsTUFBVixLQUFxQjtBQUN0QyxRQUFJO0FBQ0ZMLE1BQUFBLElBQUksQ0FBQ00sS0FBTCxDQUFXUCxHQUFYLEVBQWdCLENBQUNRLEdBQUQsRUFBTUMsT0FBTixLQUFrQjtBQUNoQyxZQUFJRCxHQUFKLEVBQVM7QUFDUCxjQUFHYixLQUFILEVBQ0VPLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLGFBQWFPLElBQUksQ0FBQ0MsU0FBTCxDQUFlSCxHQUFmLENBQXpCO0FBQ0ZGLFVBQUFBLE1BQU0sQ0FBQ0UsR0FBRCxDQUFOO0FBQ0QsU0FKRCxNQUlPO0FBQ0wsY0FBR2IsS0FBSCxFQUNFTyxPQUFPLENBQUNDLEdBQVIsQ0FBWSxNQUFaLEVBQW9CTyxJQUFJLENBQUNDLFNBQUwsQ0FBZUYsT0FBZixDQUFwQjtBQUNGLGNBQUdBLE9BQU8sSUFBRUEsT0FBTyxDQUFDRyxNQUFSLEtBQWlCLENBQTdCLEVBQ0VQLE9BQU8sQ0FBQ0ksT0FBTyxDQUFDLENBQUQsQ0FBUixDQUFQLENBREYsS0FHRUosT0FBTyxDQUFDSSxPQUFELENBQVA7QUFDSDtBQUNGLE9BYkQ7QUFjRCxLQWZELENBZUUsT0FBT0ksQ0FBUCxFQUFVO0FBQ1ZQLE1BQUFBLE1BQU0sQ0FBQ08sQ0FBRCxDQUFOO0FBQ0QsS0FqQkQsU0FpQlU7QUFDUlosTUFBQUEsSUFBSSxDQUFDYSxHQUFMO0FBQ0Q7QUFDRixHQXJCTSxDQUFQO0FBc0JEOztBQUdEQyxNQUFNLENBQUNDLE9BQVAsR0FBaUI7QUFDZmpCLEVBQUFBO0FBRGUsQ0FBakIiLCJzb3VyY2VSb290IjoiRzpcXFByb2plY3RcXFdlYlxcZ2l0XFxob3VzZWhvbGQtc2VydmljZS1zZXJ2ZXJcXHNyY1xcbXlzcWxcXCIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG15c3FsID0gcmVxdWlyZSgnbXlzcWwnKVxuY29uc3QgeyBob3N0LCB1c2VyLCBwYXNzd29yZCwgZGF0YWJhc2UgfSA9IHJlcXVpcmUoJy4vY29uZmlnJylcbmNvbnN0IHsgZGVidWcgfSA9IHJlcXVpcmUoJy4uL3V0aWxzL2NvbnN0YW50JylcblxuZnVuY3Rpb24gY29ubmVjdCgpIHtcbiAgcmV0dXJuIG15c3FsLmNyZWF0ZUNvbm5lY3Rpb24oe1xuICAgIGhvc3QsXG4gICAgdXNlcixcbiAgICBwYXNzd29yZCxcbiAgICBkYXRhYmFzZSxcbiAgICBtdWx0aXBsZVN0YXRlbWVudHM6IHRydWVcbiAgfSlcbn1cblxuZnVuY3Rpb24gcXVlcnlTcWwoc3FsKSB7XG4gIGNvbnN0IGNvbm4gPSBjb25uZWN0KClcbiAgaWYoZGVidWcpXG4gICAgY29uc29sZS5sb2coc3FsKVxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25uLnF1ZXJ5KHNxbCwgKGVyciwgcmVzdWx0cykgPT4ge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgaWYoZGVidWcpXG4gICAgICAgICAgICBjb25zb2xlLmxvZygn5p+l6K+i5aSx6LSl77yM5Y6f5ZugOicgKyBKU09OLnN0cmluZ2lmeShlcnIpKVxuICAgICAgICAgIHJlamVjdChlcnIpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYoZGVidWcpXG4gICAgICAgICAgICBjb25zb2xlLmxvZygn5p+l6K+i5oiQ5YqfJywgSlNPTi5zdHJpbmdpZnkocmVzdWx0cykpXG4gICAgICAgICAgaWYocmVzdWx0cyYmcmVzdWx0cy5sZW5ndGg9PT0xKVxuICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHRzWzBdKVxuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJlc29sdmUocmVzdWx0cylcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZWplY3QoZSlcbiAgICB9IGZpbmFsbHkge1xuICAgICAgY29ubi5lbmQoKVxuICAgIH1cbiAgfSlcbn1cblxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgcXVlcnlTcWxcbn0iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "mysql",
        "require",
        "host",
        "user",
        "password",
        "database",
        "debug",
        "connect",
        "createConnection",
        "multipleStatements",
        "querySql",
        "sql",
        "conn",
        "console",
        "log",
        "Promise",
        "resolve",
        "reject",
        "query",
        "err",
        "results",
        "JSON",
        "stringify",
        "length",
        "e",
        "end",
        "module",
        "exports"
      ],
      "mappings": "AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;AACA,MAAM;AAAEC,EAAAA,IAAF;AAAQC,EAAAA,IAAR;AAAcC,EAAAA,QAAd;AAAwBC,EAAAA;AAAxB,IAAqCJ,OAAO,CAAC,UAAD,CAAlD;;AACA,MAAM;AAAEK,EAAAA;AAAF,IAAYL,OAAO,CAAC,mBAAD,CAAzB;;AAEA,SAASM,OAAT,GAAmB;AACjB,SAAOP,KAAK,CAACQ,gBAAN,CAAuB;AAC5BN,IAAAA,IAD4B;AAE5BC,IAAAA,IAF4B;AAG5BC,IAAAA,QAH4B;AAI5BC,IAAAA,QAJ4B;AAK5BI,IAAAA,kBAAkB,EAAE;AALQ,GAAvB,CAAP;AAOD;;AAED,SAASC,QAAT,CAAkBC,GAAlB,EAAuB;AACrB,QAAMC,IAAI,GAAGL,OAAO,EAApB;AACA,MAAGD,KAAH,EACEO,OAAO,CAACC,GAAR,CAAYH,GAAZ;AACF,SAAO,IAAII,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtC,QAAI;AACFL,MAAAA,IAAI,CAACM,KAAL,CAAWP,GAAX,EAAgB,CAACQ,GAAD,EAAMC,OAAN,KAAkB;AAChC,YAAID,GAAJ,EAAS;AACP,cAAGb,KAAH,EACEO,OAAO,CAACC,GAAR,CAAY,aAAaO,IAAI,CAACC,SAAL,CAAeH,GAAf,CAAzB;AACFF,UAAAA,MAAM,CAACE,GAAD,CAAN;AACD,SAJD,MAIO;AACL,cAAGb,KAAH,EACEO,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBO,IAAI,CAACC,SAAL,CAAeF,OAAf,CAApB;AACF,cAAGA,OAAO,IAAEA,OAAO,CAACG,MAAR,KAAiB,CAA7B,EACEP,OAAO,CAACI,OAAO,CAAC,CAAD,CAAR,CAAP,CADF,KAGEJ,OAAO,CAACI,OAAD,CAAP;AACH;AACF,OAbD;AAcD,KAfD,CAeE,OAAOI,CAAP,EAAU;AACVP,MAAAA,MAAM,CAACO,CAAD,CAAN;AACD,KAjBD,SAiBU;AACRZ,MAAAA,IAAI,CAACa,GAAL;AACD;AACF,GArBM,CAAP;AAsBD;;AAGDC,MAAM,CAACC,OAAP,GAAiB;AACfjB,EAAAA;AADe,CAAjB",
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\mysql\\",
      "sourcesContent": [
        "const mysql = require('mysql')\nconst { host, user, password, database } = require('./config')\nconst { debug } = require('../utils/constant')\n\nfunction connect() {\n  return mysql.createConnection({\n    host,\n    user,\n    password,\n    database,\n    multipleStatements: true\n  })\n}\n\nfunction querySql(sql) {\n  const conn = connect()\n  if(debug)\n    console.log(sql)\n  return new Promise((resolve, reject) => {\n    try {\n      conn.query(sql, (err, results) => {\n        if (err) {\n          if(debug)\n            console.log('查询失败，原因:' + JSON.stringify(err))\n          reject(err)\n        } else {\n          if(debug)\n            console.log('查询成功', JSON.stringify(results))\n          if(results&&results.length===1)\n            resolve(results[0])\n          else\n            resolve(results)\n        }\n      })\n    } catch (e) {\n      reject(e)\n    } finally {\n      conn.end()\n    }\n  })\n}\n\n\nmodule.exports = {\n  querySql\n}"
      ]
    },
    "sourceType": "module",
    "mtime": 1587028561966
  },
  "{\"sourceRoot\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\mysql\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"filename\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\mysql\\\\config.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"plugins\":[],\"presets\":[]}:7.9.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\mysql\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "G:\\Project\\Web\\git\\household-service-server",
      "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\mysql\\config.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "G:\\Project\\Web\\git\\household-service-server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "G:\\Project\\Web\\git\\household-service-server\\src\\mysql\\config.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\mysql\\config.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\mysql\\",
        "sourceFileName": "config.js"
      }
    },
    "ast": null,
    "code": "module.exports = {\n  host: 'localhost',\n  user: 'root',\n  password: '123456',\n  database: 'household'\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbmZpZy5qcyJdLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwiaG9zdCIsInVzZXIiLCJwYXNzd29yZCIsImRhdGFiYXNlIl0sIm1hcHBpbmdzIjoiQUFBQUEsTUFBTSxDQUFDQyxPQUFQLEdBQWlCO0FBQ2ZDLEVBQUFBLElBQUksRUFBRSxXQURTO0FBRWZDLEVBQUFBLElBQUksRUFBRSxNQUZTO0FBR2ZDLEVBQUFBLFFBQVEsRUFBRSxRQUhLO0FBSWZDLEVBQUFBLFFBQVEsRUFBRTtBQUpLLENBQWpCIiwic291cmNlUm9vdCI6Ikc6XFxQcm9qZWN0XFxXZWJcXGdpdFxcaG91c2Vob2xkLXNlcnZpY2Utc2VydmVyXFxzcmNcXG15c3FsXFwiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHtcbiAgaG9zdDogJ2xvY2FsaG9zdCcsXG4gIHVzZXI6ICdyb290JyxcbiAgcGFzc3dvcmQ6ICcxMjM0NTYnLFxuICBkYXRhYmFzZTogJ2hvdXNlaG9sZCdcbn0iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "config.js"
      ],
      "names": [
        "module",
        "exports",
        "host",
        "user",
        "password",
        "database"
      ],
      "mappings": "AAAAA,MAAM,CAACC,OAAP,GAAiB;AACfC,EAAAA,IAAI,EAAE,WADS;AAEfC,EAAAA,IAAI,EAAE,MAFS;AAGfC,EAAAA,QAAQ,EAAE,QAHK;AAIfC,EAAAA,QAAQ,EAAE;AAJK,CAAjB",
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\mysql\\",
      "sourcesContent": [
        "module.exports = {\n  host: 'localhost',\n  user: 'root',\n  password: '123456',\n  database: 'household'\n}"
      ]
    },
    "sourceType": "module",
    "mtime": 1586758024337
  },
  "{\"sourceRoot\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\utils\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"filename\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\utils\\\\encryption.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"plugins\":[],\"presets\":[]}:7.9.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\utils\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "G:\\Project\\Web\\git\\household-service-server",
      "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\utils\\encryption.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "G:\\Project\\Web\\git\\household-service-server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "G:\\Project\\Web\\git\\household-service-server\\src\\utils\\encryption.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\utils\\encryption.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\utils\\",
        "sourceFileName": "encryption.js"
      }
    },
    "ast": null,
    "code": "const crypto = require('crypto');\n\nfunction md5(s) {\n  // 注意参数需要为 String 类型，否则会出错\n  return crypto.createHash('md5').update(String(s)).digest('hex');\n}\n\nmodule.exports = {\n  md5\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVuY3J5cHRpb24uanMiXSwibmFtZXMiOlsiY3J5cHRvIiwicmVxdWlyZSIsIm1kNSIsInMiLCJjcmVhdGVIYXNoIiwidXBkYXRlIiwiU3RyaW5nIiwiZGlnZXN0IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsTUFBTSxHQUFHQyxPQUFPLENBQUMsUUFBRCxDQUF0Qjs7QUFFQSxTQUFTQyxHQUFULENBQWFDLENBQWIsRUFBZ0I7QUFDZDtBQUNBLFNBQU9ILE1BQU0sQ0FBQ0ksVUFBUCxDQUFrQixLQUFsQixFQUNKQyxNQURJLENBQ0dDLE1BQU0sQ0FBQ0gsQ0FBRCxDQURULEVBQ2NJLE1BRGQsQ0FDcUIsS0FEckIsQ0FBUDtBQUVEOztBQUVEQyxNQUFNLENBQUNDLE9BQVAsR0FBZTtBQUNiUCxFQUFBQTtBQURhLENBQWYiLCJzb3VyY2VSb290IjoiRzpcXFByb2plY3RcXFdlYlxcZ2l0XFxob3VzZWhvbGQtc2VydmljZS1zZXJ2ZXJcXHNyY1xcdXRpbHNcXCIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGNyeXB0byA9IHJlcXVpcmUoJ2NyeXB0bycpXG5cbmZ1bmN0aW9uIG1kNShzKSB7XG4gIC8vIOazqOaEj+WPguaVsOmcgOimgeS4uiBTdHJpbmcg57G75Z6L77yM5ZCm5YiZ5Lya5Ye66ZSZXG4gIHJldHVybiBjcnlwdG8uY3JlYXRlSGFzaCgnbWQ1JylcbiAgICAudXBkYXRlKFN0cmluZyhzKSkuZGlnZXN0KCdoZXgnKTtcbn1cblxubW9kdWxlLmV4cG9ydHM9e1xuICBtZDVcbn0iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "encryption.js"
      ],
      "names": [
        "crypto",
        "require",
        "md5",
        "s",
        "createHash",
        "update",
        "String",
        "digest",
        "module",
        "exports"
      ],
      "mappings": "AAAA,MAAMA,MAAM,GAAGC,OAAO,CAAC,QAAD,CAAtB;;AAEA,SAASC,GAAT,CAAaC,CAAb,EAAgB;AACd;AACA,SAAOH,MAAM,CAACI,UAAP,CAAkB,KAAlB,EACJC,MADI,CACGC,MAAM,CAACH,CAAD,CADT,EACcI,MADd,CACqB,KADrB,CAAP;AAED;;AAEDC,MAAM,CAACC,OAAP,GAAe;AACbP,EAAAA;AADa,CAAf",
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\utils\\",
      "sourcesContent": [
        "const crypto = require('crypto')\n\nfunction md5(s) {\n  // 注意参数需要为 String 类型，否则会出错\n  return crypto.createHash('md5')\n    .update(String(s)).digest('hex');\n}\n\nmodule.exports={\n  md5\n}"
      ]
    },
    "sourceType": "module",
    "mtime": 1586767754707
  },
  "{\"sourceRoot\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\utils\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"filename\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\utils\\\\decode.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"plugins\":[],\"presets\":[]}:7.9.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\utils\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "G:\\Project\\Web\\git\\household-service-server",
      "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\utils\\decode.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "G:\\Project\\Web\\git\\household-service-server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "G:\\Project\\Web\\git\\household-service-server\\src\\utils\\decode.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\utils\\decode.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\utils\\",
        "sourceFileName": "decode.js"
      }
    },
    "ast": null,
    "code": "const jwt = require('jsonwebtoken');\n\nconst {\n  PRIVATE_KEY\n} = require('./constant');\n\nfunction decode(req) {\n  const authorization = req.get('Authorization');\n  let token = '';\n\n  if (authorization.indexOf('Bearer') >= 0) {\n    token = authorization.replace('Bearer ', '');\n  } else {\n    token = authorization;\n  }\n\n  return jwt.verify(token, PRIVATE_KEY);\n}\n\nmodule.exports = {\n  decode\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlY29kZS5qcyJdLCJuYW1lcyI6WyJqd3QiLCJyZXF1aXJlIiwiUFJJVkFURV9LRVkiLCJkZWNvZGUiLCJyZXEiLCJhdXRob3JpemF0aW9uIiwiZ2V0IiwidG9rZW4iLCJpbmRleE9mIiwicmVwbGFjZSIsInZlcmlmeSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLEdBQUcsR0FBR0MsT0FBTyxDQUFDLGNBQUQsQ0FBbkI7O0FBQ0EsTUFBTTtBQUFFQyxFQUFBQTtBQUFGLElBQWtCRCxPQUFPLENBQUMsWUFBRCxDQUEvQjs7QUFFQSxTQUFTRSxNQUFULENBQWdCQyxHQUFoQixFQUFxQjtBQUNuQixRQUFNQyxhQUFhLEdBQUdELEdBQUcsQ0FBQ0UsR0FBSixDQUFRLGVBQVIsQ0FBdEI7QUFDQSxNQUFJQyxLQUFLLEdBQUcsRUFBWjs7QUFDQSxNQUFJRixhQUFhLENBQUNHLE9BQWQsQ0FBc0IsUUFBdEIsS0FBbUMsQ0FBdkMsRUFBMEM7QUFDeENELElBQUFBLEtBQUssR0FBR0YsYUFBYSxDQUFDSSxPQUFkLENBQXNCLFNBQXRCLEVBQWlDLEVBQWpDLENBQVI7QUFDRCxHQUZELE1BRU87QUFDTEYsSUFBQUEsS0FBSyxHQUFHRixhQUFSO0FBQ0Q7O0FBQ0QsU0FBT0wsR0FBRyxDQUFDVSxNQUFKLENBQVdILEtBQVgsRUFBa0JMLFdBQWxCLENBQVA7QUFDRDs7QUFFRFMsTUFBTSxDQUFDQyxPQUFQLEdBQWU7QUFDYlQsRUFBQUE7QUFEYSxDQUFmIiwic291cmNlUm9vdCI6Ikc6XFxQcm9qZWN0XFxXZWJcXGdpdFxcaG91c2Vob2xkLXNlcnZpY2Utc2VydmVyXFxzcmNcXHV0aWxzXFwiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBqd3QgPSByZXF1aXJlKCdqc29ud2VidG9rZW4nKVxuY29uc3QgeyBQUklWQVRFX0tFWSB9ID0gcmVxdWlyZSgnLi9jb25zdGFudCcpXG5cbmZ1bmN0aW9uIGRlY29kZShyZXEpIHtcbiAgY29uc3QgYXV0aG9yaXphdGlvbiA9IHJlcS5nZXQoJ0F1dGhvcml6YXRpb24nKVxuICBsZXQgdG9rZW4gPSAnJ1xuICBpZiAoYXV0aG9yaXphdGlvbi5pbmRleE9mKCdCZWFyZXInKSA+PSAwKSB7XG4gICAgdG9rZW4gPSBhdXRob3JpemF0aW9uLnJlcGxhY2UoJ0JlYXJlciAnLCAnJylcbiAgfSBlbHNlIHtcbiAgICB0b2tlbiA9IGF1dGhvcml6YXRpb25cbiAgfVxuICByZXR1cm4gand0LnZlcmlmeSh0b2tlbiwgUFJJVkFURV9LRVkpXG59XG5cbm1vZHVsZS5leHBvcnRzPXtcbiAgZGVjb2RlXG59Il19",
    "map": {
      "version": 3,
      "sources": [
        "decode.js"
      ],
      "names": [
        "jwt",
        "require",
        "PRIVATE_KEY",
        "decode",
        "req",
        "authorization",
        "get",
        "token",
        "indexOf",
        "replace",
        "verify",
        "module",
        "exports"
      ],
      "mappings": "AAAA,MAAMA,GAAG,GAAGC,OAAO,CAAC,cAAD,CAAnB;;AACA,MAAM;AAAEC,EAAAA;AAAF,IAAkBD,OAAO,CAAC,YAAD,CAA/B;;AAEA,SAASE,MAAT,CAAgBC,GAAhB,EAAqB;AACnB,QAAMC,aAAa,GAAGD,GAAG,CAACE,GAAJ,CAAQ,eAAR,CAAtB;AACA,MAAIC,KAAK,GAAG,EAAZ;;AACA,MAAIF,aAAa,CAACG,OAAd,CAAsB,QAAtB,KAAmC,CAAvC,EAA0C;AACxCD,IAAAA,KAAK,GAAGF,aAAa,CAACI,OAAd,CAAsB,SAAtB,EAAiC,EAAjC,CAAR;AACD,GAFD,MAEO;AACLF,IAAAA,KAAK,GAAGF,aAAR;AACD;;AACD,SAAOL,GAAG,CAACU,MAAJ,CAAWH,KAAX,EAAkBL,WAAlB,CAAP;AACD;;AAEDS,MAAM,CAACC,OAAP,GAAe;AACbT,EAAAA;AADa,CAAf",
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\utils\\",
      "sourcesContent": [
        "const jwt = require('jsonwebtoken')\nconst { PRIVATE_KEY } = require('./constant')\n\nfunction decode(req) {\n  const authorization = req.get('Authorization')\n  let token = ''\n  if (authorization.indexOf('Bearer') >= 0) {\n    token = authorization.replace('Bearer ', '')\n  } else {\n    token = authorization\n  }\n  return jwt.verify(token, PRIVATE_KEY)\n}\n\nmodule.exports={\n  decode\n}"
      ]
    },
    "sourceType": "module",
    "mtime": 1586796295487
  },
  "{\"sourceRoot\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\utils\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"filename\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\utils\\\\auto-increase.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"plugins\":[],\"presets\":[]}:7.9.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\utils\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "G:\\Project\\Web\\git\\household-service-server",
      "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\utils\\auto-increase.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "G:\\Project\\Web\\git\\household-service-server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "G:\\Project\\Web\\git\\household-service-server\\src\\utils\\auto-increase.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\utils\\auto-increase.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\utils\\",
        "sourceFileName": "auto-increase.js"
      }
    },
    "ast": null,
    "code": "function increase(data, id) {\n  if (data && Array.isArray(data)) {\n    let i = 3;\n\n    for (i = 1; i <= 100; i++) {\n      if (data.every(e => +e[id] !== i)) {\n        break;\n      }\n    }\n\n    if (i < 10) {\n      return '00' + i;\n    } else {\n      return '0' + i;\n    }\n  } else if (!data) {\n    return '001';\n  } else {\n    let i;\n\n    for (i = 1; i <= 100; i++) {\n      if (i !== +data[id]) {\n        break;\n      }\n    }\n\n    if (i < 10) {\n      return '00' + i;\n    } else {\n      return '0' + i;\n    }\n  }\n}\n\nmodule.exports = {\n  increase\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dG8taW5jcmVhc2UuanMiXSwibmFtZXMiOlsiaW5jcmVhc2UiLCJkYXRhIiwiaWQiLCJBcnJheSIsImlzQXJyYXkiLCJpIiwiZXZlcnkiLCJlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBU0EsUUFBVCxDQUFrQkMsSUFBbEIsRUFBd0JDLEVBQXhCLEVBQTRCO0FBQzFCLE1BQUlELElBQUksSUFBSUUsS0FBSyxDQUFDQyxPQUFOLENBQWNILElBQWQsQ0FBWixFQUFpQztBQUMvQixRQUFJSSxDQUFDLEdBQUcsQ0FBUjs7QUFDQSxTQUFLQSxDQUFDLEdBQUcsQ0FBVCxFQUFZQSxDQUFDLElBQUksR0FBakIsRUFBc0JBLENBQUMsRUFBdkIsRUFBMkI7QUFDekIsVUFBSUosSUFBSSxDQUFDSyxLQUFMLENBQVdDLENBQUMsSUFBSSxDQUFDQSxDQUFDLENBQUNMLEVBQUQsQ0FBRixLQUFXRyxDQUEzQixDQUFKLEVBQW1DO0FBQ2pDO0FBQ0Q7QUFDRjs7QUFDRCxRQUFJQSxDQUFDLEdBQUcsRUFBUixFQUFZO0FBQ1YsYUFBUSxPQUFPQSxDQUFmO0FBQ0QsS0FGRCxNQUdLO0FBQ0gsYUFBUSxNQUFNQSxDQUFkO0FBQ0Q7QUFDRixHQWJELE1BY0ssSUFBSSxDQUFDSixJQUFMLEVBQVc7QUFDZCxXQUFRLEtBQVI7QUFDRCxHQUZJLE1BR0E7QUFDSCxRQUFJSSxDQUFKOztBQUNBLFNBQUtBLENBQUMsR0FBRyxDQUFULEVBQVlBLENBQUMsSUFBSSxHQUFqQixFQUFzQkEsQ0FBQyxFQUF2QixFQUEyQjtBQUN6QixVQUFJQSxDQUFDLEtBQUssQ0FBQ0osSUFBSSxDQUFDQyxFQUFELENBQWYsRUFBcUI7QUFDbkI7QUFDRDtBQUNGOztBQUNELFFBQUlHLENBQUMsR0FBRyxFQUFSLEVBQVk7QUFDVixhQUFRLE9BQU9BLENBQWY7QUFDRCxLQUZELE1BR0s7QUFDSCxhQUFRLE1BQU1BLENBQWQ7QUFDRDtBQUNGO0FBQ0Y7O0FBRURHLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQjtBQUNmVCxFQUFBQTtBQURlLENBQWpCIiwic291cmNlUm9vdCI6Ikc6XFxQcm9qZWN0XFxXZWJcXGdpdFxcaG91c2Vob2xkLXNlcnZpY2Utc2VydmVyXFxzcmNcXHV0aWxzXFwiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBpbmNyZWFzZShkYXRhLCBpZCkge1xuICBpZiAoZGF0YSAmJiBBcnJheS5pc0FycmF5KGRhdGEpKSB7XG4gICAgbGV0IGkgPSAzXG4gICAgZm9yIChpID0gMTsgaSA8PSAxMDA7IGkrKykge1xuICAgICAgaWYgKGRhdGEuZXZlcnkoZSA9PiArZVtpZF0gIT09IGkpKSB7XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChpIDwgMTApIHtcbiAgICAgIHJldHVybiAoJzAwJyArIGkpXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcmV0dXJuICgnMCcgKyBpKVxuICAgIH1cbiAgfVxuICBlbHNlIGlmICghZGF0YSkge1xuICAgIHJldHVybiAoJzAwMScpXG4gIH1cbiAgZWxzZSB7XG4gICAgbGV0IGlcbiAgICBmb3IgKGkgPSAxOyBpIDw9IDEwMDsgaSsrKSB7XG4gICAgICBpZiAoaSAhPT0gK2RhdGFbaWRdKSB7XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChpIDwgMTApIHtcbiAgICAgIHJldHVybiAoJzAwJyArIGkpXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcmV0dXJuICgnMCcgKyBpKVxuICAgIH1cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgaW5jcmVhc2Vcbn0iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "auto-increase.js"
      ],
      "names": [
        "increase",
        "data",
        "id",
        "Array",
        "isArray",
        "i",
        "every",
        "e",
        "module",
        "exports"
      ],
      "mappings": "AAAA,SAASA,QAAT,CAAkBC,IAAlB,EAAwBC,EAAxB,EAA4B;AAC1B,MAAID,IAAI,IAAIE,KAAK,CAACC,OAAN,CAAcH,IAAd,CAAZ,EAAiC;AAC/B,QAAII,CAAC,GAAG,CAAR;;AACA,SAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,IAAI,GAAjB,EAAsBA,CAAC,EAAvB,EAA2B;AACzB,UAAIJ,IAAI,CAACK,KAAL,CAAWC,CAAC,IAAI,CAACA,CAAC,CAACL,EAAD,CAAF,KAAWG,CAA3B,CAAJ,EAAmC;AACjC;AACD;AACF;;AACD,QAAIA,CAAC,GAAG,EAAR,EAAY;AACV,aAAQ,OAAOA,CAAf;AACD,KAFD,MAGK;AACH,aAAQ,MAAMA,CAAd;AACD;AACF,GAbD,MAcK,IAAI,CAACJ,IAAL,EAAW;AACd,WAAQ,KAAR;AACD,GAFI,MAGA;AACH,QAAII,CAAJ;;AACA,SAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,IAAI,GAAjB,EAAsBA,CAAC,EAAvB,EAA2B;AACzB,UAAIA,CAAC,KAAK,CAACJ,IAAI,CAACC,EAAD,CAAf,EAAqB;AACnB;AACD;AACF;;AACD,QAAIG,CAAC,GAAG,EAAR,EAAY;AACV,aAAQ,OAAOA,CAAf;AACD,KAFD,MAGK;AACH,aAAQ,MAAMA,CAAd;AACD;AACF;AACF;;AAEDG,MAAM,CAACC,OAAP,GAAiB;AACfT,EAAAA;AADe,CAAjB",
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\utils\\",
      "sourcesContent": [
        "function increase(data, id) {\n  if (data && Array.isArray(data)) {\n    let i = 3\n    for (i = 1; i <= 100; i++) {\n      if (data.every(e => +e[id] !== i)) {\n        break\n      }\n    }\n    if (i < 10) {\n      return ('00' + i)\n    }\n    else {\n      return ('0' + i)\n    }\n  }\n  else if (!data) {\n    return ('001')\n  }\n  else {\n    let i\n    for (i = 1; i <= 100; i++) {\n      if (i !== +data[id]) {\n        break\n      }\n    }\n    if (i < 10) {\n      return ('00' + i)\n    }\n    else {\n      return ('0' + i)\n    }\n  }\n}\n\nmodule.exports = {\n  increase\n}"
      ]
    },
    "sourceType": "module",
    "mtime": 1587474959446
  },
  "{\"sourceRoot\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\router\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"filename\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\router\\\\staff.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"plugins\":[],\"presets\":[]}:7.9.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "G:\\Project\\Web\\git\\household-service-server",
      "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\staff.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "G:\\Project\\Web\\git\\household-service-server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\staff.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\staff.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\",
        "sourceFileName": "staff.js"
      }
    },
    "ast": null,
    "code": "const express = require('express');\n\nconst Result = require('../models/Result');\n\nconst {\n  create,\n  list,\n  update,\n  remove,\n  query\n} = require('../service/staff');\n\nconst {\n  decode\n} = require('../utils/decode');\n\nconst {\n  increase\n} = require('../utils/auto-increase');\n\nconst {\n  SOURCE_PATH,\n  UPLOAD_PATH\n} = require('../utils/constant');\n\nconst fs = require('fs');\n\nconst router = express.Router();\nrouter.post('/create', (req, res) => {\n  const decoded = decode(req);\n  const {\n    name,\n    sex,\n    entryDate,\n    profile,\n    vocation,\n    age,\n    filename\n  } = req.body;\n  const picture = `${SOURCE_PATH}/avatar/` + filename;\n\n  if (decoded && decoded.username) {\n    list().then(result => {\n      let data = new Result(result, '查询成功').data;\n      create(increase(data, 'staffID'), name, sex, entryDate, profile, vocation, age, picture).then(result => {\n        if (result) {\n          new Result('新增员工成功').success(res);\n        } else {\n          new Result('新增员工失败').fail(res);\n        }\n      });\n    });\n  } else {\n    new Result('解析失败').fail(res);\n  }\n});\nrouter.get('/list', (req, res) => {\n  list().then(result => {\n    if (result) {\n      new Result(result, '查询成功').success(res);\n    } else {\n      new Result('查询失败').fail(res);\n    }\n  });\n});\nrouter.post('/query', (req, res) => {\n  query(req.body.id).then(result => {\n    if (result) {\n      new Result(result, '查询成功').success(res);\n    } else {\n      new Result('查询失败').fail(res);\n    }\n  });\n});\nrouter.post('/update', (req, res) => {\n  const {\n    staffID,\n    name,\n    sex,\n    entryDate,\n    profile,\n    vocation,\n    age\n  } = req.body;\n  const {\n    filename\n  } = req.body;\n  let ori;\n  let oriFile;\n  let picture;\n\n  if (filename) {\n    ori = req.body.ori.split('/').pop();\n    oriFile = `${UPLOAD_PATH}/avatar/` + ori;\n    picture = `${SOURCE_PATH}/avatar/` + filename;\n  }\n\n  update(staffID, name, sex, entryDate, profile, vocation, age, picture).then(result => {\n    if (result) {\n      new Result(result, '编辑成功').success(res);\n\n      if (filename) {\n        fs.unlink(oriFile, function (err) {\n          if (err) {\n            console.log(err);\n          }\n        });\n      }\n    } else {\n      new Result('编辑失败').fail(res);\n    }\n  });\n});\nrouter.post('/remove', (req, res) => {\n  const ori = req.body.url.split('/').pop();\n  const oriFile = `${UPLOAD_PATH}/avatar/` + ori;\n  remove(req.body.id).then(result => {\n    if (result) {\n      new Result('删除成功').success(res);\n      fs.unlink(oriFile, function (err) {\n        if (err) {\n          throw err;\n        }\n      });\n    } else {\n      new Result('删除失败').fail(res);\n    }\n  });\n});\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0YWZmLmpzIl0sIm5hbWVzIjpbImV4cHJlc3MiLCJyZXF1aXJlIiwiUmVzdWx0IiwiY3JlYXRlIiwibGlzdCIsInVwZGF0ZSIsInJlbW92ZSIsInF1ZXJ5IiwiZGVjb2RlIiwiaW5jcmVhc2UiLCJTT1VSQ0VfUEFUSCIsIlVQTE9BRF9QQVRIIiwiZnMiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJwb3N0IiwicmVxIiwicmVzIiwiZGVjb2RlZCIsIm5hbWUiLCJzZXgiLCJlbnRyeURhdGUiLCJwcm9maWxlIiwidm9jYXRpb24iLCJhZ2UiLCJmaWxlbmFtZSIsImJvZHkiLCJwaWN0dXJlIiwidXNlcm5hbWUiLCJ0aGVuIiwicmVzdWx0IiwiZGF0YSIsInN1Y2Nlc3MiLCJmYWlsIiwiZ2V0IiwiaWQiLCJzdGFmZklEIiwib3JpIiwib3JpRmlsZSIsInNwbGl0IiwicG9wIiwidW5saW5rIiwiZXJyIiwiY29uc29sZSIsImxvZyIsInVybCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQUQsQ0FBdkI7O0FBQ0EsTUFBTUMsTUFBTSxHQUFHRCxPQUFPLENBQUMsa0JBQUQsQ0FBdEI7O0FBQ0EsTUFBTTtBQUFFRSxFQUFBQSxNQUFGO0FBQVVDLEVBQUFBLElBQVY7QUFBZ0JDLEVBQUFBLE1BQWhCO0FBQXdCQyxFQUFBQSxNQUF4QjtBQUFnQ0MsRUFBQUE7QUFBaEMsSUFBMENOLE9BQU8sQ0FBQyxrQkFBRCxDQUF2RDs7QUFDQSxNQUFNO0FBQUVPLEVBQUFBO0FBQUYsSUFBYVAsT0FBTyxDQUFDLGlCQUFELENBQTFCOztBQUNBLE1BQU07QUFBRVEsRUFBQUE7QUFBRixJQUFlUixPQUFPLENBQUMsd0JBQUQsQ0FBNUI7O0FBQ0EsTUFBTTtBQUFFUyxFQUFBQSxXQUFGO0FBQWVDLEVBQUFBO0FBQWYsSUFBK0JWLE9BQU8sQ0FBQyxtQkFBRCxDQUE1Qzs7QUFDQSxNQUFNVyxFQUFFLEdBQUdYLE9BQU8s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QVksU0FBWixFQUF1QixDQUFDQyxHQUFELEVBQU1DLEdBQU4sS0FBYztBQUNuQyxRQUFNb0IsR0FBRyxHQUFHckIsR0FBRyxDQUFDVSxJQUFKLENBQVNtQixHQUFULENBQWFOLEtBQWIsQ0FBbUIsR0FBbkIsRUFBd0JDLEdBQXhCLEVBQVo7QUFDQSxRQUFNRixPQUFPLEdBQUksR0FBRTNCLFdBQVksVUFBZixHQUEyQjBCLEdBQTNDO0FBQ0EvQixFQUFBQSxNQUFNLENBQUNVLEdBQUcsQ0FBQ1UsSUFBSixDQUFTUyxFQUFWLENBQU4sQ0FBb0JOLElBQXBCLENBQXlCQyxNQUFNLElBQUk7QUFDakMsUUFBSUEsTUFBSixFQUFZO0FBQ1YsVUFBSTVCLE1BQUosQ0FBVyxNQUFYLEVBQW1COEIsT0FBbkIsQ0FBMkJmLEdBQTNCO0FBQ0FMLE1BQUFBLEVBQUUsQ0FBQzZCLE1BQUgsQ0FBVUgsT0FBVixFQUFtQixVQUFVSSxHQUFWLEVBQWU7QUFDaEMsWUFBSUEsR0FBSixFQUFTO0FBQUUsZ0JBQU1BLEdBQU47QUFBVztBQUN2QixPQUZEO0FBR0QsS0FMRCxNQUtPO0FBQ0wsVUFBSXhDLE1BQUosQ0FBVyxNQUFYLEVBQW1CK0IsSUFBbkIsQ0FBd0JoQixHQUF4QjtBQUNEO0FBQ0YsR0FURDtBQVVELENBYkQ7QUFlQTZCLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQmxDLE1BQWpCIiwic291cmNlUm9vdCI6Ikc6XFxQcm9qZWN0XFxXZWJcXGdpdFxcaG91c2Vob2xkLXNlcnZpY2Utc2VydmVyXFxzcmNcXHJvdXRlclxcIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKVxuY29uc3QgUmVzdWx0ID0gcmVxdWlyZSgnLi4vbW9kZWxzL1Jlc3VsdCcpXG5jb25zdCB7IGNyZWF0ZSwgbGlzdCwgdXBkYXRlLCByZW1vdmUsIHF1ZXJ5IH0gPSByZXF1aXJlKCcuLi9zZXJ2aWNlL3N0YWZmJylcbmNvbnN0IHsgZGVjb2RlIH0gPSByZXF1aXJlKCcuLi91dGlscy9kZWNvZGUnKVxuY29uc3QgeyBpbmNyZWFzZSB9ID0gcmVxdWlyZSgnLi4vdXRpbHMvYXV0by1pbmNyZWFzZScpXG5jb25zdCB7IFNPVVJDRV9QQVRILCBVUExPQURfUEFUSCB9ID0gcmVxdWlyZSgnLi4vdXRpbHMvY29uc3RhbnQnKVxuY29uc3QgZnMgPSByZXF1aXJlKCdmcycpXG5cbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKClcblxucm91dGVyLnBvc3QoJy9jcmVhdGUnLCAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgZGVjb2RlZCA9IGRlY29kZShyZXEpXG4gIGNvbnN0IHsgbmFtZSwgc2V4LCBlbnRyeURhdGUsIHByb2ZpbGUsIHZvY2F0aW9uLCBhZ2UsIGZpbGVuYW1lIH0gPSByZXEuYm9keVxuICBjb25zdCBwaWN0dXJlID0gYCR7U09VUkNFX1BBVEh9L2F2YXRhci9gICsgZmlsZW5hbWVcbiAgaWYgKGRlY29kZWQgJiYgZGVjb2RlZC51c2VybmFtZSkge1xuICAgIGxpc3QoKS50aGVuKHJlc3VsdCA9PiB7XG4gICAgICBsZXQgZGF0YSA9IG5ldyBSZXN1bHQocmVzdWx0LCAn5p+l6K+i5oiQ5YqfJykuZGF0YVxuICAgICAgY3JlYXRlKGluY3JlYXNlKGRhdGEsICdzdGFmZklEJyksIG5hbWUsIHNleCwgZW50cnlEYXRlLCBwcm9maWxlLCB2b2NhdGlvbiwgYWdlLCBwaWN0dXJlKS50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICBuZXcgUmVzdWx0KCfmlrDlop7lkZjlt6XmiJDlip8nKS5zdWNjZXNzKHJlcylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXcgUmVzdWx0KCfmlrDlop7lkZjlt6XlpLHotKUnKS5mYWlsKHJlcylcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9KVxuICB9IGVsc2Uge1xuICAgIG5ldyBSZXN1bHQoJ+ino+aekOWksei0pScpLmZhaWwocmVzKVxuICB9XG59KVxuXG5yb3V0ZXIuZ2V0KCcvbGlzdCcsIChyZXEsIHJlcykgPT4ge1xuICBsaXN0KCkudGhlbihyZXN1bHQgPT4ge1xuICAgIGlmIChyZXN1bHQpIHtcbiAgICAgIG5ldyBSZXN1bHQocmVzdWx0LCAn5p+l6K+i5oiQ5YqfJykuc3VjY2VzcyhyZXMpXG4gICAgfSBlbHNlIHtcbiAgICAgIG5ldyBSZXN1bHQoJ+afpeivouWksei0pScpLmZhaWwocmVzKVxuICAgIH1cbiAgfSlcbn0pXG5cbnJvdXRlci5wb3N0KCcvcXVlcnknLCAocmVxLCByZXMpID0+IHtcbiAgcXVlcnkocmVxLmJvZHkuaWQpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICBpZiAocmVzdWx0KSB7XG4gICAgICBuZXcgUmVzdWx0KHJlc3VsdCwgJ+afpeivouaIkOWKnycpLnN1Y2Nlc3MocmVzKVxuICAgIH0gZWxzZSB7XG4gICAgICBuZXcgUmVzdWx0KCfmn6Xor6LlpLHotKUnKS5mYWlsKHJlcylcbiAgICB9XG4gIH0pXG59KVxuXG5yb3V0ZXIucG9zdCgnL3VwZGF0ZScsIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCB7IHN0YWZmSUQsIG5hbWUsIHNleCwgZW50cnlEYXRlLCBwcm9maWxlLCB2b2NhdGlvbiwgYWdlIH0gPSByZXEuYm9keVxuICBjb25zdCB7IGZpbGVuYW1lIH0gPSByZXEuYm9keVxuICBsZXQgb3JpXG4gIGxldCBvcmlGaWxlXG4gIGxldCBwaWN0dXJlXG4gIGlmIChmaWxlbmFtZSkge1xuICAgIG9yaSA9IHJlcS5ib2R5Lm9yaS5zcGxpdCgnLycpLnBvcCgpXG4gICAgb3JpRmlsZSA9IGAke1VQTE9BRF9QQVRIfS9hdmF0YXIvYCArIG9yaVxuICAgIHBpY3R1cmUgPSBgJHtTT1VSQ0VfUEFUSH0vYXZhdGFyL2AgKyBmaWxlbmFtZVxuICB9XG4gIHVwZGF0ZShzdGFmZklELCBuYW1lLCBzZXgsIGVudHJ5RGF0ZSwgcHJvZmlsZSwgdm9jYXRpb24sIGFnZSwgcGljdHVyZSkudGhlbihyZXN1bHQgPT4ge1xuICAgIGlmIChyZXN1bHQpIHtcbiAgICAgIG5ldyBSZXN1bHQocmVzdWx0LCAn57yW6L6R5oiQ5YqfJykuc3VjY2VzcyhyZXMpXG4gICAgICBpZiAoZmlsZW5hbWUpIHtcbiAgICAgICAgZnMudW5saW5rKG9yaUZpbGUsIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICBpZiAoZXJyKSB7IGNvbnNvbGUubG9nKGVycikgfVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBuZXcgUmVzdWx0KCfnvJbovpHlpLHotKUnKS5mYWlsKHJlcylcbiAgICB9XG4gIH0pXG59KVxuXG5yb3V0ZXIucG9zdCgnL3JlbW92ZScsIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCBvcmkgPSByZXEuYm9keS51cmwuc3BsaXQoJy8nKS5wb3AoKVxuICBjb25zdCBvcmlGaWxlID0gYCR7VVBMT0FEX1BBVEh9L2F2YXRhci9gICsgb3JpXG4gIHJlbW92ZShyZXEuYm9keS5pZCkudGhlbihyZXN1bHQgPT4ge1xuICAgIGlmIChyZXN1bHQpIHtcbiAgICAgIG5ldyBSZXN1bHQoJ+WIoOmZpOaIkOWKnycpLnN1Y2Nlc3MocmVzKVxuICAgICAgZnMudW5saW5rKG9yaUZpbGUsIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgaWYgKGVycikgeyB0aHJvdyBlcnIgfVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3IFJlc3VsdCgn5Yig6Zmk5aSx6LSlJykuZmFpbChyZXMpXG4gICAgfVxuICB9KVxufSlcblxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXJcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "staff.js"
      ],
      "names": [
        "express",
        "require",
        "Result",
        "create",
        "list",
        "update",
        "remove",
        "query",
        "decode",
        "increase",
        "SOURCE_PATH",
        "UPLOAD_PATH",
        "fs",
        "router",
        "Router",
        "post",
        "req",
        "res",
        "decoded",
        "name",
        "sex",
        "entryDate",
        "profile",
        "vocation",
        "age",
        "filename",
        "body",
        "picture",
        "username",
        "then",
        "result",
        "data",
        "success",
        "fail",
        "get",
        "id",
        "staffID",
        "ori",
        "oriFile",
        "split",
        "pop",
        "unlink",
        "err",
        "console",
        "log",
        "url",
        "module",
        "exports"
      ],
      "mappings": "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",
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\",
      "sourcesContent": [
        "const express = require('express')\nconst Result = require('../models/Result')\nconst { create, list, update, remove, query } = require('../service/staff')\nconst { decode } = require('../utils/decode')\nconst { increase } = require('../utils/auto-increase')\nconst { SOURCE_PATH, UPLOAD_PATH } = require('../utils/constant')\nconst fs = require('fs')\n\nconst router = express.Router()\n\nrouter.post('/create', (req, res) => {\n  const decoded = decode(req)\n  const { name, sex, entryDate, profile, vocation, age, filename } = req.body\n  const picture = `${SOURCE_PATH}/avatar/` + filename\n  if (decoded && decoded.username) {\n    list().then(result => {\n      let data = new Result(result, '查询成功').data\n      create(increase(data, 'staffID'), name, sex, entryDate, profile, vocation, age, picture).then(result => {\n        if (result) {\n          new Result('新增员工成功').success(res)\n        } else {\n          new Result('新增员工失败').fail(res)\n        }\n      })\n    })\n  } else {\n    new Result('解析失败').fail(res)\n  }\n})\n\nrouter.get('/list', (req, res) => {\n  list().then(result => {\n    if (result) {\n      new Result(result, '查询成功').success(res)\n    } else {\n      new Result('查询失败').fail(res)\n    }\n  })\n})\n\nrouter.post('/query', (req, res) => {\n  query(req.body.id).then(result => {\n    if (result) {\n      new Result(result, '查询成功').success(res)\n    } else {\n      new Result('查询失败').fail(res)\n    }\n  })\n})\n\nrouter.post('/update', (req, res) => {\n  const { staffID, name, sex, entryDate, profile, vocation, age } = req.body\n  const { filename } = req.body\n  let ori\n  let oriFile\n  let picture\n  if (filename) {\n    ori = req.body.ori.split('/').pop()\n    oriFile = `${UPLOAD_PATH}/avatar/` + ori\n    picture = `${SOURCE_PATH}/avatar/` + filename\n  }\n  update(staffID, name, sex, entryDate, profile, vocation, age, picture).then(result => {\n    if (result) {\n      new Result(result, '编辑成功').success(res)\n      if (filename) {\n        fs.unlink(oriFile, function (err) {\n          if (err) { console.log(err) }\n        })\n      }\n    } else {\n      new Result('编辑失败').fail(res)\n    }\n  })\n})\n\nrouter.post('/remove', (req, res) => {\n  const ori = req.body.url.split('/').pop()\n  const oriFile = `${UPLOAD_PATH}/avatar/` + ori\n  remove(req.body.id).then(result => {\n    if (result) {\n      new Result('删除成功').success(res)\n      fs.unlink(oriFile, function (err) {\n        if (err) { throw err }\n      })\n    } else {\n      new Result('删除失败').fail(res)\n    }\n  })\n})\n\nmodule.exports = router\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1587717710476
  },
  "{\"sourceRoot\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\service\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"filename\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\service\\\\staff.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"plugins\":[],\"presets\":[]}:7.9.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "G:\\Project\\Web\\git\\household-service-server",
      "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\staff.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "G:\\Project\\Web\\git\\household-service-server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\staff.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\staff.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\",
        "sourceFileName": "staff.js"
      }
    },
    "ast": null,
    "code": "const {\n  querySql\n} = require('../mysql');\n\nfunction create(staffID, name, sex, entryDate, profile, vocation, age, picture) {\n  const sql = `insert into staff(staffID,name,sex,entryDate,profile,vocation,age,picture) \n  values('${staffID}','${name}','${sex}','${entryDate}','${profile}','${vocation}','${age}','${picture}')`;\n  return querySql(sql);\n}\n\nfunction list(staffID) {\n  let sql;\n\n  if (staffID) {\n    sql = `select * from staff where staffID='${staffID}'`;\n  } else {\n    sql = `select * from staff`;\n  }\n\n  return querySql(sql);\n}\n\nfunction update(staffID, name, sex, entryDate, profile, vocation, age, picture) {\n  if (picture) {\n    const sql = `update staff set \n    name='${name}', sex='${sex}', entryDate='${entryDate}', profile='${profile}', vocation='${vocation}', age='${age}', picture='${picture}'\n    where staffID='${staffID}'`;\n    return querySql(sql);\n  } else {\n    const sql = `update staff set \n    name='${name}', sex='${sex}', entryDate='${entryDate}', profile='${profile}', vocation='${vocation}', age='${age}'\n    where staffID='${staffID}'`;\n    return querySql(sql);\n  }\n}\n\nfunction remove(staffID) {\n  const sql = `DELETE FROM staff WHERE staffID='${staffID}'`;\n  return querySql(sql);\n}\n\nfunction query(staffID) {\n  const sql = `select * from staff where staffID='${staffID}'`;\n  return querySql(sql);\n}\n\nmodule.exports = {\n  create,\n  list,\n  query,\n  update,\n  remove\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0YWZmLmpzIl0sIm5hbWVzIjpbInF1ZXJ5U3FsIiwicmVxdWlyZSIsImNyZWF0ZSIsInN0YWZmSUQiLCJuYW1lIiwic2V4IiwiZW50cnlEYXRlIiwicHJvZmlsZSIsInZvY2F0aW9uIiwiYWdlIiwicGljdHVyZSIsInNxbCIsImxpc3QiLCJ1cGRhdGUiLCJyZW1vdmUiLCJxdWVyeSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU07QUFBRUEsRUFBQUE7QUFBRixJQUFlQyxPQUFPLENBQUMsVUFBRCxDQUE1Qjs7QUFFQSxTQUFTQyxNQUFULENBQWdCQyxPQUFoQixFQUF5QkMsSUFBekIsRUFBK0JDLEdBQS9CLEVBQW9DQyxTQUFwQyxFQUErQ0MsT0FBL0MsRUFBd0RDLFFBQXhELEVBQWtFQyxHQUFsRSxFQUF1RUMsT0FBdkUsRUFBZ0Y7QUFDOUUsUUFBTUMsR0FBRyxHQUFJO1lBQ0hSLE9BQVEsTUFBS0MsSUFBSyxNQUFLQyxHQUFJLE1BQUtDLFNBQVUsTUFBS0MsT0FBUSxNQUFLQyxRQUFTLE1BQUtDLEdBQUksTUFBS0MsT0FBUSxJQURyRztBQUVBLFNBQU9WLFFBQVEsQ0FBQ1csR0FBRCxDQUFmO0FBQ0Q7O0FBRUQsU0FBU0MsSUFBVCxDQUFjVCxPQUFkLEVBQXVCO0FBQ3JCLE1BQUlRLEdBQUo7O0FBQ0EsTUFBSVIsT0FBSixFQUFhO0FBQ1hRLElBQUFBLEdBQUcsR0FBSSxzQ0FBcUNSLE9BQVEsR0FBcEQ7QUFDRCxHQUZELE1BRU87QUFDTFEsSUFBQUEsR0FBRyxHQUFJLHFCQUFQO0FBQ0Q7O0FBQ0QsU0FBT1gsUUFBUSxDQUFDVyxHQUFELENBQWY7QUFDRDs7QUFFRCxTQUFTRSxNQUFULENBQWdCVixPQUFoQixFQUF5QkMsSUFBekIsRUFBK0JDLEdBQS9CLEVBQW9DQyxTQUFwQyxFQUErQ0MsT0FBL0MsRUFBd0RDLFFBQXhELEVBQWtFQyxHQUFsRSxFQUF1RUMsT0FBdkUsRUFBZ0Y7QUFDOUUsTUFBSUEsT0FBSixFQUFhO0FBQ1gsVUFBTUMsR0FBRyxHQUFJO1lBQ0xQLElBQUssV0FBVUMsR0FBSSxpQkFBZ0JDLFNBQVUsZUFBY0MsT0FBUSxnQkFBZUMsUUFBUyxXQUFVQyxHQUFJLGVBQWNDLE9BQVE7cUJBQ3RIUCxPQUFRLEdBRnpCO0FBR0EsV0FBT0gsUUFBUSxDQUFDVyxHQUFELENBQWY7QUFDRCxHQUxELE1BTUs7QUFDSCxVQUFNQSxHQUFHLEdBQUk7WUFDTFAsSUFBSyxXQUFVQyxHQUFJLGlCQUFnQkMsU0FBVSxlQUFjQyxPQUFRLGdCQUFlQyxRQUFTLFdBQVVDLEdBQUk7cUJBQ2hHTixPQUFRLEdBRnpCO0FBR0EsV0FBT0gsUUFBUSxDQUFDVyxHQUFELENBQWY7QUFDRDtBQUNGOztBQUVELFNBQVNHLE1BQVQsQ0FBZ0JYLE9BQWhCLEVBQXlCO0FBQ3ZCLFFBQU1RLEdBQUcsR0FBSSxvQ0FBbUNSLE9BQVEsR0FBeEQ7QUFDQSxTQUFPSCxRQUFRLENBQUNXLEdBQUQsQ0FBZjtBQUNEOztBQUVELFNBQVNJLEtBQVQsQ0FBZVosT0FBZixFQUF1QjtBQUN2QixRQUFNUSxHQUFHLEdBQUksc0NBQXFDUixPQUFRLEdBQTFEO0FBQ0UsU0FBT0gsUUFBUSxDQUFDVyxHQUFELENBQWY7QUFDRDs7QUFDREssTUFBTSxDQUFDQyxPQUFQLEdBQWlCO0FBQ2ZmLEVBQUFBLE1BRGU7QUFFZlUsRUFBQUEsSUFGZTtBQUdmRyxFQUFBQSxLQUhlO0FBSWZGLEVBQUFBLE1BSmU7QUFLZkMsRUFBQUE7QUFMZSxDQUFqQiIsInNvdXJjZVJvb3QiOiJHOlxcUHJvamVjdFxcV2ViXFxnaXRcXGhvdXNlaG9sZC1zZXJ2aWNlLXNlcnZlclxcc3JjXFxzZXJ2aWNlXFwiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IHF1ZXJ5U3FsIH0gPSByZXF1aXJlKCcuLi9teXNxbCcpO1xuXG5mdW5jdGlvbiBjcmVhdGUoc3RhZmZJRCwgbmFtZSwgc2V4LCBlbnRyeURhdGUsIHByb2ZpbGUsIHZvY2F0aW9uLCBhZ2UsIHBpY3R1cmUpIHtcbiAgY29uc3Qgc3FsID0gYGluc2VydCBpbnRvIHN0YWZmKHN0YWZmSUQsbmFtZSxzZXgsZW50cnlEYXRlLHByb2ZpbGUsdm9jYXRpb24sYWdlLHBpY3R1cmUpIFxuICB2YWx1ZXMoJyR7c3RhZmZJRH0nLCcke25hbWV9JywnJHtzZXh9JywnJHtlbnRyeURhdGV9JywnJHtwcm9maWxlfScsJyR7dm9jYXRpb259JywnJHthZ2V9JywnJHtwaWN0dXJlfScpYFxuICByZXR1cm4gcXVlcnlTcWwoc3FsKVxufVxuXG5mdW5jdGlvbiBsaXN0KHN0YWZmSUQpIHtcbiAgbGV0IHNxbFxuICBpZiAoc3RhZmZJRCkge1xuICAgIHNxbCA9IGBzZWxlY3QgKiBmcm9tIHN0YWZmIHdoZXJlIHN0YWZmSUQ9JyR7c3RhZmZJRH0nYFxuICB9IGVsc2Uge1xuICAgIHNxbCA9IGBzZWxlY3QgKiBmcm9tIHN0YWZmYFxuICB9XG4gIHJldHVybiBxdWVyeVNxbChzcWwpXG59XG5cbmZ1bmN0aW9uIHVwZGF0ZShzdGFmZklELCBuYW1lLCBzZXgsIGVudHJ5RGF0ZSwgcHJvZmlsZSwgdm9jYXRpb24sIGFnZSwgcGljdHVyZSkge1xuICBpZiAocGljdHVyZSkge1xuICAgIGNvbnN0IHNxbCA9IGB1cGRhdGUgc3RhZmYgc2V0IFxuICAgIG5hbWU9JyR7bmFtZX0nLCBzZXg9JyR7c2V4fScsIGVudHJ5RGF0ZT0nJHtlbnRyeURhdGV9JywgcHJvZmlsZT0nJHtwcm9maWxlfScsIHZvY2F0aW9uPScke3ZvY2F0aW9ufScsIGFnZT0nJHthZ2V9JywgcGljdHVyZT0nJHtwaWN0dXJlfSdcbiAgICB3aGVyZSBzdGFmZklEPScke3N0YWZmSUR9J2BcbiAgICByZXR1cm4gcXVlcnlTcWwoc3FsKVxuICB9XG4gIGVsc2Uge1xuICAgIGNvbnN0IHNxbCA9IGB1cGRhdGUgc3RhZmYgc2V0IFxuICAgIG5hbWU9JyR7bmFtZX0nLCBzZXg9JyR7c2V4fScsIGVudHJ5RGF0ZT0nJHtlbnRyeURhdGV9JywgcHJvZmlsZT0nJHtwcm9maWxlfScsIHZvY2F0aW9uPScke3ZvY2F0aW9ufScsIGFnZT0nJHthZ2V9J1xuICAgIHdoZXJlIHN0YWZmSUQ9JyR7c3RhZmZJRH0nYFxuICAgIHJldHVybiBxdWVyeVNxbChzcWwpXG4gIH1cbn1cblxuZnVuY3Rpb24gcmVtb3ZlKHN0YWZmSUQpIHtcbiAgY29uc3Qgc3FsID0gYERFTEVURSBGUk9NIHN0YWZmIFdIRVJFIHN0YWZmSUQ9JyR7c3RhZmZJRH0nYFxuICByZXR1cm4gcXVlcnlTcWwoc3FsKVxufVxuXG5mdW5jdGlvbiBxdWVyeShzdGFmZklEKXtcbmNvbnN0IHNxbCA9IGBzZWxlY3QgKiBmcm9tIHN0YWZmIHdoZXJlIHN0YWZmSUQ9JyR7c3RhZmZJRH0nYFxuICByZXR1cm4gcXVlcnlTcWwoc3FsKVxufVxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNyZWF0ZSxcbiAgbGlzdCxcbiAgcXVlcnksXG4gIHVwZGF0ZSxcbiAgcmVtb3ZlXG59Il19",
    "map": {
      "version": 3,
      "sources": [
        "staff.js"
      ],
      "names": [
        "querySql",
        "require",
        "create",
        "staffID",
        "name",
        "sex",
        "entryDate",
        "profile",
        "vocation",
        "age",
        "picture",
        "sql",
        "list",
        "update",
        "remove",
        "query",
        "module",
        "exports"
      ],
      "mappings": "AAAA,MAAM;AAAEA,EAAAA;AAAF,IAAeC,OAAO,CAAC,UAAD,CAA5B;;AAEA,SAASC,MAAT,CAAgBC,OAAhB,EAAyBC,IAAzB,EAA+BC,GAA/B,EAAoCC,SAApC,EAA+CC,OAA/C,EAAwDC,QAAxD,EAAkEC,GAAlE,EAAuEC,OAAvE,EAAgF;AAC9E,QAAMC,GAAG,GAAI;YACHR,OAAQ,MAAKC,IAAK,MAAKC,GAAI,MAAKC,SAAU,MAAKC,OAAQ,MAAKC,QAAS,MAAKC,GAAI,MAAKC,OAAQ,IADrG;AAEA,SAAOV,QAAQ,CAACW,GAAD,CAAf;AACD;;AAED,SAASC,IAAT,CAAcT,OAAd,EAAuB;AACrB,MAAIQ,GAAJ;;AACA,MAAIR,OAAJ,EAAa;AACXQ,IAAAA,GAAG,GAAI,sCAAqCR,OAAQ,GAApD;AACD,GAFD,MAEO;AACLQ,IAAAA,GAAG,GAAI,qBAAP;AACD;;AACD,SAAOX,QAAQ,CAACW,GAAD,CAAf;AACD;;AAED,SAASE,MAAT,CAAgBV,OAAhB,EAAyBC,IAAzB,EAA+BC,GAA/B,EAAoCC,SAApC,EAA+CC,OAA/C,EAAwDC,QAAxD,EAAkEC,GAAlE,EAAuEC,OAAvE,EAAgF;AAC9E,MAAIA,OAAJ,EAAa;AACX,UAAMC,GAAG,GAAI;YACLP,IAAK,WAAUC,GAAI,iBAAgBC,SAAU,eAAcC,OAAQ,gBAAeC,QAAS,WAAUC,GAAI,eAAcC,OAAQ;qBACtHP,OAAQ,GAFzB;AAGA,WAAOH,QAAQ,CAACW,GAAD,CAAf;AACD,GALD,MAMK;AACH,UAAMA,GAAG,GAAI;YACLP,IAAK,WAAUC,GAAI,iBAAgBC,SAAU,eAAcC,OAAQ,gBAAeC,QAAS,WAAUC,GAAI;qBAChGN,OAAQ,GAFzB;AAGA,WAAOH,QAAQ,CAACW,GAAD,CAAf;AACD;AACF;;AAED,SAASG,MAAT,CAAgBX,OAAhB,EAAyB;AACvB,QAAMQ,GAAG,GAAI,oCAAmCR,OAAQ,GAAxD;AACA,SAAOH,QAAQ,CAACW,GAAD,CAAf;AACD;;AAED,SAASI,KAAT,CAAeZ,OAAf,EAAuB;AACvB,QAAMQ,GAAG,GAAI,sCAAqCR,OAAQ,GAA1D;AACE,SAAOH,QAAQ,CAACW,GAAD,CAAf;AACD;;AACDK,MAAM,CAACC,OAAP,GAAiB;AACff,EAAAA,MADe;AAEfU,EAAAA,IAFe;AAGfG,EAAAA,KAHe;AAIfF,EAAAA,MAJe;AAKfC,EAAAA;AALe,CAAjB",
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\",
      "sourcesContent": [
        "const { querySql } = require('../mysql');\n\nfunction create(staffID, name, sex, entryDate, profile, vocation, age, picture) {\n  const sql = `insert into staff(staffID,name,sex,entryDate,profile,vocation,age,picture) \n  values('${staffID}','${name}','${sex}','${entryDate}','${profile}','${vocation}','${age}','${picture}')`\n  return querySql(sql)\n}\n\nfunction list(staffID) {\n  let sql\n  if (staffID) {\n    sql = `select * from staff where staffID='${staffID}'`\n  } else {\n    sql = `select * from staff`\n  }\n  return querySql(sql)\n}\n\nfunction update(staffID, name, sex, entryDate, profile, vocation, age, picture) {\n  if (picture) {\n    const sql = `update staff set \n    name='${name}', sex='${sex}', entryDate='${entryDate}', profile='${profile}', vocation='${vocation}', age='${age}', picture='${picture}'\n    where staffID='${staffID}'`\n    return querySql(sql)\n  }\n  else {\n    const sql = `update staff set \n    name='${name}', sex='${sex}', entryDate='${entryDate}', profile='${profile}', vocation='${vocation}', age='${age}'\n    where staffID='${staffID}'`\n    return querySql(sql)\n  }\n}\n\nfunction remove(staffID) {\n  const sql = `DELETE FROM staff WHERE staffID='${staffID}'`\n  return querySql(sql)\n}\n\nfunction query(staffID){\nconst sql = `select * from staff where staffID='${staffID}'`\n  return querySql(sql)\n}\nmodule.exports = {\n  create,\n  list,\n  query,\n  update,\n  remove\n}"
      ]
    },
    "sourceType": "module",
    "mtime": 1587717689154
  },
  "{\"sourceRoot\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\router\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"filename\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\router\\\\upload.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"plugins\":[],\"presets\":[]}:7.9.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "G:\\Project\\Web\\git\\household-service-server",
      "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\upload.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "G:\\Project\\Web\\git\\household-service-server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\upload.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\upload.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\",
        "sourceFileName": "upload.js"
      }
    },
    "ast": null,
    "code": "const express = require('express');\n\nconst Result = require('../models/Result');\n\nconst {\n  UPLOAD_PATH\n} = require('../utils/constant');\n\nconst multer = require('multer');\n\nconst router = express.Router();\nvar storage = multer.diskStorage({\n  destination: function (req, file, cb) {\n    cb(null, `${UPLOAD_PATH}/avatar`);\n  },\n  filename: function (req, file, cb) {\n    const filename = Date.now() + '.' + file.mimetype.slice(6);\n    cb(null, filename);\n  }\n});\nrouter.post('/avatar', multer({\n  storage: storage\n}).single('file'), function (req, res) {\n  if (!req.file || req.file.length === 0) {\n    new Result('上传失败').fail(res);\n  } else {\n    new Result(req.file.filename, '上传成功').success(res);\n  }\n});\nrouter.post('/poster', multer({\n  storage: multer.diskStorage({\n    destination: function (req, file, cb) {\n      cb(null, `${UPLOAD_PATH}/poster`);\n    },\n    filename: function (req, file, cb) {\n      const filename = Date.now() + '.' + file.mimetype.slice(6);\n      cb(null, filename);\n    }\n  })\n}).single('file'), (req, res) => {\n  if (!req.file || req.file.length === 0) {\n    new Result('上传失败').fail(res);\n  } else {\n    new Result(req.file.filename, '上传成功').success(res);\n  }\n});\nrouter.post('/show', multer({\n  storage: multer.diskStorage({\n    destination: function (req, file, cb) {\n      cb(null, `${UPLOAD_PATH}/show`);\n    },\n    filename: function (req, file, cb) {\n      const filename = Date.now() + '.' + file.mimetype.slice(6);\n      cb(null, filename);\n    }\n  })\n}).single('file', 4), (req, res) => {\n  if (!req.file || req.file.length === 0) {\n    new Result('上传失败').fail(res);\n  } else {\n    new Result(req.file.filename, '上传成功').success(res);\n  }\n});\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVwbG9hZC5qcyJdLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsIlJlc3VsdCIsIlVQTE9BRF9QQVRIIiwibXVsdGVyIiwicm91dGVyIiwiUm91dGVyIiwic3RvcmFnZSIsImRpc2tTdG9yYWdlIiwiZGVzdGluYXRpb24iLCJyZXEiLCJmaWxlIiwiY2IiLCJmaWxlbmFtZSIsIkRhdGUiLCJub3ciLCJtaW1ldHlwZSIsInNsaWNlIiwicG9zdCIsInNpbmdsZSIsInJlcyIsImxlbmd0aCIsImZhaWwiLCJzdWNjZXNzIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBRCxDQUF2Qjs7QUFDQSxNQUFNQyxNQUFNLEdBQUdELE9BQU8sQ0FBQyxrQkFBRCxDQUF0Qjs7QUFDQSxNQUFNO0FBQUVFLEVBQUFBO0FBQUYsSUFBa0JGLE9BQU8sQ0FBQyxtQkFBRCxDQUEvQjs7QUFDQSxNQUFNRyxNQUFNLEdBQUdILE9BQU8sQ0FBQyxRQUFELENBQXRCOztBQUVBLE1BQU1JLE1BQU0sR0FBR0wsT0FBTyxDQUFDTSxNQUFSLEVBQWY7QUFFQSxJQUFJQyxPQUFPLEdBQUdILE1BQU0sQ0FBQ0ksV0FBUCxDQUFtQjtBQUMvQkMsRUFBQUEsV0FBVyxFQUFFLFVBQVVDLEdBQVYsRUFBZUMsSUFBZixFQUFxQkMsRUFBckIsRUFBeUI7QUFDcENBLElBQUFBLEVBQUUsQ0FBQyxJQUFELEVBQVEsR0FBRVQsV0FBWSxTQUF0QixDQUFGO0FBQ0QsR0FIOEI7QUFJL0JVLEVBQUFBLFFBQVEsRUFBRSxVQUFVSCxHQUFWLEVBQWVDLElBQWYsRUFBcUJDLEVBQXJCLEVBQXlCO0FBQ2pDLFVBQU1DLFFBQVEsR0FBR0MsSUFBSSxDQUFDQyxHQUFMLEtBQVcsR0FBWCxHQUFlSixJQUFJLENBQUNLLFFBQUwsQ0FBY0MsS0FBZCxDQUFvQixDQUFwQixDQUFoQztBQUNBTCxJQUFBQSxFQUFFLENBQUMsSUFBRCxFQUFPQyxR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LENBQVNVLE1BQVQsS0FBb0IsQ0FBckMsRUFBd0M7QUFDdEMsUUFBSW5CLE1BQUosQ0FBVyxNQUFYLEVBQW1Cb0IsSUFBbkIsQ0FBd0JGLEdBQXhCO0FBQ0QsR0FGRCxNQUdLO0FBQ0gsUUFBSWxCLE1BQUosQ0FBV1EsR0FBRyxDQUFDQyxJQUFKLENBQVNFLFFBQXBCLEVBQThCLE1BQTlCLEVBQXNDVSxPQUF0QyxDQUE4Q0gsR0FBOUM7QUFDRDtBQUNGLENBbkJIO0FBc0JBSSxNQUFNLENBQUNDLE9BQVAsR0FBaUJwQixNQUFqQiIsInNvdXJjZVJvb3QiOiJHOlxcUHJvamVjdFxcV2ViXFxnaXRcXGhvdXNlaG9sZC1zZXJ2aWNlLXNlcnZlclxcc3JjXFxyb3V0ZXJcXCIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJylcbmNvbnN0IFJlc3VsdCA9IHJlcXVpcmUoJy4uL21vZGVscy9SZXN1bHQnKVxuY29uc3QgeyBVUExPQURfUEFUSCB9ID0gcmVxdWlyZSgnLi4vdXRpbHMvY29uc3RhbnQnKVxuY29uc3QgbXVsdGVyID0gcmVxdWlyZSgnbXVsdGVyJylcblxuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKVxuXG52YXIgc3RvcmFnZSA9IG11bHRlci5kaXNrU3RvcmFnZSh7XG4gIGRlc3RpbmF0aW9uOiBmdW5jdGlvbiAocmVxLCBmaWxlLCBjYikge1xuICAgIGNiKG51bGwsIGAke1VQTE9BRF9QQVRIfS9hdmF0YXJgKVxuICB9LFxuICBmaWxlbmFtZTogZnVuY3Rpb24gKHJlcSwgZmlsZSwgY2IpIHtcbiAgICBjb25zdCBmaWxlbmFtZSA9IERhdGUubm93KCkrJy4nK2ZpbGUubWltZXR5cGUuc2xpY2UoNilcbiAgICBjYihudWxsLCBmaWxlbmFtZSlcbiAgfVxufSlcblxucm91dGVyLnBvc3QoJy9hdmF0YXInLFxuICBtdWx0ZXIoe1xuICAgIHN0b3JhZ2U6IHN0b3JhZ2VcbiAgfSkuc2luZ2xlKCdmaWxlJyksXG4gIGZ1bmN0aW9uIChyZXEsIHJlcykge1xuICAgIGlmICghcmVxLmZpbGUgfHwgcmVxLmZpbGUubGVuZ3RoID09PSAwKSB7XG4gICAgICBuZXcgUmVzdWx0KCfkuIrkvKDlpLHotKUnKS5mYWlsKHJlcylcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBuZXcgUmVzdWx0KHJlcS5maWxlLmZpbGVuYW1lLCfkuIrkvKDmiJDlip8nKS5zdWNjZXNzKHJlcylcbiAgICB9XG4gIH1cbilcblxucm91dGVyLnBvc3QoJy9wb3N0ZXInLFxuICBtdWx0ZXIoe1xuICAgIHN0b3JhZ2U6IG11bHRlci5kaXNrU3RvcmFnZSh7XG4gICAgICBkZXN0aW5hdGlvbjogZnVuY3Rpb24gKHJlcSwgZmlsZSwgY2IpIHtcbiAgICAgICAgY2IobnVsbCwgYCR7VVBMT0FEX1BBVEh9L3Bvc3RlcmApXG4gICAgICB9LFxuICAgICAgZmlsZW5hbWU6IGZ1bmN0aW9uIChyZXEsIGZpbGUsIGNiKSB7XG4gICAgICAgIGNvbnN0IGZpbGVuYW1lID0gRGF0ZS5ub3coKSArICcuJyArIGZpbGUubWltZXR5cGUuc2xpY2UoNilcbiAgICAgICAgY2IobnVsbCwgZmlsZW5hbWUpXG4gICAgICB9XG4gICAgfSlcbiAgfSkuc2luZ2xlKCdmaWxlJyksXG4gIChyZXEscmVzKT0+e1xuICAgIGlmICghcmVxLmZpbGUgfHwgcmVxLmZpbGUubGVuZ3RoID09PSAwKSB7XG4gICAgICBuZXcgUmVzdWx0KCfkuIrkvKDlpLHotKUnKS5mYWlsKHJlcylcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBuZXcgUmVzdWx0KHJlcS5maWxlLmZpbGVuYW1lLCAn5LiK5Lyg5oiQ5YqfJykuc3VjY2VzcyhyZXMpXG4gICAgfVxuICB9KVxuXG5yb3V0ZXIucG9zdCgnL3Nob3cnLFxuICBtdWx0ZXIoe1xuICAgIHN0b3JhZ2U6IG11bHRlci5kaXNrU3RvcmFnZSh7XG4gICAgICBkZXN0aW5hdGlvbjogZnVuY3Rpb24gKHJlcSwgZmlsZSwgY2IpIHtcbiAgICAgICAgY2IobnVsbCwgYCR7VVBMT0FEX1BBVEh9L3Nob3dgKVxuICAgICAgfSxcbiAgICAgIGZpbGVuYW1lOiBmdW5jdGlvbiAocmVxLCBmaWxlLCBjYikge1xuICAgICAgICBjb25zdCBmaWxlbmFtZSA9IERhdGUubm93KCkgKyAnLicgKyBmaWxlLm1pbWV0eXBlLnNsaWNlKDYpXG4gICAgICAgIGNiKG51bGwsIGZpbGVuYW1lKVxuICAgICAgfVxuICAgIH0pXG4gIH0pLnNpbmdsZSgnZmlsZScsNCksXG4gIChyZXEscmVzKT0+e1xuICAgIGlmICghcmVxLmZpbGUgfHwgcmVxLmZpbGUubGVuZ3RoID09PSAwKSB7XG4gICAgICBuZXcgUmVzdWx0KCfkuIrkvKDlpLHotKUnKS5mYWlsKHJlcylcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBuZXcgUmVzdWx0KHJlcS5maWxlLmZpbGVuYW1lLCAn5LiK5Lyg5oiQ5YqfJykuc3VjY2VzcyhyZXMpXG4gICAgfVxuICB9XG4pXG5cbm1vZHVsZS5leHBvcnRzID0gcm91dGVyXG5cbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "upload.js"
      ],
      "names": [
        "express",
        "require",
        "Result",
        "UPLOAD_PATH",
        "multer",
        "router",
        "Router",
        "storage",
        "diskStorage",
        "destination",
        "req",
        "file",
        "cb",
        "filename",
        "Date",
        "now",
        "mimetype",
        "slice",
        "post",
        "single",
        "res",
        "length",
        "fail",
        "success",
        "module",
        "exports"
      ],
      "mappings": "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",
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\",
      "sourcesContent": [
        "const express = require('express')\nconst Result = require('../models/Result')\nconst { UPLOAD_PATH } = require('../utils/constant')\nconst multer = require('multer')\n\nconst router = express.Router()\n\nvar storage = multer.diskStorage({\n  destination: function (req, file, cb) {\n    cb(null, `${UPLOAD_PATH}/avatar`)\n  },\n  filename: function (req, file, cb) {\n    const filename = Date.now()+'.'+file.mimetype.slice(6)\n    cb(null, filename)\n  }\n})\n\nrouter.post('/avatar',\n  multer({\n    storage: storage\n  }).single('file'),\n  function (req, res) {\n    if (!req.file || req.file.length === 0) {\n      new Result('上传失败').fail(res)\n    }\n    else {\n      new Result(req.file.filename,'上传成功').success(res)\n    }\n  }\n)\n\nrouter.post('/poster',\n  multer({\n    storage: multer.diskStorage({\n      destination: function (req, file, cb) {\n        cb(null, `${UPLOAD_PATH}/poster`)\n      },\n      filename: function (req, file, cb) {\n        const filename = Date.now() + '.' + file.mimetype.slice(6)\n        cb(null, filename)\n      }\n    })\n  }).single('file'),\n  (req,res)=>{\n    if (!req.file || req.file.length === 0) {\n      new Result('上传失败').fail(res)\n    }\n    else {\n      new Result(req.file.filename, '上传成功').success(res)\n    }\n  })\n\nrouter.post('/show',\n  multer({\n    storage: multer.diskStorage({\n      destination: function (req, file, cb) {\n        cb(null, `${UPLOAD_PATH}/show`)\n      },\n      filename: function (req, file, cb) {\n        const filename = Date.now() + '.' + file.mimetype.slice(6)\n        cb(null, filename)\n      }\n    })\n  }).single('file',4),\n  (req,res)=>{\n    if (!req.file || req.file.length === 0) {\n      new Result('上传失败').fail(res)\n    }\n    else {\n      new Result(req.file.filename, '上传成功').success(res)\n    }\n  }\n)\n\nmodule.exports = router\n\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1588079916563
  },
  "{\"sourceRoot\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\router\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"filename\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\router\\\\class.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"plugins\":[],\"presets\":[]}:7.9.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "G:\\Project\\Web\\git\\household-service-server",
      "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\class.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "G:\\Project\\Web\\git\\household-service-server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\class.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\class.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\",
        "sourceFileName": "class.js"
      }
    },
    "ast": null,
    "code": "const Result = require('../models/Result');\n\nconst express = require('express');\n\nconst {\n  list\n} = require('../service/class');\n\nconst router = express.Router();\nrouter.get('/list', (req, res) => {\n  list().then(result => {\n    if (result) {\n      new Result(result, '查询成功').success(res);\n    } else new Result('查询失败').fail(res);\n  });\n});\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNsYXNzLmpzIl0sIm5hbWVzIjpbIlJlc3VsdCIsInJlcXVpcmUiLCJleHByZXNzIiwibGlzdCIsInJvdXRlciIsIlJvdXRlciIsImdldCIsInJlcSIsInJlcyIsInRoZW4iLCJyZXN1bHQiLCJzdWNjZXNzIiwiZmFpbCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLE1BQU0sR0FBR0MsT0FBTyxDQUFDLGtCQUFELENBQXRCOztBQUNBLE1BQU1DLE9BQU8sR0FBR0QsT0FBTyxDQUFDLFNBQUQsQ0FBdkI7O0FBQ0EsTUFBTTtBQUFFRSxFQUFBQTtBQUFGLElBQVdGLE9BQU8sQ0FBQyxrQkFBRCxDQUF4Qjs7QUFFQSxNQUFNRyxNQUFNLEdBQUdGLE9BQU8sQ0FBQ0csTUFBUixFQUFmO0FBRUFELE1BQU0sQ0FBQ0UsR0FBUCxDQUFXLE9BQVgsRUFBb0IsQ0FBQ0MsR0FBRCxFQUFNQyxHQUFOLEtBQWM7QUFDaENMLEVBQUFBLElBQUksR0FBR00sSUFBUCxDQUFZQyxNQUFNLElBQUk7QUFDcEIsUUFBSUEsTUFBSixFQUFZO0FBQ1YsVUFBSVYsTUFBSixDQUFXVSxNQUFYLEVBQWtCLE1BQWxCLEVBQTBCQyxPQUExQixDQUFrQ0gsR0FBbEM7QUFDRCxLQUZELE1BSUUsSUFBSVIsTUFBSixDQUFXLE1BQVgsRUFBbUJZLElBQW5CLENBQXdCSixHQUF4QjtBQUVILEdBUEQ7QUFRRCxDQVREO0FBV0FLLE1BQU0sQ0FBQ0MsT0FBUCxHQUFlVixNQUFmIiwic291cmNlUm9vdCI6Ikc6XFxQcm9qZWN0XFxXZWJcXGdpdFxcaG91c2Vob2xkLXNlcnZpY2Utc2VydmVyXFxzcmNcXHJvdXRlclxcIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgUmVzdWx0ID0gcmVxdWlyZSgnLi4vbW9kZWxzL1Jlc3VsdCcpXG5jb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpXG5jb25zdCB7IGxpc3QgfSA9IHJlcXVpcmUoJy4uL3NlcnZpY2UvY2xhc3MnKVxuXG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpXG5cbnJvdXRlci5nZXQoJy9saXN0JywgKHJlcSwgcmVzKSA9PiB7XG4gIGxpc3QoKS50aGVuKHJlc3VsdCA9PiB7XG4gICAgaWYgKHJlc3VsdCkge1xuICAgICAgbmV3IFJlc3VsdChyZXN1bHQsJ+afpeivouaIkOWKnycpLnN1Y2Nlc3MocmVzKVxuICAgIH1cbiAgICBlbHNlXG4gICAgICBuZXcgUmVzdWx0KCfmn6Xor6LlpLHotKUnKS5mYWlsKHJlcylcblxuICB9KVxufSlcblxubW9kdWxlLmV4cG9ydHM9cm91dGVyIl19",
    "map": {
      "version": 3,
      "sources": [
        "class.js"
      ],
      "names": [
        "Result",
        "require",
        "express",
        "list",
        "router",
        "Router",
        "get",
        "req",
        "res",
        "then",
        "result",
        "success",
        "fail",
        "module",
        "exports"
      ],
      "mappings": "AAAA,MAAMA,MAAM,GAAGC,OAAO,CAAC,kBAAD,CAAtB;;AACA,MAAMC,OAAO,GAAGD,OAAO,CAAC,SAAD,CAAvB;;AACA,MAAM;AAAEE,EAAAA;AAAF,IAAWF,OAAO,CAAC,kBAAD,CAAxB;;AAEA,MAAMG,MAAM,GAAGF,OAAO,CAACG,MAAR,EAAf;AAEAD,MAAM,CAACE,GAAP,CAAW,OAAX,EAAoB,CAACC,GAAD,EAAMC,GAAN,KAAc;AAChCL,EAAAA,IAAI,GAAGM,IAAP,CAAYC,MAAM,IAAI;AACpB,QAAIA,MAAJ,EAAY;AACV,UAAIV,MAAJ,CAAWU,MAAX,EAAkB,MAAlB,EAA0BC,OAA1B,CAAkCH,GAAlC;AACD,KAFD,MAIE,IAAIR,MAAJ,CAAW,MAAX,EAAmBY,IAAnB,CAAwBJ,GAAxB;AAEH,GAPD;AAQD,CATD;AAWAK,MAAM,CAACC,OAAP,GAAeV,MAAf",
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\",
      "sourcesContent": [
        "const Result = require('../models/Result')\nconst express = require('express')\nconst { list } = require('../service/class')\n\nconst router = express.Router()\n\nrouter.get('/list', (req, res) => {\n  list().then(result => {\n    if (result) {\n      new Result(result,'查询成功').success(res)\n    }\n    else\n      new Result('查询失败').fail(res)\n\n  })\n})\n\nmodule.exports=router"
      ]
    },
    "sourceType": "module",
    "mtime": 1587439275005
  },
  "{\"sourceRoot\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\service\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"filename\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\service\\\\class.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"plugins\":[],\"presets\":[]}:7.9.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "G:\\Project\\Web\\git\\household-service-server",
      "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\class.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "G:\\Project\\Web\\git\\household-service-server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\class.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\class.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\",
        "sourceFileName": "class.js"
      }
    },
    "ast": null,
    "code": "const {\n  querySql\n} = require('../mysql');\n\nfunction list() {\n  const sql = 'select * from class';\n  return querySql(sql);\n}\n\nmodule.exports = {\n  list\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNsYXNzLmpzIl0sIm5hbWVzIjpbInF1ZXJ5U3FsIiwicmVxdWlyZSIsImxpc3QiLCJzcWwiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNO0FBQUVBLEVBQUFBO0FBQUYsSUFBZUMsT0FBTyxDQUFDLFVBQUQsQ0FBNUI7O0FBRUEsU0FBU0MsSUFBVCxHQUFnQjtBQUNkLFFBQU1DLEdBQUcsR0FBRyxxQkFBWjtBQUNBLFNBQU9ILFFBQVEsQ0FBQ0csR0FBRCxDQUFmO0FBQ0Q7O0FBRURDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFlO0FBQ2JILEVBQUFBO0FBRGEsQ0FBZiIsInNvdXJjZVJvb3QiOiJHOlxcUHJvamVjdFxcV2ViXFxnaXRcXGhvdXNlaG9sZC1zZXJ2aWNlLXNlcnZlclxcc3JjXFxzZXJ2aWNlXFwiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IHF1ZXJ5U3FsIH0gPSByZXF1aXJlKCcuLi9teXNxbCcpO1xuXG5mdW5jdGlvbiBsaXN0KCkge1xuICBjb25zdCBzcWwgPSAnc2VsZWN0ICogZnJvbSBjbGFzcydcbiAgcmV0dXJuIHF1ZXJ5U3FsKHNxbClcbn1cblxubW9kdWxlLmV4cG9ydHM9e1xuICBsaXN0XG59Il19",
    "map": {
      "version": 3,
      "sources": [
        "class.js"
      ],
      "names": [
        "querySql",
        "require",
        "list",
        "sql",
        "module",
        "exports"
      ],
      "mappings": "AAAA,MAAM;AAAEA,EAAAA;AAAF,IAAeC,OAAO,CAAC,UAAD,CAA5B;;AAEA,SAASC,IAAT,GAAgB;AACd,QAAMC,GAAG,GAAG,qBAAZ;AACA,SAAOH,QAAQ,CAACG,GAAD,CAAf;AACD;;AAEDC,MAAM,CAACC,OAAP,GAAe;AACbH,EAAAA;AADa,CAAf",
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\",
      "sourcesContent": [
        "const { querySql } = require('../mysql');\n\nfunction list() {\n  const sql = 'select * from class'\n  return querySql(sql)\n}\n\nmodule.exports={\n  list\n}"
      ]
    },
    "sourceType": "module",
    "mtime": 1587438817627
  },
  "{\"sourceRoot\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\router\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"filename\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\router\\\\order.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"plugins\":[],\"presets\":[]}:7.9.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "G:\\Project\\Web\\git\\household-service-server",
      "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\order.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "G:\\Project\\Web\\git\\household-service-server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\order.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\order.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\",
        "sourceFileName": "order.js"
      }
    },
    "ast": null,
    "code": "const express = require('express');\n\nconst Result = require('../models/Result');\n\nconst {\n  query,\n  list,\n  update,\n  order\n} = require('../service/order');\n\nconst {\n  increase\n} = require('../utils/auto-increase');\n\nconst router = express.Router();\nrouter.get('/list', (req, res) => {\n  list().then(result => {\n    if (result) {\n      new Result(result, '查询成功').success(res);\n    } else {\n      new Result('查询失败').fail(res);\n    }\n  });\n});\nrouter.post('/order', (req, res) => {\n  const {\n    commodityID,\n    openid\n  } = req.body;\n  order(commodityID, openid).then(result => {\n    if (result) {\n      new Result(result, '查询成功').success(res);\n    } else {\n      new Result('查询失败').fail(res);\n    }\n  });\n});\nrouter.post('/query', (req, res) => {\n  query(req.body.id).then(result => {\n    if (result) {\n      new Result(result, '查询成功').success(res);\n    } else {\n      new Result('查询失败').fail(res);\n    }\n  });\n});\nrouter.post('/update', (req, res) => {\n  update(req.body.id, req.body.status).then(result => {\n    if (result) {\n      new Result('修改成功').success(res);\n    } else {\n      new Result('修改失败').fail(res);\n    }\n  });\n});\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yZGVyLmpzIl0sIm5hbWVzIjpbImV4cHJlc3MiLCJyZXF1aXJlIiwiUmVzdWx0IiwicXVlcnkiLCJsaXN0IiwidXBkYXRlIiwib3JkZXIiLCJpbmNyZWFzZSIsInJvdXRlciIsIlJvdXRlciIsImdldCIsInJlcSIsInJlcyIsInRoZW4iLCJyZXN1bHQiLCJzdWNjZXNzIiwiZmFpbCIsInBvc3QiLCJjb21tb2RpdHlJRCIsIm9wZW5pZCIsImJvZHkiLCJpZCIsInN0YXR1cyIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQUQsQ0FBdkI7O0FBQ0EsTUFBTUMsTUFBTSxHQUFHRCxPQUFPLENBQUMsa0JBQUQsQ0FBdEI7O0FBQ0EsTUFBTTtBQUFFRSxFQUFBQSxLQUFGO0FBQVNDLEVBQUFBLElBQVQ7QUFBZUMsRUFBQUEsTUFBZjtBQUF1QkMsRUFBQUE7QUFBdkIsSUFBaUNMLE9BQU8sQ0FBQyxrQkFBRCxDQUE5Qzs7QUFDQSxNQUFNO0FBQUVNLEVBQUFBO0FBQUYsSUFBZU4sT0FBTyxDQUFDLHdCQUFELENBQTVCOztBQUVBLE1BQU1PLE1BQU0sR0FBR1IsT0FBTyxDQUFDUyxNQUFSLEVBQWY7QUFFQUQsTUFBTSxDQUFDRSxHQUFQLENBQVcsT0FBWCxFQUFvQixDQUFDQyxHQUFELEVBQU1DLEdBQU4sS0FBYztBQUNoQ1IsRUFBQUEsSUFBSSxHQUFHUyxJQUFQLENBQVlDLE1BQU0sSUFBSTtBQUNwQixRQUFJQSxNQUFKLEVBQVk7QUFDVixVQUFJWixNQUFKLENBQVdZLE1BQVgsRUFBbUIsTUFBbkIsRUFBMkJDLE9BQTNCLENBQW1DSCxHQUFuQztBQUNELEtBRkQsTUFFTztBQUNMLFVBQUlWLE1BQUosQ0FBVyxNQUFYLEVBQW1CYyxJQUFuQixDQUF3QkosR0FBeEI7QUFDRDtBQUNGLEdBTkQ7QUFPRCxDQVJEO0FBVUFKLE1BQU0sQ0FBQ1MsSUFBUCxDQUFZLFFBQVosRUFBc0IsQ0FBQ04sR0FBRCxFQUFNQyxHQUFOLEtBQWM7QUFDbEMsUUFBTTtBQUFFTSxJQUFBQSxXQUFGO0FBQWVDLElBQUFBO0FBQWYsTUFBMEJSLEdBQUcsQ0FBQ1MsSUFBcEM7QUFDQWQsRUFBQUEsS0FBSyxDQUFDWSxXQUFELEVBQWNDLE1BQWQsQ0FBTCxDQUEyQk4sSUFBM0IsQ0FBZ0NDLE1BQU0sSUFBSTtBQUN4QyxRQUFJQSxNQUFKLEVBQVk7QUFDVixVQUFJWixNQUFKLENBQVdZLE1BQVgsRUFBbUIsTUFBbkIsRUFBMkJDLE9BQTNCLENBQW1DSCxHQUFuQztBQUNELEtBRkQsTUFFTztBQUNMLFVBQUlWLE1BQUosQ0FBVyxNQUFYLEVBQW1CYyxJQUFuQixDQUF3QkosR0FBeEI7QUFDRDtBQUNGLEdBTkQ7QUFPRCxDQVREO0FBV0FKLE1BQU0sQ0FBQ1MsSUFBUCxDQUFZLFFBQVosRUFBc0IsQ0FBQ04sR0FBRCxFQUFNQyxHQUFOLEtBQWM7QUFDbENULEVBQUFBLEtBQUssQ0FBQ1EsR0FBRyxDQUFDUyxJQUFKLENBQVNDLEVBQVYsQ0FBTCxDQUFtQlIsSUFBbkIsQ0FBd0JDLE1BQU0sSUFBSTtBQUNoQyxRQUFJQSxNQUFKLEVBQVk7QUFDVixVQUFJWixNQUFKLENBQVdZLE1BQVgsRUFBbUIsTUFBbkIsRUFBMkJDLE9BQTNCLENBQW1DSCxHQUFuQztBQUNELEtBRkQsTUFFTztBQUNMLFVBQUlWLE1BQUosQ0FBVyxNQUFYLEVBQW1CYyxJQUFuQixDQUF3QkosR0FBeEI7QUFDRDtBQUNGLEdBTkQ7QUFPRCxDQVJEO0FBVUFKLE1BQU0sQ0FBQ1MsSUFBUCxDQUFZLFNBQVosRUFBdUIsQ0FBQ04sR0FBRCxFQUFNQyxHQUFOLEtBQWM7QUFDbkNQLEVBQUFBLE1BQU0sQ0FBQ00sR0FBRyxDQUFDUyxJQUFKLENBQVNDLEVBQVYsRUFBY1YsR0FBRyxDQUFDUyxJQUFKLENBQVNFLE1BQXZCLENBQU4sQ0FBcUNULElBQXJDLENBQTBDQyxNQUFNLElBQUk7QUFDbEQsUUFBSUEsTUFBSixFQUFZO0FBQ1YsVUFBSVosTUFBSixDQUFXLE1BQVgsRUFBbUJhLE9BQW5CLENBQTJCSCxHQUEzQjtBQUNELEtBRkQsTUFFTztBQUNMLFVBQUlWLE1BQUosQ0FBVyxNQUFYLEVBQW1CYyxJQUFuQixDQUF3QkosR0FBeEI7QUFDRDtBQUNGLEdBTkQ7QUFPRCxDQVJEO0FBVUFXLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQmhCLE1BQWpCIiwic291cmNlUm9vdCI6Ikc6XFxQcm9qZWN0XFxXZWJcXGdpdFxcaG91c2Vob2xkLXNlcnZpY2Utc2VydmVyXFxzcmNcXHJvdXRlclxcIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKVxuY29uc3QgUmVzdWx0ID0gcmVxdWlyZSgnLi4vbW9kZWxzL1Jlc3VsdCcpXG5jb25zdCB7IHF1ZXJ5LCBsaXN0LCB1cGRhdGUsIG9yZGVyIH0gPSByZXF1aXJlKCcuLi9zZXJ2aWNlL29yZGVyJylcbmNvbnN0IHsgaW5jcmVhc2UgfSA9IHJlcXVpcmUoJy4uL3V0aWxzL2F1dG8taW5jcmVhc2UnKVxuXG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpXG5cbnJvdXRlci5nZXQoJy9saXN0JywgKHJlcSwgcmVzKSA9PiB7XG4gIGxpc3QoKS50aGVuKHJlc3VsdCA9PiB7XG4gICAgaWYgKHJlc3VsdCkge1xuICAgICAgbmV3IFJlc3VsdChyZXN1bHQsICfmn6Xor6LmiJDlip8nKS5zdWNjZXNzKHJlcylcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3IFJlc3VsdCgn5p+l6K+i5aSx6LSlJykuZmFpbChyZXMpXG4gICAgfVxuICB9KVxufSlcblxucm91dGVyLnBvc3QoJy9vcmRlcicsIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCB7IGNvbW1vZGl0eUlELCBvcGVuaWQgfSA9IHJlcS5ib2R5XG4gIG9yZGVyKGNvbW1vZGl0eUlELCBvcGVuaWQpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICBpZiAocmVzdWx0KSB7XG4gICAgICBuZXcgUmVzdWx0KHJlc3VsdCwgJ+afpeivouaIkOWKnycpLnN1Y2Nlc3MocmVzKVxuICAgIH0gZWxzZSB7XG4gICAgICBuZXcgUmVzdWx0KCfmn6Xor6LlpLHotKUnKS5mYWlsKHJlcylcbiAgICB9XG4gIH0pXG59KVxuXG5yb3V0ZXIucG9zdCgnL3F1ZXJ5JywgKHJlcSwgcmVzKSA9PiB7XG4gIHF1ZXJ5KHJlcS5ib2R5LmlkKS50aGVuKHJlc3VsdCA9PiB7XG4gICAgaWYgKHJlc3VsdCkge1xuICAgICAgbmV3IFJlc3VsdChyZXN1bHQsICfmn6Xor6LmiJDlip8nKS5zdWNjZXNzKHJlcylcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3IFJlc3VsdCgn5p+l6K+i5aSx6LSlJykuZmFpbChyZXMpXG4gICAgfVxuICB9KVxufSlcblxucm91dGVyLnBvc3QoJy91cGRhdGUnLCAocmVxLCByZXMpID0+IHtcbiAgdXBkYXRlKHJlcS5ib2R5LmlkLCByZXEuYm9keS5zdGF0dXMpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICBpZiAocmVzdWx0KSB7XG4gICAgICBuZXcgUmVzdWx0KCfkv67mlLnmiJDlip8nKS5zdWNjZXNzKHJlcylcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3IFJlc3VsdCgn5L+u5pS55aSx6LSlJykuZmFpbChyZXMpXG4gICAgfVxuICB9KVxufSlcblxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXIiXX0=",
    "map": {
      "version": 3,
      "sources": [
        "order.js"
      ],
      "names": [
        "express",
        "require",
        "Result",
        "query",
        "list",
        "update",
        "order",
        "increase",
        "router",
        "Router",
        "get",
        "req",
        "res",
        "then",
        "result",
        "success",
        "fail",
        "post",
        "commodityID",
        "openid",
        "body",
        "id",
        "status",
        "module",
        "exports"
      ],
      "mappings": "AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AACA,MAAMC,MAAM,GAAGD,OAAO,CAAC,kBAAD,CAAtB;;AACA,MAAM;AAAEE,EAAAA,KAAF;AAASC,EAAAA,IAAT;AAAeC,EAAAA,MAAf;AAAuBC,EAAAA;AAAvB,IAAiCL,OAAO,CAAC,kBAAD,CAA9C;;AACA,MAAM;AAAEM,EAAAA;AAAF,IAAeN,OAAO,CAAC,wBAAD,CAA5B;;AAEA,MAAMO,MAAM,GAAGR,OAAO,CAACS,MAAR,EAAf;AAEAD,MAAM,CAACE,GAAP,CAAW,OAAX,EAAoB,CAACC,GAAD,EAAMC,GAAN,KAAc;AAChCR,EAAAA,IAAI,GAAGS,IAAP,CAAYC,MAAM,IAAI;AACpB,QAAIA,MAAJ,EAAY;AACV,UAAIZ,MAAJ,CAAWY,MAAX,EAAmB,MAAnB,EAA2BC,OAA3B,CAAmCH,GAAnC;AACD,KAFD,MAEO;AACL,UAAIV,MAAJ,CAAW,MAAX,EAAmBc,IAAnB,CAAwBJ,GAAxB;AACD;AACF,GAND;AAOD,CARD;AAUAJ,MAAM,CAACS,IAAP,CAAY,QAAZ,EAAsB,CAACN,GAAD,EAAMC,GAAN,KAAc;AAClC,QAAM;AAAEM,IAAAA,WAAF;AAAeC,IAAAA;AAAf,MAA0BR,GAAG,CAACS,IAApC;AACAd,EAAAA,KAAK,CAACY,WAAD,EAAcC,MAAd,CAAL,CAA2BN,IAA3B,CAAgCC,MAAM,IAAI;AACxC,QAAIA,MAAJ,EAAY;AACV,UAAIZ,MAAJ,CAAWY,MAAX,EAAmB,MAAnB,EAA2BC,OAA3B,CAAmCH,GAAnC;AACD,KAFD,MAEO;AACL,UAAIV,MAAJ,CAAW,MAAX,EAAmBc,IAAnB,CAAwBJ,GAAxB;AACD;AACF,GAND;AAOD,CATD;AAWAJ,MAAM,CAACS,IAAP,CAAY,QAAZ,EAAsB,CAACN,GAAD,EAAMC,GAAN,KAAc;AAClCT,EAAAA,KAAK,CAACQ,GAAG,CAACS,IAAJ,CAASC,EAAV,CAAL,CAAmBR,IAAnB,CAAwBC,MAAM,IAAI;AAChC,QAAIA,MAAJ,EAAY;AACV,UAAIZ,MAAJ,CAAWY,MAAX,EAAmB,MAAnB,EAA2BC,OAA3B,CAAmCH,GAAnC;AACD,KAFD,MAEO;AACL,UAAIV,MAAJ,CAAW,MAAX,EAAmBc,IAAnB,CAAwBJ,GAAxB;AACD;AACF,GAND;AAOD,CARD;AAUAJ,MAAM,CAACS,IAAP,CAAY,SAAZ,EAAuB,CAACN,GAAD,EAAMC,GAAN,KAAc;AACnCP,EAAAA,MAAM,CAACM,GAAG,CAACS,IAAJ,CAASC,EAAV,EAAcV,GAAG,CAACS,IAAJ,CAASE,MAAvB,CAAN,CAAqCT,IAArC,CAA0CC,MAAM,IAAI;AAClD,QAAIA,MAAJ,EAAY;AACV,UAAIZ,MAAJ,CAAW,MAAX,EAAmBa,OAAnB,CAA2BH,GAA3B;AACD,KAFD,MAEO;AACL,UAAIV,MAAJ,CAAW,MAAX,EAAmBc,IAAnB,CAAwBJ,GAAxB;AACD;AACF,GAND;AAOD,CARD;AAUAW,MAAM,CAACC,OAAP,GAAiBhB,MAAjB",
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\",
      "sourcesContent": [
        "const express = require('express')\nconst Result = require('../models/Result')\nconst { query, list, update, order } = require('../service/order')\nconst { increase } = require('../utils/auto-increase')\n\nconst router = express.Router()\n\nrouter.get('/list', (req, res) => {\n  list().then(result => {\n    if (result) {\n      new Result(result, '查询成功').success(res)\n    } else {\n      new Result('查询失败').fail(res)\n    }\n  })\n})\n\nrouter.post('/order', (req, res) => {\n  const { commodityID, openid } = req.body\n  order(commodityID, openid).then(result => {\n    if (result) {\n      new Result(result, '查询成功').success(res)\n    } else {\n      new Result('查询失败').fail(res)\n    }\n  })\n})\n\nrouter.post('/query', (req, res) => {\n  query(req.body.id).then(result => {\n    if (result) {\n      new Result(result, '查询成功').success(res)\n    } else {\n      new Result('查询失败').fail(res)\n    }\n  })\n})\n\nrouter.post('/update', (req, res) => {\n  update(req.body.id, req.body.status).then(result => {\n    if (result) {\n      new Result('修改成功').success(res)\n    } else {\n      new Result('修改失败').fail(res)\n    }\n  })\n})\n\nmodule.exports = router"
      ]
    },
    "sourceType": "module",
    "mtime": 1588827995435
  },
  "{\"sourceRoot\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\service\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"filename\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\service\\\\order.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"plugins\":[],\"presets\":[]}:7.9.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "G:\\Project\\Web\\git\\household-service-server",
      "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\order.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "G:\\Project\\Web\\git\\household-service-server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\order.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\order.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\",
        "sourceFileName": "order.js"
      }
    },
    "ast": null,
    "code": "const {\n  querySql\n} = require('../mysql');\n\nfunction list() {\n  const sql = `\n  SELECT\n\t*\n  FROM\n\t\\`order\\`\n  `;\n  return querySql(sql);\n}\n\nfunction update(id, status) {\n  const sql = `update \\`order\\` set status='${status}' where orderID='${id}'`;\n  return querySql(sql);\n}\n\nfunction query(id) {\n  const sql = `select * from \\`order\\` where customerID='${id}'`;\n  return querySql(sql);\n}\n\nfunction order(commodityID, openid) {\n  const sql = `select *,commodity.name as commodityName from commodity,customer\n              WHERE\n              commodityID='${commodityID}'\n              AND\n              customerID='${openid}'`;\n  return querySql(sql);\n}\n\nmodule.exports = {\n  list,\n  update,\n  query,\n  order\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yZGVyLmpzIl0sIm5hbWVzIjpbInF1ZXJ5U3FsIiwicmVxdWlyZSIsImxpc3QiLCJzcWwiLCJ1cGRhdGUiLCJpZCIsInN0YXR1cyIsInF1ZXJ5Iiwib3JkZXIiLCJjb21tb2RpdHlJRCIsIm9wZW5pZCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU07QUFBRUEsRUFBQUE7QUFBRixJQUFlQyxPQUFPLENBQUMsVUFBRCxDQUE1Qjs7QUFFQSxTQUFTQyxJQUFULEdBQWdCO0FBQ2QsUUFBTUMsR0FBRyxHQUFJOzs7OztHQUFiO0FBTUEsU0FBT0gsUUFBUSxDQUFDRyxHQUFELENBQWY7QUFDRDs7QUFFRCxTQUFTQyxNQUFULENBQWdCQyxFQUFoQixFQUFtQkMsTUFBbkIsRUFBMkI7QUFDekIsUUFBTUgsR0FBRyxHQUFJLGdDQUErQkcsTUFBTyxvQkFBbUJELEVBQUcsR0FBekU7QUFDQSxTQUFPTCxRQUFRLENBQUNHLEdBQUQsQ0FBZjtBQUNEOztBQUVELFNBQVNJLEtBQVQsQ0FBZUYsRUFBZixFQUFtQjtBQUNqQixRQUFNRixHQUFHLEdBQUksNkNBQTRDRSxFQUFHLEdBQTVEO0FBQ0EsU0FBT0wsUUFBUSxDQUFDRyxHQUFELENBQWY7QUFDRDs7QUFFRCxTQUFTSyxLQUFULENBQWVDLFdBQWYsRUFBMkJDLE1BQTNCLEVBQW1DO0FBQ2pDLFFBQU1QLEdBQUcsR0FBSTs7NkJBRWNNLFdBQVk7OzRCQUViQyxNQUFPLEdBSmpDO0FBS0EsU0FBT1YsUUFBUSxDQUFDRyxHQUFELENBQWY7QUFDRDs7QUFFRFEsTUFBTSxDQUFDQyxPQUFQLEdBQWlCO0FBQ2ZWLEVBQUFBLElBRGU7QUFDVEUsRUFBQUEsTUFEUztBQUNERyxFQUFBQSxLQURDO0FBQ01DLEVBQUFBO0FBRE4sQ0FBakIiLCJzb3VyY2VSb290IjoiRzpcXFByb2plY3RcXFdlYlxcZ2l0XFxob3VzZWhvbGQtc2VydmljZS1zZXJ2ZXJcXHNyY1xcc2VydmljZVxcIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBxdWVyeVNxbCB9ID0gcmVxdWlyZSgnLi4vbXlzcWwnKTtcblxuZnVuY3Rpb24gbGlzdCgpIHtcbiAgY29uc3Qgc3FsID0gYFxuICBTRUxFQ1Rcblx0KlxuICBGUk9NXG5cdFxcYG9yZGVyXFxgXG4gIGBcbiAgcmV0dXJuIHF1ZXJ5U3FsKHNxbClcbn1cblxuZnVuY3Rpb24gdXBkYXRlKGlkLHN0YXR1cykge1xuICBjb25zdCBzcWwgPSBgdXBkYXRlIFxcYG9yZGVyXFxgIHNldCBzdGF0dXM9JyR7c3RhdHVzfScgd2hlcmUgb3JkZXJJRD0nJHtpZH0nYFxuICByZXR1cm4gcXVlcnlTcWwoc3FsKVxufVxuXG5mdW5jdGlvbiBxdWVyeShpZCkge1xuICBjb25zdCBzcWwgPSBgc2VsZWN0ICogZnJvbSBcXGBvcmRlclxcYCB3aGVyZSBjdXN0b21lcklEPScke2lkfSdgXG4gIHJldHVybiBxdWVyeVNxbChzcWwpXG59XG5cbmZ1bmN0aW9uIG9yZGVyKGNvbW1vZGl0eUlELG9wZW5pZCkge1xuICBjb25zdCBzcWwgPSBgc2VsZWN0ICosY29tbW9kaXR5Lm5hbWUgYXMgY29tbW9kaXR5TmFtZSBmcm9tIGNvbW1vZGl0eSxjdXN0b21lclxuICAgICAgICAgICAgICBXSEVSRVxuICAgICAgICAgICAgICBjb21tb2RpdHlJRD0nJHtjb21tb2RpdHlJRH0nXG4gICAgICAgICAgICAgIEFORFxuICAgICAgICAgICAgICBjdXN0b21lcklEPScke29wZW5pZH0nYFxuICByZXR1cm4gcXVlcnlTcWwoc3FsKVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgbGlzdCwgdXBkYXRlLCBxdWVyeSwgb3JkZXJcbn0iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "order.js"
      ],
      "names": [
        "querySql",
        "require",
        "list",
        "sql",
        "update",
        "id",
        "status",
        "query",
        "order",
        "commodityID",
        "openid",
        "module",
        "exports"
      ],
      "mappings": "AAAA,MAAM;AAAEA,EAAAA;AAAF,IAAeC,OAAO,CAAC,UAAD,CAA5B;;AAEA,SAASC,IAAT,GAAgB;AACd,QAAMC,GAAG,GAAI;;;;;GAAb;AAMA,SAAOH,QAAQ,CAACG,GAAD,CAAf;AACD;;AAED,SAASC,MAAT,CAAgBC,EAAhB,EAAmBC,MAAnB,EAA2B;AACzB,QAAMH,GAAG,GAAI,gCAA+BG,MAAO,oBAAmBD,EAAG,GAAzE;AACA,SAAOL,QAAQ,CAACG,GAAD,CAAf;AACD;;AAED,SAASI,KAAT,CAAeF,EAAf,EAAmB;AACjB,QAAMF,GAAG,GAAI,6CAA4CE,EAAG,GAA5D;AACA,SAAOL,QAAQ,CAACG,GAAD,CAAf;AACD;;AAED,SAASK,KAAT,CAAeC,WAAf,EAA2BC,MAA3B,EAAmC;AACjC,QAAMP,GAAG,GAAI;;6BAEcM,WAAY;;4BAEbC,MAAO,GAJjC;AAKA,SAAOV,QAAQ,CAACG,GAAD,CAAf;AACD;;AAEDQ,MAAM,CAACC,OAAP,GAAiB;AACfV,EAAAA,IADe;AACTE,EAAAA,MADS;AACDG,EAAAA,KADC;AACMC,EAAAA;AADN,CAAjB",
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\",
      "sourcesContent": [
        "const { querySql } = require('../mysql');\n\nfunction list() {\n  const sql = `\n  SELECT\n\t*\n  FROM\n\t\\`order\\`\n  `\n  return querySql(sql)\n}\n\nfunction update(id,status) {\n  const sql = `update \\`order\\` set status='${status}' where orderID='${id}'`\n  return querySql(sql)\n}\n\nfunction query(id) {\n  const sql = `select * from \\`order\\` where customerID='${id}'`\n  return querySql(sql)\n}\n\nfunction order(commodityID,openid) {\n  const sql = `select *,commodity.name as commodityName from commodity,customer\n              WHERE\n              commodityID='${commodityID}'\n              AND\n              customerID='${openid}'`\n  return querySql(sql)\n}\n\nmodule.exports = {\n  list, update, query, order\n}"
      ]
    },
    "sourceType": "module",
    "mtime": 1588828440811
  },
  "{\"sourceRoot\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\router\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"filename\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\router\\\\evaluate.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"plugins\":[],\"presets\":[]}:7.9.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "G:\\Project\\Web\\git\\household-service-server",
      "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\evaluate.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "G:\\Project\\Web\\git\\household-service-server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\evaluate.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\evaluate.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\",
        "sourceFileName": "evaluate.js"
      }
    },
    "ast": null,
    "code": "const express = require('express');\n\nconst Result = require('../models/Result');\n\nconst {\n  create,\n  list,\n  update,\n  querylist\n} = require('../service/evaluate');\n\nconst {\n  increase\n} = require('../utils/auto-increase');\n\nconst router = express.Router();\nrouter.get('/list', (req, res) => {\n  list().then(result => {\n    if (result) {\n      new Result(result, '查询成功').success(res);\n    } else {\n      new Result('查询失败').fail(res);\n    }\n  });\n});\nrouter.post('/querylist', (req, res) => {\n  querylist(req.body.commodityID).then(result => {\n    if (result) {\n      new Result(result, '查询成功').success(res);\n    } else {\n      new Result('查询失败').fail(res);\n    }\n  });\n});\nrouter.post('/update', (req, res) => {\n  update(req.body.id, req.body.feedback).then(result => {\n    if (result) {\n      new Result('更新成功').success(res);\n    } else {\n      new Result('更新失败').fail(res);\n    }\n  });\n});\nrouter.post('/create', (req, res) => {\n  const {\n    id,\n    openid,\n    score,\n    evaluate\n  } = req.body;\n  create(id, openid, score, evaluate).then(result => {\n    if (result) {\n      new Result('新增成功').success(res);\n    } else {\n      new Result('新增失败').fail(res);\n    }\n  });\n});\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV2YWx1YXRlLmpzIl0sIm5hbWVzIjpbImV4cHJlc3MiLCJyZXF1aXJlIiwiUmVzdWx0IiwiY3JlYXRlIiwibGlzdCIsInVwZGF0ZSIsInF1ZXJ5bGlzdCIsImluY3JlYXNlIiwicm91dGVyIiwiUm91dGVyIiwiZ2V0IiwicmVxIiwicmVzIiwidGhlbiIsInJlc3VsdCIsInN1Y2Nlc3MiLCJmYWlsIiwicG9zdCIsImJvZHkiLCJjb21tb2RpdHlJRCIsImlkIiwiZmVlZGJhY2siLCJvcGVuaWQiLCJzY29yZSIsImV2YWx1YXRlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBRCxDQUF2Qjs7QUFDQSxNQUFNQyxNQUFNLEdBQUdELE9BQU8sQ0FBQyxrQkFBRCxDQUF0Qjs7QUFDQSxNQUFNO0FBQUVFLEVBQUFBLE1BQUY7QUFBVUMsRUFBQUEsSUFBVjtBQUFnQkMsRUFBQUEsTUFBaEI7QUFBd0JDLEVBQUFBO0FBQXhCLElBQXFDTCxPQUFPLENBQUMscUJBQUQsQ0FBbEQ7O0FBQ0EsTUFBTTtBQUFFTSxFQUFBQTtBQUFGLElBQWVOLE9BQU8sQ0FBQyx3QkFBRCxDQUE1Qjs7QUFFQSxNQUFNTyxNQUFNLEdBQUdSLE9BQU8sQ0FBQ1MsTUFBUixFQUFmO0FBRUFELE1BQU0sQ0FBQ0UsR0FBUCxDQUFXLE9BQVgsRUFBb0IsQ0FBQ0MsR0FBRCxFQUFNQyxHQUFOLEtBQWM7QUFDaENSLEVBQUFBLElBQUksR0FBR1MsSUFBUCxDQUFZQyxNQUFNLElBQUk7QUFDcEIsUUFBSUEsTUFBSixFQUFZO0FBQ1YsVUFBSVosTUFBSixDQUFXWSxNQUFYLEVBQW1CLE1BQW5CLEVBQTJCQyxPQUEzQixDQUFtQ0gsR0FBbkM7QUFDRCxLQUZELE1BRU87QUFDTCxVQUFJVixNQUFKLENBQVcsTUFBWCxFQUFtQmMsSUFBbkIsQ0FBd0JKLEdBQXhCO0FBQ0Q7QUFDRixHQU5EO0FBT0QsQ0FSRDtBQVVBSixNQUFNLENBQUNTLElBQVAsQ0FBWSxZQUFaLEVBQTBCLENBQUNOLEdBQUQsRUFBTUMsR0FBTixLQUFjO0FBQ3RDTixFQUFBQSxTQUFTLENBQUNLLEdBQUcsQ0FBQ08sSUFBSixDQUFTQyxXQUFWLENBQVQsQ0FBZ0NOLElBQWhDLENBQXFDQyxNQUFNLElBQUk7QUFDN0MsUUFBSUEsTUFBSixFQUFZO0FBQ1YsVUFBSVosTUFBSixDQUFXWSxNQUFYLEVBQW1CLE1BQW5CLEVBQTJCQyxPQUEzQixDQUFtQ0gsR0FBbkM7QUFDRCxLQUZELE1BRU87QUFDTCxVQUFJVixNQUFKLENBQVcsTUFBWCxFQUFtQmMsSUFBbkIsQ0FBd0JKLEdBQXhCO0FBQ0Q7QUFDRixHQU5EO0FBT0QsQ0FSRDtBQVVBSixNQUFNLENBQUNTLElBQVAsQ0FBWSxTQUFaLEVBQXVCLENBQUNOLEdBQUQsRUFBTUMsR0FBTixLQUFjO0FBQ25DUCxFQUFBQSxNQUFNLENBQUNNLEdBQUcsQ0FBQ08sSUFBSixDQUFTRSxFQUFWLEVBQWNULEdBQUcsQ0FBQ08sSUFBSixDQUFTRyxRQUF2QixDQUFOLENBQXVDUixJQUF2QyxDQUE0Q0MsTUFBTSxJQUFJO0FBQ3BELFFBQUlBLE1BQUosRUFBWTtBQUNWLFVBQUlaLE1BQUosQ0FBVyxNQUFYLEVBQW1CYSxPQUFuQixDQUEyQkgsR0FBM0I7QUFDRCxLQUZELE1BRU87QUFDTCxVQUFJVixNQUFKLENBQVcsTUFBWCxFQUFtQmMsSUFBbkIsQ0FBd0JKLEdBQXhCO0FBQ0Q7QUFDRixHQU5EO0FBT0QsQ0FSRDtBQVVBSixNQUFNLENBQUNTLElBQVAsQ0FBWSxTQUFaLEVBQXVCLENBQUNOLEdBQUQsRUFBTUMsR0FBTixLQUFjO0FBQ25DLFFBQU07QUFBRVEsSUFBQUEsRUFBRjtBQUFNRSxJQUFBQSxNQUFOO0FBQWNDLElBQUFBLEtBQWQ7QUFBcUJDLElBQUFBO0FBQXJCLE1BQWtDYixHQUFHLENBQUNPLElBQTVDO0FBQ0FmLEVBQUFBLE1BQU0sQ0FBQ2lCLEVBQUQsRUFBS0UsTUFBTCxFQUFhQyxLQUFiLEVBQW9CQyxRQUFwQixDQUFOLENBQW9DWCxJQUFwQyxDQUF5Q0MsTUFBTSxJQUFJO0FBQ2pELFFBQUlBLE1BQUosRUFBWTtBQUNWLFVBQUlaLE1BQUosQ0FBVyxNQUFYLEVBQW1CYSxPQUFuQixDQUEyQkgsR0FBM0I7QUFDRCxLQUZELE1BRU87QUFDTCxVQUFJVixNQUFKLENBQVcsTUFBWCxFQUFtQmMsSUFBbkIsQ0FBd0JKLEdBQXhCO0FBQ0Q7QUFDRixHQU5EO0FBT0QsQ0FURDtBQVdBYSxNQUFNLENBQUNDLE9BQVAsR0FBaUJsQixNQUFqQiIsInNvdXJjZVJvb3QiOiJHOlxcUHJvamVjdFxcV2ViXFxnaXRcXGhvdXNlaG9sZC1zZXJ2aWNlLXNlcnZlclxcc3JjXFxyb3V0ZXJcXCIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJylcclxuY29uc3QgUmVzdWx0ID0gcmVxdWlyZSgnLi4vbW9kZWxzL1Jlc3VsdCcpXHJcbmNvbnN0IHsgY3JlYXRlLCBsaXN0LCB1cGRhdGUsIHF1ZXJ5bGlzdH0gPSByZXF1aXJlKCcuLi9zZXJ2aWNlL2V2YWx1YXRlJylcclxuY29uc3QgeyBpbmNyZWFzZSB9ID0gcmVxdWlyZSgnLi4vdXRpbHMvYXV0by1pbmNyZWFzZScpXHJcblxyXG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpXHJcblxyXG5yb3V0ZXIuZ2V0KCcvbGlzdCcsIChyZXEsIHJlcykgPT4ge1xyXG4gIGxpc3QoKS50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgIG5ldyBSZXN1bHQocmVzdWx0LCAn5p+l6K+i5oiQ5YqfJykuc3VjY2VzcyhyZXMpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBuZXcgUmVzdWx0KCfmn6Xor6LlpLHotKUnKS5mYWlsKHJlcylcclxuICAgIH1cclxuICB9KVxyXG59KVxyXG5cclxucm91dGVyLnBvc3QoJy9xdWVyeWxpc3QnLCAocmVxLCByZXMpID0+IHtcclxuICBxdWVyeWxpc3QocmVxLmJvZHkuY29tbW9kaXR5SUQpLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgIGlmIChyZXN1bHQpIHtcclxuICAgICAgbmV3IFJlc3VsdChyZXN1bHQsICfmn6Xor6LmiJDlip8nKS5zdWNjZXNzKHJlcylcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG5ldyBSZXN1bHQoJ+afpeivouWksei0pScpLmZhaWwocmVzKVxyXG4gICAgfVxyXG4gIH0pXHJcbn0pXHJcblxyXG5yb3V0ZXIucG9zdCgnL3VwZGF0ZScsIChyZXEsIHJlcykgPT4ge1xyXG4gIHVwZGF0ZShyZXEuYm9keS5pZCwgcmVxLmJvZHkuZmVlZGJhY2spLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgIGlmIChyZXN1bHQpIHtcclxuICAgICAgbmV3IFJlc3VsdCgn5pu05paw5oiQ5YqfJykuc3VjY2VzcyhyZXMpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBuZXcgUmVzdWx0KCfmm7TmlrDlpLHotKUnKS5mYWlsKHJlcylcclxuICAgIH1cclxuICB9KVxyXG59KVxyXG5cclxucm91dGVyLnBvc3QoJy9jcmVhdGUnLCAocmVxLCByZXMpID0+IHtcclxuICBjb25zdCB7IGlkLCBvcGVuaWQsIHNjb3JlLCBldmFsdWF0ZSB9ID0gcmVxLmJvZHlcclxuICBjcmVhdGUoaWQsIG9wZW5pZCwgc2NvcmUsIGV2YWx1YXRlKS50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgIG5ldyBSZXN1bHQoJ+aWsOWinuaIkOWKnycpLnN1Y2Nlc3MocmVzKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbmV3IFJlc3VsdCgn5paw5aKe5aSx6LSlJykuZmFpbChyZXMpXHJcbiAgICB9XHJcbiAgfSlcclxufSlcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcm91dGVyIl19",
    "map": {
      "version": 3,
      "sources": [
        "evaluate.js"
      ],
      "names": [
        "express",
        "require",
        "Result",
        "create",
        "list",
        "update",
        "querylist",
        "increase",
        "router",
        "Router",
        "get",
        "req",
        "res",
        "then",
        "result",
        "success",
        "fail",
        "post",
        "body",
        "commodityID",
        "id",
        "feedback",
        "openid",
        "score",
        "evaluate",
        "module",
        "exports"
      ],
      "mappings": "AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AACA,MAAMC,MAAM,GAAGD,OAAO,CAAC,kBAAD,CAAtB;;AACA,MAAM;AAAEE,EAAAA,MAAF;AAAUC,EAAAA,IAAV;AAAgBC,EAAAA,MAAhB;AAAwBC,EAAAA;AAAxB,IAAqCL,OAAO,CAAC,qBAAD,CAAlD;;AACA,MAAM;AAAEM,EAAAA;AAAF,IAAeN,OAAO,CAAC,wBAAD,CAA5B;;AAEA,MAAMO,MAAM,GAAGR,OAAO,CAACS,MAAR,EAAf;AAEAD,MAAM,CAACE,GAAP,CAAW,OAAX,EAAoB,CAACC,GAAD,EAAMC,GAAN,KAAc;AAChCR,EAAAA,IAAI,GAAGS,IAAP,CAAYC,MAAM,IAAI;AACpB,QAAIA,MAAJ,EAAY;AACV,UAAIZ,MAAJ,CAAWY,MAAX,EAAmB,MAAnB,EAA2BC,OAA3B,CAAmCH,GAAnC;AACD,KAFD,MAEO;AACL,UAAIV,MAAJ,CAAW,MAAX,EAAmBc,IAAnB,CAAwBJ,GAAxB;AACD;AACF,GAND;AAOD,CARD;AAUAJ,MAAM,CAACS,IAAP,CAAY,YAAZ,EAA0B,CAACN,GAAD,EAAMC,GAAN,KAAc;AACtCN,EAAAA,SAAS,CAACK,GAAG,CAACO,IAAJ,CAASC,WAAV,CAAT,CAAgCN,IAAhC,CAAqCC,MAAM,IAAI;AAC7C,QAAIA,MAAJ,EAAY;AACV,UAAIZ,MAAJ,CAAWY,MAAX,EAAmB,MAAnB,EAA2BC,OAA3B,CAAmCH,GAAnC;AACD,KAFD,MAEO;AACL,UAAIV,MAAJ,CAAW,MAAX,EAAmBc,IAAnB,CAAwBJ,GAAxB;AACD;AACF,GAND;AAOD,CARD;AAUAJ,MAAM,CAACS,IAAP,CAAY,SAAZ,EAAuB,CAACN,GAAD,EAAMC,GAAN,KAAc;AACnCP,EAAAA,MAAM,CAACM,GAAG,CAACO,IAAJ,CAASE,EAAV,EAAcT,GAAG,CAACO,IAAJ,CAASG,QAAvB,CAAN,CAAuCR,IAAvC,CAA4CC,MAAM,IAAI;AACpD,QAAIA,MAAJ,EAAY;AACV,UAAIZ,MAAJ,CAAW,MAAX,EAAmBa,OAAnB,CAA2BH,GAA3B;AACD,KAFD,MAEO;AACL,UAAIV,MAAJ,CAAW,MAAX,EAAmBc,IAAnB,CAAwBJ,GAAxB;AACD;AACF,GAND;AAOD,CARD;AAUAJ,MAAM,CAACS,IAAP,CAAY,SAAZ,EAAuB,CAACN,GAAD,EAAMC,GAAN,KAAc;AACnC,QAAM;AAAEQ,IAAAA,EAAF;AAAME,IAAAA,MAAN;AAAcC,IAAAA,KAAd;AAAqBC,IAAAA;AAArB,MAAkCb,GAAG,CAACO,IAA5C;AACAf,EAAAA,MAAM,CAACiB,EAAD,EAAKE,MAAL,EAAaC,KAAb,EAAoBC,QAApB,CAAN,CAAoCX,IAApC,CAAyCC,MAAM,IAAI;AACjD,QAAIA,MAAJ,EAAY;AACV,UAAIZ,MAAJ,CAAW,MAAX,EAAmBa,OAAnB,CAA2BH,GAA3B;AACD,KAFD,MAEO;AACL,UAAIV,MAAJ,CAAW,MAAX,EAAmBc,IAAnB,CAAwBJ,GAAxB;AACD;AACF,GAND;AAOD,CATD;AAWAa,MAAM,CAACC,OAAP,GAAiBlB,MAAjB",
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\",
      "sourcesContent": [
        "const express = require('express')\r\nconst Result = require('../models/Result')\r\nconst { create, list, update, querylist} = require('../service/evaluate')\r\nconst { increase } = require('../utils/auto-increase')\r\n\r\nconst router = express.Router()\r\n\r\nrouter.get('/list', (req, res) => {\r\n  list().then(result => {\r\n    if (result) {\r\n      new Result(result, '查询成功').success(res)\r\n    } else {\r\n      new Result('查询失败').fail(res)\r\n    }\r\n  })\r\n})\r\n\r\nrouter.post('/querylist', (req, res) => {\r\n  querylist(req.body.commodityID).then(result => {\r\n    if (result) {\r\n      new Result(result, '查询成功').success(res)\r\n    } else {\r\n      new Result('查询失败').fail(res)\r\n    }\r\n  })\r\n})\r\n\r\nrouter.post('/update', (req, res) => {\r\n  update(req.body.id, req.body.feedback).then(result => {\r\n    if (result) {\r\n      new Result('更新成功').success(res)\r\n    } else {\r\n      new Result('更新失败').fail(res)\r\n    }\r\n  })\r\n})\r\n\r\nrouter.post('/create', (req, res) => {\r\n  const { id, openid, score, evaluate } = req.body\r\n  create(id, openid, score, evaluate).then(result => {\r\n    if (result) {\r\n      new Result('新增成功').success(res)\r\n    } else {\r\n      new Result('新增失败').fail(res)\r\n    }\r\n  })\r\n})\r\n\r\nmodule.exports = router"
      ]
    },
    "sourceType": "module",
    "mtime": 1588770410350
  },
  "{\"sourceRoot\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\service\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"filename\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\service\\\\evaluate.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"plugins\":[],\"presets\":[]}:7.9.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "G:\\Project\\Web\\git\\household-service-server",
      "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\evaluate.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "G:\\Project\\Web\\git\\household-service-server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\evaluate.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\evaluate.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\",
        "sourceFileName": "evaluate.js"
      }
    },
    "ast": null,
    "code": "const {\n  querySql\n} = require('../mysql');\n\nfunction list() {\n  const sql = `select evaluate.*,commodity.\\`name\\` as commodityName,commodity.className,customer.\\`name\\` as customerName\n        from evaluate\n        LEFT JOIN\n        \\`order\\`\n        ON\n        evaluate.orderID=\\`order\\`.orderID\n        LEFT JOIN\n        commodity\n        ON\n        commodity.commodityID=\\`order\\`.commodityID\n        LEFT JOIN\n        customer\n        ON\n        evaluate.customerID=customer.customerID`;\n  return querySql(sql);\n}\n\nfunction update(id, feedback) {\n  const sql = `update evaluate set feedback='${feedback}' where evaluateID='${id}'`;\n  return querySql(sql);\n}\n\nfunction create(id, openid, score, evaluate) {\n  const sql = `INSERT INTO \\`evaluate\\` (\\`evaluateID\\`, \\`content\\`, \\`orderID\\`, \\`customerID\\`, \\`score\\`) \n  VALUES ('${id}', '${evaluate}', '${id}', '${openid}', '${score}')`;\n  return querySql(sql);\n}\n\nfunction querylist(commodityID) {\n  const sql = `select evaluate.*,commodity.\\`name\\` as commodityName,commodity.className,customer.\\`name\\` as customerName,customer.avatar,customer.nickName\n        from evaluate\n        LEFT JOIN\n        \\`order\\`\n        ON\n        evaluate.orderID=\\`order\\`.orderID\n        LEFT JOIN\n        commodity\n        ON\n        commodity.commodityID=\\`order\\`.commodityID\n        LEFT JOIN\n        customer\n        ON\n        evaluate.customerID=customer.customerID\n        WHERE\n        commodity.commodityID='${commodityID}'`;\n  return querySql(sql);\n}\n\nmodule.exports = {\n  list,\n  update,\n  create,\n  querylist\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV2YWx1YXRlLmpzIl0sIm5hbWVzIjpbInF1ZXJ5U3FsIiwicmVxdWlyZSIsImxpc3QiLCJzcWwiLCJ1cGRhdGUiLCJpZCIsImZlZWRiYWNrIiwiY3JlYXRlIiwib3BlbmlkIiwic2NvcmUiLCJldmFsdWF0ZSIsInF1ZXJ5bGlzdCIsImNvbW1vZGl0eUlEIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTTtBQUFFQSxFQUFBQTtBQUFGLElBQWVDLE9BQU8sQ0FBQyxVQUFELENBQTVCOztBQUVBLFNBQVNDLElBQVQsR0FBZ0I7QUFDZCxRQUFNQyxHQUFHLEdBQUk7Ozs7Ozs7Ozs7Ozs7Z0RBQWI7QUFjQSxTQUFPSCxRQUFRLENBQUNHLEdBQUQsQ0FBZjtBQUNEOztBQUVELFNBQVNDLE1BQVQsQ0FBZ0JDLEVBQWhCLEVBQW1CQyxRQUFuQixFQUE0QjtBQUMxQixRQUFNSCxHQUFHLEdBQUksaUNBQWdDRyxRQUFTLHVCQUFzQkQsRUFBRyxHQUEvRTtBQUNBLFNBQU9MLFFBQVEsQ0FBQ0csR0FBRCxDQUFmO0FBQ0Q7O0FBRUQsU0FBU0ksTUFBVCxDQUFnQkYsRUFBaEIsRUFBb0JHLE1BQXBCLEVBQTRCQyxLQUE1QixFQUFtQ0MsUUFBbkMsRUFBNEM7QUFDMUMsUUFBTVAsR0FBRyxHQUFJO2FBQ0ZFLEVBQUcsT0FBTUssUUFBUyxPQUFNTCxFQUFHLE9BQU1HLE1BQU8sT0FBTUMsS0FBTSxJQUQvRDtBQUVBLFNBQU9ULFFBQVEsQ0FBQ0csR0FBRCxDQUFmO0FBQ0Q7O0FBRUQsU0FBU1EsU0FBVCxDQUFtQkMsV0FBbkIsRUFBZ0M7QUFDOUIsUUFBTVQsR0FBRyxHQUFJOzs7Ozs7Ozs7Ozs7Ozs7aUNBZWtCUyxXQUFZLEdBZjNDO0FBZ0JBLFNBQU9aLFFBQVEsQ0FBQ0csR0FBRCxDQUFmO0FBQ0Q7O0FBRURVLE1BQU0sQ0FBQ0MsT0FBUCxHQUFlO0FBQ2JaLEVBQUFBLElBRGE7QUFDUEUsRUFBQUEsTUFETztBQUNDRyxFQUFBQSxNQUREO0FBQ1NJLEVBQUFBO0FBRFQsQ0FBZiIsInNvdXJjZVJvb3QiOiJHOlxcUHJvamVjdFxcV2ViXFxnaXRcXGhvdXNlaG9sZC1zZXJ2aWNlLXNlcnZlclxcc3JjXFxzZXJ2aWNlXFwiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IHF1ZXJ5U3FsIH0gPSByZXF1aXJlKCcuLi9teXNxbCcpO1xyXG5cclxuZnVuY3Rpb24gbGlzdCgpIHtcclxuICBjb25zdCBzcWwgPSBgc2VsZWN0IGV2YWx1YXRlLiosY29tbW9kaXR5LlxcYG5hbWVcXGAgYXMgY29tbW9kaXR5TmFtZSxjb21tb2RpdHkuY2xhc3NOYW1lLGN1c3RvbWVyLlxcYG5hbWVcXGAgYXMgY3VzdG9tZXJOYW1lXHJcbiAgICAgICAgZnJvbSBldmFsdWF0ZVxyXG4gICAgICAgIExFRlQgSk9JTlxyXG4gICAgICAgIFxcYG9yZGVyXFxgXHJcbiAgICAgICAgT05cclxuICAgICAgICBldmFsdWF0ZS5vcmRlcklEPVxcYG9yZGVyXFxgLm9yZGVySURcclxuICAgICAgICBMRUZUIEpPSU5cclxuICAgICAgICBjb21tb2RpdHlcclxuICAgICAgICBPTlxyXG4gICAgICAgIGNvbW1vZGl0eS5jb21tb2RpdHlJRD1cXGBvcmRlclxcYC5jb21tb2RpdHlJRFxyXG4gICAgICAgIExFRlQgSk9JTlxyXG4gICAgICAgIGN1c3RvbWVyXHJcbiAgICAgICAgT05cclxuICAgICAgICBldmFsdWF0ZS5jdXN0b21lcklEPWN1c3RvbWVyLmN1c3RvbWVySURgXHJcbiAgcmV0dXJuIHF1ZXJ5U3FsKHNxbClcclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlKGlkLGZlZWRiYWNrKXtcclxuICBjb25zdCBzcWwgPSBgdXBkYXRlIGV2YWx1YXRlIHNldCBmZWVkYmFjaz0nJHtmZWVkYmFja30nIHdoZXJlIGV2YWx1YXRlSUQ9JyR7aWR9J2BcclxuICByZXR1cm4gcXVlcnlTcWwoc3FsKVxyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGUoaWQsIG9wZW5pZCwgc2NvcmUsIGV2YWx1YXRlKXtcclxuICBjb25zdCBzcWwgPSBgSU5TRVJUIElOVE8gXFxgZXZhbHVhdGVcXGAgKFxcYGV2YWx1YXRlSURcXGAsIFxcYGNvbnRlbnRcXGAsIFxcYG9yZGVySURcXGAsIFxcYGN1c3RvbWVySURcXGAsIFxcYHNjb3JlXFxgKSBcclxuICBWQUxVRVMgKCcke2lkfScsICcke2V2YWx1YXRlfScsICcke2lkfScsICcke29wZW5pZH0nLCAnJHtzY29yZX0nKWBcclxuICByZXR1cm4gcXVlcnlTcWwoc3FsKVxyXG59XHJcblxyXG5mdW5jdGlvbiBxdWVyeWxpc3QoY29tbW9kaXR5SUQpIHtcclxuICBjb25zdCBzcWwgPSBgc2VsZWN0IGV2YWx1YXRlLiosY29tbW9kaXR5LlxcYG5hbWVcXGAgYXMgY29tbW9kaXR5TmFtZSxjb21tb2RpdHkuY2xhc3NOYW1lLGN1c3RvbWVyLlxcYG5hbWVcXGAgYXMgY3VzdG9tZXJOYW1lLGN1c3RvbWVyLmF2YXRhcixjdXN0b21lci5uaWNrTmFtZVxyXG4gICAgICAgIGZyb20gZXZhbHVhdGVcclxuICAgICAgICBMRUZUIEpPSU5cclxuICAgICAgICBcXGBvcmRlclxcYFxyXG4gICAgICAgIE9OXHJcbiAgICAgICAgZXZhbHVhdGUub3JkZXJJRD1cXGBvcmRlclxcYC5vcmRlcklEXHJcbiAgICAgICAgTEVGVCBKT0lOXHJcbiAgICAgICAgY29tbW9kaXR5XHJcbiAgICAgICAgT05cclxuICAgICAgICBjb21tb2RpdHkuY29tbW9kaXR5SUQ9XFxgb3JkZXJcXGAuY29tbW9kaXR5SURcclxuICAgICAgICBMRUZUIEpPSU5cclxuICAgICAgICBjdXN0b21lclxyXG4gICAgICAgIE9OXHJcbiAgICAgICAgZXZhbHVhdGUuY3VzdG9tZXJJRD1jdXN0b21lci5jdXN0b21lcklEXHJcbiAgICAgICAgV0hFUkVcclxuICAgICAgICBjb21tb2RpdHkuY29tbW9kaXR5SUQ9JyR7Y29tbW9kaXR5SUR9J2BcclxuICByZXR1cm4gcXVlcnlTcWwoc3FsKVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cz17XHJcbiAgbGlzdCwgdXBkYXRlLCBjcmVhdGUsIHF1ZXJ5bGlzdFxyXG59Il19",
    "map": {
      "version": 3,
      "sources": [
        "evaluate.js"
      ],
      "names": [
        "querySql",
        "require",
        "list",
        "sql",
        "update",
        "id",
        "feedback",
        "create",
        "openid",
        "score",
        "evaluate",
        "querylist",
        "commodityID",
        "module",
        "exports"
      ],
      "mappings": "AAAA,MAAM;AAAEA,EAAAA;AAAF,IAAeC,OAAO,CAAC,UAAD,CAA5B;;AAEA,SAASC,IAAT,GAAgB;AACd,QAAMC,GAAG,GAAI;;;;;;;;;;;;;gDAAb;AAcA,SAAOH,QAAQ,CAACG,GAAD,CAAf;AACD;;AAED,SAASC,MAAT,CAAgBC,EAAhB,EAAmBC,QAAnB,EAA4B;AAC1B,QAAMH,GAAG,GAAI,iCAAgCG,QAAS,uBAAsBD,EAAG,GAA/E;AACA,SAAOL,QAAQ,CAACG,GAAD,CAAf;AACD;;AAED,SAASI,MAAT,CAAgBF,EAAhB,EAAoBG,MAApB,EAA4BC,KAA5B,EAAmCC,QAAnC,EAA4C;AAC1C,QAAMP,GAAG,GAAI;aACFE,EAAG,OAAMK,QAAS,OAAML,EAAG,OAAMG,MAAO,OAAMC,KAAM,IAD/D;AAEA,SAAOT,QAAQ,CAACG,GAAD,CAAf;AACD;;AAED,SAASQ,SAAT,CAAmBC,WAAnB,EAAgC;AAC9B,QAAMT,GAAG,GAAI;;;;;;;;;;;;;;;iCAekBS,WAAY,GAf3C;AAgBA,SAAOZ,QAAQ,CAACG,GAAD,CAAf;AACD;;AAEDU,MAAM,CAACC,OAAP,GAAe;AACbZ,EAAAA,IADa;AACPE,EAAAA,MADO;AACCG,EAAAA,MADD;AACSI,EAAAA;AADT,CAAf",
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\",
      "sourcesContent": [
        "const { querySql } = require('../mysql');\r\n\r\nfunction list() {\r\n  const sql = `select evaluate.*,commodity.\\`name\\` as commodityName,commodity.className,customer.\\`name\\` as customerName\r\n        from evaluate\r\n        LEFT JOIN\r\n        \\`order\\`\r\n        ON\r\n        evaluate.orderID=\\`order\\`.orderID\r\n        LEFT JOIN\r\n        commodity\r\n        ON\r\n        commodity.commodityID=\\`order\\`.commodityID\r\n        LEFT JOIN\r\n        customer\r\n        ON\r\n        evaluate.customerID=customer.customerID`\r\n  return querySql(sql)\r\n}\r\n\r\nfunction update(id,feedback){\r\n  const sql = `update evaluate set feedback='${feedback}' where evaluateID='${id}'`\r\n  return querySql(sql)\r\n}\r\n\r\nfunction create(id, openid, score, evaluate){\r\n  const sql = `INSERT INTO \\`evaluate\\` (\\`evaluateID\\`, \\`content\\`, \\`orderID\\`, \\`customerID\\`, \\`score\\`) \r\n  VALUES ('${id}', '${evaluate}', '${id}', '${openid}', '${score}')`\r\n  return querySql(sql)\r\n}\r\n\r\nfunction querylist(commodityID) {\r\n  const sql = `select evaluate.*,commodity.\\`name\\` as commodityName,commodity.className,customer.\\`name\\` as customerName,customer.avatar,customer.nickName\r\n        from evaluate\r\n        LEFT JOIN\r\n        \\`order\\`\r\n        ON\r\n        evaluate.orderID=\\`order\\`.orderID\r\n        LEFT JOIN\r\n        commodity\r\n        ON\r\n        commodity.commodityID=\\`order\\`.commodityID\r\n        LEFT JOIN\r\n        customer\r\n        ON\r\n        evaluate.customerID=customer.customerID\r\n        WHERE\r\n        commodity.commodityID='${commodityID}'`\r\n  return querySql(sql)\r\n}\r\n\r\nmodule.exports={\r\n  list, update, create, querylist\r\n}"
      ]
    },
    "sourceType": "module",
    "mtime": 1588771462380
  },
  "{\"sourceRoot\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\router\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"filename\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\router\\\\commodity.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"plugins\":[],\"presets\":[]}:7.9.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "G:\\Project\\Web\\git\\household-service-server",
      "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\commodity.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "G:\\Project\\Web\\git\\household-service-server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\commodity.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\commodity.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\",
        "sourceFileName": "commodity.js"
      }
    },
    "ast": null,
    "code": "const express = require('express');\n\nconst Result = require('../models/Result');\n\nconst {\n  create,\n  list,\n  update,\n  remove,\n  sort,\n  query\n} = require('../service/commodity');\n\nconst {\n  increase\n} = require('../utils/auto-increase');\n\nconst {\n  UPLOAD_PATH\n} = require('../utils/constant');\n\nconst fs = require('fs');\n\nconst router = express.Router();\nrouter.post('/remove', (req, res) => {\n  console.log(req.body);\n  const files = req.body.files;\n  const oriPath = `${UPLOAD_PATH}/show/`;\n  remove(req.body.id).then(result => {\n    if (result) {\n      files.forEach(val => {\n        const filename = val.split('/').pop();\n        fs.unlink(oriPath + filename, function (err) {\n          if (err) {\n            throw err;\n          }\n        });\n      });\n      new Result('删除商品成功').success(res);\n    } else {\n      new Result('删除商品失败').fail(res);\n    }\n  });\n});\nrouter.post('/update', (req, res) => {\n  const {\n    commodityID,\n    describe,\n    name,\n    isRemoved,\n    price,\n    show\n  } = req.body;\n  const className = req.body.class;\n  const staffID = req.body.staff.toString();\n  const oriPath = `${UPLOAD_PATH}/show/`;\n  update(commodityID, name, className, price, show, describe, staffID).then(result => {\n    if (result) {\n      new Result('更新商品成功').success(res);\n\n      if (isRemoved.length !== 0) {\n        isRemoved.forEach(val => {\n          fs.unlink(oriPath + val, function (err) {\n            if (err) {\n              console.log(err);\n            }\n          });\n        });\n      }\n    } else {\n      new Result('更新商品失败').fail(res);\n    }\n  });\n});\nrouter.post('/create', (req, res) => {\n  const {\n    name,\n    price,\n    describe\n  } = req.body;\n  const className = req.body.class;\n  const show = req.body.show.toString();\n  const staffID = req.body.staff.toString();\n  list().then(result => {\n    const data = new Result(result, '查询成功').data;\n    create(increase(data, 'commodityID'), name, className, price, show, describe, staffID).then(answer => {\n      if (answer) {\n        new Result('新增商品成功').success(res);\n      } else {\n        new Result('新增商品失败').fail(res);\n      }\n    });\n  });\n});\nrouter.post('/sort', (req, res) => {\n  sort(req.body.className).then(result => {\n    if (result) {\n      new Result(result, '查询成功').success(res);\n    } else {\n      new Result('查询失败').fail(res);\n    }\n  });\n});\nrouter.get('/list', (req, res) => {\n  list().then(result => {\n    if (result) {\n      new Result(result, '查询成功').success(res);\n    } else {\n      new Result('查询失败').fail(res);\n    }\n  });\n});\nrouter.post('/query', (req, res) => {\n  query(req.body.id).then(result => {\n    if (result) {\n      new Result(result, '查询成功').success(res);\n    } else {\n      new Result('查询失败').fail(res);\n    }\n  });\n});\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vZGl0eS5qcyJdLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsIlJlc3VsdCIsImNyZWF0ZSIsImxpc3QiLCJ1cGRhdGUiLCJyZW1vdmUiLCJzb3J0IiwicXVlcnkiLCJpbmNyZWFzZSIsIlVQTE9BRF9QQVRIIiwiZnMiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJwb3N0IiwicmVxIiwicmVzIiwiY29uc29sZSIsImxvZyIsImJvZHkiLCJmaWxlcyIsIm9yaVBhdGgiLCJpZCIsInRoZW4iLCJyZXN1bHQiLCJmb3JFYWNoIiwidmFsIiwiZmlsZW5hbWUiLCJzcGxpdCIsInBvcCIsInVubGluayIsImVyciIsInN1Y2Nlc3MiLCJmYWlsIiwiY29tbW9kaXR5SUQiLCJkZXNjcmliZSIsIm5hbWUiLCJpc1JlbW92ZWQiLCJwcmljZSIsInNob3ciLCJjbGFzc05hbWUiLCJjbGFzcyIsInN0YWZmSUQiLCJzdGFmZiIsInRvU3RyaW5nIiwibGVuZ3RoIiwiZGF0YSIsImFuc3dlciIsImdldCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQUQsQ0FBdkI7O0FBQ0EsTUFBTUMsTUFBTSxHQUFHRCxPQUFPLENBQUMsa0JBQUQsQ0FBdEI7O0FBQ0EsTUFBTTtBQUFFRSxFQUFBQSxNQUFGO0FBQVVDLEVBQUFBLElBQVY7QUFBZ0JDLEVBQUFBLE1BQWhCO0FBQXdCQyxFQUFBQSxNQUF4QjtBQUFnQ0MsRUFBQUEsSUFBaEM7QUFBc0NDLEVBQUFBO0FBQXRDLElBQWdEUCxPQUFPLENBQUMsc0JBQUQsQ0FBN0Q7O0FBQ0EsTUFBTTtBQUFFUSxFQUFBQTtBQUFGLElBQWVSLE9BQU8sQ0FBQyx3QkFBRCxDQUE1Qjs7QUFDQSxNQUFNO0FBQUVTLEVBQUFBO0FBQUYsSUFBa0JULE9BQU8sQ0FBQyxtQkFBRCxDQUEvQjs7QUFDQSxNQUFNVSxFQUFFLEdBQUdWLE9BQU8sQ0FBQyxJQUFELENBQWxCOztBQUNB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LE1BQUosQ0FBV3NCLE1BQVgsRUFBbUIsTUFBbkIsRUFBMkJRLE9BQTNCLENBQW1DaEIsR0FBbkM7QUFDRCxLQUZELE1BRU87QUFDTCxVQUFJZCxNQUFKLENBQVcsTUFBWCxFQUFtQitCLElBQW5CLENBQXdCakIsR0FBeEI7QUFDRDtBQUNGLEdBTkQ7QUFPRCxDQVJEO0FBVUFKLE1BQU0sQ0FBQ29DLEdBQVAsQ0FBVyxPQUFYLEVBQW9CLENBQUNqQyxHQUFELEVBQU1DLEdBQU4sS0FBYztBQUNoQ1osRUFBQUEsSUFBSSxHQUFHbUIsSUFBUCxDQUFZQyxNQUFNLElBQUk7QUFDcEIsUUFBSUEsTUFBSixFQUFZO0FBQ1YsVUFBSXRCLE1BQUosQ0FBV3NCLE1BQVgsRUFBbUIsTUFBbkIsRUFBMkJRLE9BQTNCLENBQW1DaEIsR0FBbkM7QUFDRCxLQUZELE1BRU87QUFDTCxVQUFJZCxNQUFKLENBQVcsTUFBWCxFQUFtQitCLElBQW5CLENBQXdCakIsR0FBeEI7QUFDRDtBQUNGLEdBTkQ7QUFPRCxDQVJEO0FBVUFKLE1BQU0sQ0FBQ0UsSUFBUCxDQUFZLFFBQVosRUFBc0IsQ0FBQ0MsR0FBRCxFQUFNQyxHQUFOLEtBQWM7QUFDbENSLEVBQUFBLEtBQUssQ0FBQ08sR0FBRyxDQUFDSSxJQUFKLENBQVNHLEVBQVYsQ0FBTCxDQUFtQkMsSUFBbkIsQ0FBd0JDLE1BQU0sSUFBSTtBQUNoQyxRQUFJQSxNQUFKLEVBQVk7QUFDVixVQUFJdEIsTUFBSixDQUFXc0IsTUFBWCxFQUFtQixNQUFuQixFQUEyQlEsT0FBM0IsQ0FBbUNoQixHQUFuQztBQUNELEtBRkQsTUFFTztBQUNMLFVBQUlkLE1BQUosQ0FBVyxNQUFYLEVBQW1CK0IsSUFBbkIsQ0FBd0JqQixHQUF4QjtBQUNEO0FBQ0YsR0FORDtBQU9ELENBUkQ7QUFVQWlDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQnRDLE1BQWpCIiwic291cmNlUm9vdCI6Ikc6XFxQcm9qZWN0XFxXZWJcXGdpdFxcaG91c2Vob2xkLXNlcnZpY2Utc2VydmVyXFxzcmNcXHJvdXRlclxcIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKVxuY29uc3QgUmVzdWx0ID0gcmVxdWlyZSgnLi4vbW9kZWxzL1Jlc3VsdCcpXG5jb25zdCB7IGNyZWF0ZSwgbGlzdCwgdXBkYXRlLCByZW1vdmUsIHNvcnQsIHF1ZXJ5IH0gPSByZXF1aXJlKCcuLi9zZXJ2aWNlL2NvbW1vZGl0eScpXG5jb25zdCB7IGluY3JlYXNlIH0gPSByZXF1aXJlKCcuLi91dGlscy9hdXRvLWluY3JlYXNlJylcbmNvbnN0IHsgVVBMT0FEX1BBVEggfSA9IHJlcXVpcmUoJy4uL3V0aWxzL2NvbnN0YW50JylcbmNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKVxuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKVxuXG5yb3V0ZXIucG9zdCgnL3JlbW92ZScsIChyZXEsIHJlcykgPT4ge1xuICBjb25zb2xlLmxvZyhyZXEuYm9keSlcbiAgY29uc3QgZmlsZXMgPSByZXEuYm9keS5maWxlc1xuICBjb25zdCBvcmlQYXRoID0gYCR7VVBMT0FEX1BBVEh9L3Nob3cvYFxuICByZW1vdmUocmVxLmJvZHkuaWQpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICBpZiAocmVzdWx0KSB7XG4gICAgICBmaWxlcy5mb3JFYWNoKHZhbCA9PiB7XG4gICAgICAgIGNvbnN0IGZpbGVuYW1lID0gdmFsLnNwbGl0KCcvJykucG9wKClcbiAgICAgICAgZnMudW5saW5rKG9yaVBhdGggKyBmaWxlbmFtZSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIGlmIChlcnIpIHsgdGhyb3cgZXJyIH1cbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgICBuZXcgUmVzdWx0KCfliKDpmaTllYblk4HmiJDlip8nKS5zdWNjZXNzKHJlcylcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3IFJlc3VsdCgn5Yig6Zmk5ZWG5ZOB5aSx6LSlJykuZmFpbChyZXMpXG4gICAgfVxuICB9KVxufSlcblxucm91dGVyLnBvc3QoJy91cGRhdGUnLCAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgeyBjb21tb2RpdHlJRCwgZGVzY3JpYmUsIG5hbWUsIGlzUmVtb3ZlZCwgcHJpY2UsIHNob3cgfSA9IHJlcS5ib2R5XG4gIGNvbnN0IGNsYXNzTmFtZSA9IHJlcS5ib2R5LmNsYXNzXG4gIGNvbnN0IHN0YWZmSUQgPSByZXEuYm9keS5zdGFmZi50b1N0cmluZygpXG4gIGNvbnN0IG9yaVBhdGggPSBgJHtVUExPQURfUEFUSH0vc2hvdy9gXG4gIHVwZGF0ZShjb21tb2RpdHlJRCwgbmFtZSwgY2xhc3NOYW1lLCBwcmljZSwgc2hvdywgZGVzY3JpYmUsIHN0YWZmSUQpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICBpZiAocmVzdWx0KSB7XG4gICAgICBuZXcgUmVzdWx0KCfmm7TmlrDllYblk4HmiJDlip8nKS5zdWNjZXNzKHJlcylcbiAgICAgIGlmIChpc1JlbW92ZWQubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgIGlzUmVtb3ZlZC5mb3JFYWNoKHZhbCA9PiB7XG4gICAgICAgICAgZnMudW5saW5rKG9yaVBhdGggKyB2YWwsIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIGlmIChlcnIpIHsgY29uc29sZS5sb2coZXJyKSB9XG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbmV3IFJlc3VsdCgn5pu05paw5ZWG5ZOB5aSx6LSlJykuZmFpbChyZXMpXG4gICAgfVxuICB9KVxufSlcblxucm91dGVyLnBvc3QoJy9jcmVhdGUnLCAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgeyBuYW1lLCBwcmljZSwgZGVzY3JpYmUgfSA9IHJlcS5ib2R5XG4gIGNvbnN0IGNsYXNzTmFtZSA9IHJlcS5ib2R5LmNsYXNzXG4gIGNvbnN0IHNob3cgPSByZXEuYm9keS5zaG93LnRvU3RyaW5nKClcbiAgY29uc3Qgc3RhZmZJRCA9IHJlcS5ib2R5LnN0YWZmLnRvU3RyaW5nKClcbiAgbGlzdCgpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICBjb25zdCBkYXRhID0gbmV3IFJlc3VsdChyZXN1bHQsICfmn6Xor6LmiJDlip8nKS5kYXRhXG4gICAgY3JlYXRlKGluY3JlYXNlKGRhdGEsICdjb21tb2RpdHlJRCcpLCBuYW1lLCBjbGFzc05hbWUsIHByaWNlLCBzaG93LCBkZXNjcmliZSwgc3RhZmZJRCkudGhlbihhbnN3ZXIgPT4ge1xuICAgICAgaWYgKGFuc3dlcikge1xuICAgICAgICBuZXcgUmVzdWx0KCfmlrDlop7llYblk4HmiJDlip8nKS5zdWNjZXNzKHJlcylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ldyBSZXN1bHQoJ+aWsOWinuWVhuWTgeWksei0pScpLmZhaWwocmVzKVxuICAgICAgfVxuICAgIH0pXG4gIH0pXG59KVxuXG5yb3V0ZXIucG9zdCgnL3NvcnQnLCAocmVxLCByZXMpID0+IHtcbiAgc29ydChyZXEuYm9keS5jbGFzc05hbWUpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICBpZiAocmVzdWx0KSB7XG4gICAgICBuZXcgUmVzdWx0KHJlc3VsdCwgJ+afpeivouaIkOWKnycpLnN1Y2Nlc3MocmVzKVxuICAgIH0gZWxzZSB7XG4gICAgICBuZXcgUmVzdWx0KCfmn6Xor6LlpLHotKUnKS5mYWlsKHJlcylcbiAgICB9XG4gIH0pXG59KVxuXG5yb3V0ZXIuZ2V0KCcvbGlzdCcsIChyZXEsIHJlcykgPT4ge1xuICBsaXN0KCkudGhlbihyZXN1bHQgPT4ge1xuICAgIGlmIChyZXN1bHQpIHtcbiAgICAgIG5ldyBSZXN1bHQocmVzdWx0LCAn5p+l6K+i5oiQ5YqfJykuc3VjY2VzcyhyZXMpXG4gICAgfSBlbHNlIHtcbiAgICAgIG5ldyBSZXN1bHQoJ+afpeivouWksei0pScpLmZhaWwocmVzKVxuICAgIH1cbiAgfSlcbn0pXG5cbnJvdXRlci5wb3N0KCcvcXVlcnknLCAocmVxLCByZXMpID0+IHtcbiAgcXVlcnkocmVxLmJvZHkuaWQpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICBpZiAocmVzdWx0KSB7XG4gICAgICBuZXcgUmVzdWx0KHJlc3VsdCwgJ+afpeivouaIkOWKnycpLnN1Y2Nlc3MocmVzKVxuICAgIH0gZWxzZSB7XG4gICAgICBuZXcgUmVzdWx0KCfmn6Xor6LlpLHotKUnKS5mYWlsKHJlcylcbiAgICB9XG4gIH0pXG59KVxuXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlciJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "commodity.js"
      ],
      "names": [
        "express",
        "require",
        "Result",
        "create",
        "list",
        "update",
        "remove",
        "sort",
        "query",
        "increase",
        "UPLOAD_PATH",
        "fs",
        "router",
        "Router",
        "post",
        "req",
        "res",
        "console",
        "log",
        "body",
        "files",
        "oriPath",
        "id",
        "then",
        "result",
        "forEach",
        "val",
        "filename",
        "split",
        "pop",
        "unlink",
        "err",
        "success",
        "fail",
        "commodityID",
        "describe",
        "name",
        "isRemoved",
        "price",
        "show",
        "className",
        "class",
        "staffID",
        "staff",
        "toString",
        "length",
        "data",
        "answer",
        "get",
        "module",
        "exports"
      ],
      "mappings": "AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AACA,MAAMC,MAAM,GAAGD,OAAO,CAAC,kBAAD,CAAtB;;AACA,MAAM;AAAEE,EAAAA,MAAF;AAAUC,EAAAA,IAAV;AAAgBC,EAAAA,MAAhB;AAAwBC,EAAAA,MAAxB;AAAgCC,EAAAA,IAAhC;AAAsCC,EAAAA;AAAtC,IAAgDP,OAAO,CAAC,sBAAD,CAA7D;;AACA,MAAM;AAAEQ,EAAAA;AAAF,IAAeR,OAAO,CAAC,wBAAD,CAA5B;;AACA,MAAM;AAAES,EAAAA;AAAF,IAAkBT,OAAO,CAAC,mBAAD,CAA/B;;AACA,MAAMU,EAAE,GAAGV,OAAO,CAAC,IAAD,CAAlB;;AACA,MAAMW,MAAM,GAAGZ,OAAO,CAACa,MAAR,EAAf;AAEAD,MAAM,CAACE,IAAP,CAAY,SAAZ,EAAuB,CAACC,GAAD,EAAMC,GAAN,KAAc;AACnCC,EAAAA,OAAO,CAACC,GAAR,CAAYH,GAAG,CAACI,IAAhB;AACA,QAAMC,KAAK,GAAGL,GAAG,CAACI,IAAJ,CAASC,KAAvB;AACA,QAAMC,OAAO,GAAI,GAAEX,WAAY,QAA/B;AACAJ,EAAAA,MAAM,CAACS,GAAG,CAACI,IAAJ,CAASG,EAAV,CAAN,CAAoBC,IAApB,CAAyBC,MAAM,IAAI;AACjC,QAAIA,MAAJ,EAAY;AACVJ,MAAAA,KAAK,CAACK,OAAN,CAAcC,GAAG,IAAI;AACnB,cAAMC,QAAQ,GAAGD,GAAG,CAACE,KAAJ,CAAU,GAAV,EAAeC,GAAf,EAAjB;AACAlB,QAAAA,EAAE,CAACmB,MAAH,CAAUT,OAAO,GAAGM,QAApB,EAA8B,UAAUI,GAAV,EAAe;AAC3C,cAAIA,GAAJ,EAAS;AAAE,kBAAMA,GAAN;AAAW;AACvB,SAFD;AAGD,OALD;AAMA,UAAI7B,MAAJ,CAAW,QAAX,EAAqB8B,OAArB,CAA6BhB,GAA7B;AACD,KARD,MAQO;AACL,UAAId,MAAJ,CAAW,QAAX,EAAqB+B,IAArB,CAA0BjB,GAA1B;AACD;AACF,GAZD;AAaD,CAjBD;AAmBAJ,MAAM,CAACE,IAAP,CAAY,SAAZ,EAAuB,CAACC,GAAD,EAAMC,GAAN,KAAc;AACnC,QAAM;AAAEkB,IAAAA,WAAF;AAAeC,IAAAA,QAAf;AAAyBC,IAAAA,IAAzB;AAA+BC,IAAAA,SAA/B;AAA0CC,IAAAA,KAA1C;AAAiDC,IAAAA;AAAjD,MAA0DxB,GAAG,CAACI,IAApE;AACA,QAAMqB,SAAS,GAAGzB,GAAG,CAACI,IAAJ,CAASsB,KAA3B;AACA,QAAMC,OAAO,GAAG3B,GAAG,CAACI,IAAJ,CAASwB,KAAT,CAAeC,QAAf,EAAhB;AACA,QAAMvB,OAAO,GAAI,GAAEX,WAAY,QAA/B;AACAL,EAAAA,MAAM,CAAC6B,WAAD,EAAcE,IAAd,EAAoBI,SAApB,EAA+BF,KAA/B,EAAsCC,IAAtC,EAA4CJ,QAA5C,EAAsDO,OAAtD,CAAN,CAAqEnB,IAArE,CAA0EC,MAAM,IAAI;AAClF,QAAIA,MAAJ,EAAY;AACV,UAAItB,MAAJ,CAAW,QAAX,EAAqB8B,OAArB,CAA6BhB,GAA7B;;AACA,UAAIqB,SAAS,CAACQ,MAAV,KAAqB,CAAzB,EAA4B;AAC1BR,QAAAA,SAAS,CAACZ,OAAV,CAAkBC,GAAG,IAAI;AACvBf,UAAAA,EAAE,CAACmB,MAAH,CAAUT,OAAO,GAAGK,GAApB,EAAyB,UAAUK,GAAV,EAAe;AACtC,gBAAIA,GAAJ,EAAS;AAAEd,cAAAA,OAAO,CAACC,GAAR,CAAYa,GAAZ;AAAkB;AAC9B,WAFD;AAGD,SAJD;AAKD;AACF,KATD,MASO;AACL,UAAI7B,MAAJ,CAAW,QAAX,EAAqB+B,IAArB,CAA0BjB,GAA1B;AACD;AACF,GAbD;AAcD,CAnBD;AAqBAJ,MAAM,CAACE,IAAP,CAAY,SAAZ,EAAuB,CAACC,GAAD,EAAMC,GAAN,KAAc;AACnC,QAAM;AAAEoB,IAAAA,IAAF;AAAQE,IAAAA,KAAR;AAAeH,IAAAA;AAAf,MAA4BpB,GAAG,CAACI,IAAtC;AACA,QAAMqB,SAAS,GAAGzB,GAAG,CAACI,IAAJ,CAASsB,KAA3B;AACA,QAAMF,IAAI,GAAGxB,GAAG,CAACI,IAAJ,CAASoB,IAAT,CAAcK,QAAd,EAAb;AACA,QAAMF,OAAO,GAAG3B,GAAG,CAACI,IAAJ,CAASwB,KAAT,CAAeC,QAAf,EAAhB;AACAxC,EAAAA,IAAI,GAAGmB,IAAP,CAAYC,MAAM,IAAI;AACpB,UAAMsB,IAAI,GAAG,IAAI5C,MAAJ,CAAWsB,MAAX,EAAmB,MAAnB,EAA2BsB,IAAxC;AACA3C,IAAAA,MAAM,CAACM,QAAQ,CAACqC,IAAD,EAAO,aAAP,CAAT,EAAgCV,IAAhC,EAAsCI,SAAtC,EAAiDF,KAAjD,EAAwDC,IAAxD,EAA8DJ,QAA9D,EAAwEO,OAAxE,CAAN,CAAuFnB,IAAvF,CAA4FwB,MAAM,IAAI;AACpG,UAAIA,MAAJ,EAAY;AACV,YAAI7C,MAAJ,CAAW,QAAX,EAAqB8B,OAArB,CAA6BhB,GAA7B;AACD,OAFD,MAEO;AACL,YAAId,MAAJ,CAAW,QAAX,EAAqB+B,IAArB,CAA0BjB,GAA1B;AACD;AACF,KAND;AAOD,GATD;AAUD,CAfD;AAiBAJ,MAAM,CAACE,IAAP,CAAY,OAAZ,EAAqB,CAACC,GAAD,EAAMC,GAAN,KAAc;AACjCT,EAAAA,IAAI,CAACQ,GAAG,CAACI,IAAJ,CAASqB,SAAV,CAAJ,CAAyBjB,IAAzB,CAA8BC,MAAM,IAAI;AACtC,QAAIA,MAAJ,EAAY;AACV,UAAItB,MAAJ,CAAWsB,MAAX,EAAmB,MAAnB,EAA2BQ,OAA3B,CAAmChB,GAAnC;AACD,KAFD,MAEO;AACL,UAAId,MAAJ,CAAW,MAAX,EAAmB+B,IAAnB,CAAwBjB,GAAxB;AACD;AACF,GAND;AAOD,CARD;AAUAJ,MAAM,CAACoC,GAAP,CAAW,OAAX,EAAoB,CAACjC,GAAD,EAAMC,GAAN,KAAc;AAChCZ,EAAAA,IAAI,GAAGmB,IAAP,CAAYC,MAAM,IAAI;AACpB,QAAIA,MAAJ,EAAY;AACV,UAAItB,MAAJ,CAAWsB,MAAX,EAAmB,MAAnB,EAA2BQ,OAA3B,CAAmChB,GAAnC;AACD,KAFD,MAEO;AACL,UAAId,MAAJ,CAAW,MAAX,EAAmB+B,IAAnB,CAAwBjB,GAAxB;AACD;AACF,GAND;AAOD,CARD;AAUAJ,MAAM,CAACE,IAAP,CAAY,QAAZ,EAAsB,CAACC,GAAD,EAAMC,GAAN,KAAc;AAClCR,EAAAA,KAAK,CAACO,GAAG,CAACI,IAAJ,CAASG,EAAV,CAAL,CAAmBC,IAAnB,CAAwBC,MAAM,IAAI;AAChC,QAAIA,MAAJ,EAAY;AACV,UAAItB,MAAJ,CAAWsB,MAAX,EAAmB,MAAnB,EAA2BQ,OAA3B,CAAmChB,GAAnC;AACD,KAFD,MAEO;AACL,UAAId,MAAJ,CAAW,MAAX,EAAmB+B,IAAnB,CAAwBjB,GAAxB;AACD;AACF,GAND;AAOD,CARD;AAUAiC,MAAM,CAACC,OAAP,GAAiBtC,MAAjB",
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\",
      "sourcesContent": [
        "const express = require('express')\nconst Result = require('../models/Result')\nconst { create, list, update, remove, sort, query } = require('../service/commodity')\nconst { increase } = require('../utils/auto-increase')\nconst { UPLOAD_PATH } = require('../utils/constant')\nconst fs = require('fs')\nconst router = express.Router()\n\nrouter.post('/remove', (req, res) => {\n  console.log(req.body)\n  const files = req.body.files\n  const oriPath = `${UPLOAD_PATH}/show/`\n  remove(req.body.id).then(result => {\n    if (result) {\n      files.forEach(val => {\n        const filename = val.split('/').pop()\n        fs.unlink(oriPath + filename, function (err) {\n          if (err) { throw err }\n        })\n      })\n      new Result('删除商品成功').success(res)\n    } else {\n      new Result('删除商品失败').fail(res)\n    }\n  })\n})\n\nrouter.post('/update', (req, res) => {\n  const { commodityID, describe, name, isRemoved, price, show } = req.body\n  const className = req.body.class\n  const staffID = req.body.staff.toString()\n  const oriPath = `${UPLOAD_PATH}/show/`\n  update(commodityID, name, className, price, show, describe, staffID).then(result => {\n    if (result) {\n      new Result('更新商品成功').success(res)\n      if (isRemoved.length !== 0) {\n        isRemoved.forEach(val => {\n          fs.unlink(oriPath + val, function (err) {\n            if (err) { console.log(err) }\n          })\n        })\n      }\n    } else {\n      new Result('更新商品失败').fail(res)\n    }\n  })\n})\n\nrouter.post('/create', (req, res) => {\n  const { name, price, describe } = req.body\n  const className = req.body.class\n  const show = req.body.show.toString()\n  const staffID = req.body.staff.toString()\n  list().then(result => {\n    const data = new Result(result, '查询成功').data\n    create(increase(data, 'commodityID'), name, className, price, show, describe, staffID).then(answer => {\n      if (answer) {\n        new Result('新增商品成功').success(res)\n      } else {\n        new Result('新增商品失败').fail(res)\n      }\n    })\n  })\n})\n\nrouter.post('/sort', (req, res) => {\n  sort(req.body.className).then(result => {\n    if (result) {\n      new Result(result, '查询成功').success(res)\n    } else {\n      new Result('查询失败').fail(res)\n    }\n  })\n})\n\nrouter.get('/list', (req, res) => {\n  list().then(result => {\n    if (result) {\n      new Result(result, '查询成功').success(res)\n    } else {\n      new Result('查询失败').fail(res)\n    }\n  })\n})\n\nrouter.post('/query', (req, res) => {\n  query(req.body.id).then(result => {\n    if (result) {\n      new Result(result, '查询成功').success(res)\n    } else {\n      new Result('查询失败').fail(res)\n    }\n  })\n})\n\nmodule.exports = router"
      ]
    },
    "sourceType": "module",
    "mtime": 1588753440678
  },
  "{\"sourceRoot\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\service\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"filename\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\service\\\\commodity.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"plugins\":[],\"presets\":[]}:7.9.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "G:\\Project\\Web\\git\\household-service-server",
      "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\commodity.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "G:\\Project\\Web\\git\\household-service-server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\commodity.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\commodity.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\",
        "sourceFileName": "commodity.js"
      }
    },
    "ast": null,
    "code": "const {\n  querySql\n} = require('../mysql');\n\nfunction create(commodityID, name, className, price, show, describe, staffID) {\n  const sql = `insert into commodity(commodityID,\\`name\\`,className,price,\\`show\\`,\\`describe\\`,staffID) \n  values('${commodityID}','${name}','${className}','${price}','${show}','${describe}','${staffID}')`;\n  return querySql(sql);\n}\n\nfunction list() {\n  const sql = 'select * from commodity';\n  return querySql(sql);\n}\n\nfunction sort(className) {\n  const sql = `select * from commodity where className='${className}'`;\n  return querySql(sql);\n}\n\nfunction remove(commodityID) {\n  const sql = `DELETE FROM commodity WHERE commodityID='${commodityID}'`;\n  return querySql(sql);\n}\n\nfunction query(id) {\n  const sql = `select * from commodity where commodityID='${id}'`;\n  return querySql(sql);\n}\n\nfunction update(commodityID, name, className, price, show, describe, staffID) {\n  const sql = `update commodity set \n    \\`name\\`='${name}', className='${className}', price='${price}', \\`describe\\`='${describe}', staffID='${staffID}',\\`show\\`='${show.toString()}'\n    where commodityID='${commodityID}'`;\n  return querySql(sql);\n}\n\nmodule.exports = {\n  create,\n  list,\n  remove,\n  update,\n  sort,\n  query\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vZGl0eS5qcyJdLCJuYW1lcyI6WyJxdWVyeVNxbCIsInJlcXVpcmUiLCJjcmVhdGUiLCJjb21tb2RpdHlJRCIsIm5hbWUiLCJjbGFzc05hbWUiLCJwcmljZSIsInNob3ciLCJkZXNjcmliZSIsInN0YWZmSUQiLCJzcWwiLCJsaXN0Iiwic29ydCIsInJlbW92ZSIsInF1ZXJ5IiwiaWQiLCJ1cGRhdGUiLCJ0b1N0cmluZyIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU07QUFBRUEsRUFBQUE7QUFBRixJQUFlQyxPQUFPLENBQUMsVUFBRCxDQUE1Qjs7QUFFQSxTQUFTQyxNQUFULENBQWdCQyxXQUFoQixFQUE2QkMsSUFBN0IsRUFBbUNDLFNBQW5DLEVBQThDQyxLQUE5QyxFQUFxREMsSUFBckQsRUFBMkRDLFFBQTNELEVBQXFFQyxPQUFyRSxFQUE4RTtBQUM1RSxRQUFNQyxHQUFHLEdBQUk7WUFDSFAsV0FBWSxNQUFLQyxJQUFLLE1BQUtDLFNBQVUsTUFBS0MsS0FBTSxNQUFLQyxJQUFLLE1BQUtDLFFBQVMsTUFBS0MsT0FBUSxJQUQvRjtBQUVBLFNBQU9ULFFBQVEsQ0FBQ1UsR0FBRCxDQUFmO0FBQ0Q7O0FBRUQsU0FBU0MsSUFBVCxHQUFnQjtBQUNkLFFBQU1ELEdBQUcsR0FBRyx5QkFBWjtBQUNBLFNBQU9WLFFBQVEsQ0FBQ1UsR0FBRCxDQUFmO0FBQ0Q7O0FBRUQsU0FBU0UsSUFBVCxDQUFjUCxTQUFkLEVBQXlCO0FBQ3ZCLFFBQU1LLEdBQUcsR0FBSSw0Q0FBMkNMLFNBQVUsR0FBbEU7QUFDQSxTQUFPTCxRQUFRLENBQUNVLEdBQUQsQ0FBZjtBQUNEOztBQUVELFNBQVNHLE1BQVQsQ0FBZ0JWLFdBQWhCLEVBQTZCO0FBQzNCLFFBQU1PLEdBQUcsR0FBSSw0Q0FBMkNQLFdBQVksR0FBcEU7QUFDQSxTQUFPSCxRQUFRLENBQUNVLEdBQUQsQ0FBZjtBQUNEOztBQUVELFNBQVNJLEtBQVQsQ0FBZUMsRUFBZixFQUFtQjtBQUNqQixRQUFNTCxHQUFHLEdBQUksOENBQTZDSyxFQUFHLEdBQTdEO0FBQ0EsU0FBT2YsUUFBUSxDQUFDVSxHQUFELENBQWY7QUFDRDs7QUFFRCxTQUFTTSxNQUFULENBQWdCYixXQUFoQixFQUE2QkMsSUFBN0IsRUFBbUNDLFNBQW5DLEVBQThDQyxLQUE5QyxFQUFxREMsSUFBckQsRUFBMkRDLFFBQTNELEVBQXFFQyxPQUFyRSxFQUE4RTtBQUM1RSxRQUFNQyxHQUFHLEdBQUk7Z0JBQ0NOLElBQUssaUJBQWdCQyxTQUFVLGFBQVlDLEtBQU0sb0JBQW1CRSxRQUFTLGVBQWNDLE9BQVEsZUFBY0YsSUFBSSxDQUFDVSxRQUFMLEVBQWdCO3lCQUN4SGQsV0FBWSxHQUZuQztBQUdBLFNBQU9ILFFBQVEsQ0FBQ1UsR0FBRCxDQUFmO0FBQ0Q7O0FBRURRLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQjtBQUNmakIsRUFBQUEsTUFEZTtBQUNQUyxFQUFBQSxJQURPO0FBQ0RFLEVBQUFBLE1BREM7QUFDT0csRUFBQUEsTUFEUDtBQUNlSixFQUFBQSxJQURmO0FBQ3FCRSxFQUFBQTtBQURyQixDQUFqQiIsInNvdXJjZVJvb3QiOiJHOlxcUHJvamVjdFxcV2ViXFxnaXRcXGhvdXNlaG9sZC1zZXJ2aWNlLXNlcnZlclxcc3JjXFxzZXJ2aWNlXFwiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IHF1ZXJ5U3FsIH0gPSByZXF1aXJlKCcuLi9teXNxbCcpO1xuXG5mdW5jdGlvbiBjcmVhdGUoY29tbW9kaXR5SUQsIG5hbWUsIGNsYXNzTmFtZSwgcHJpY2UsIHNob3csIGRlc2NyaWJlLCBzdGFmZklEKSB7XG4gIGNvbnN0IHNxbCA9IGBpbnNlcnQgaW50byBjb21tb2RpdHkoY29tbW9kaXR5SUQsXFxgbmFtZVxcYCxjbGFzc05hbWUscHJpY2UsXFxgc2hvd1xcYCxcXGBkZXNjcmliZVxcYCxzdGFmZklEKSBcbiAgdmFsdWVzKCcke2NvbW1vZGl0eUlEfScsJyR7bmFtZX0nLCcke2NsYXNzTmFtZX0nLCcke3ByaWNlfScsJyR7c2hvd30nLCcke2Rlc2NyaWJlfScsJyR7c3RhZmZJRH0nKWBcbiAgcmV0dXJuIHF1ZXJ5U3FsKHNxbClcbn1cblxuZnVuY3Rpb24gbGlzdCgpIHtcbiAgY29uc3Qgc3FsID0gJ3NlbGVjdCAqIGZyb20gY29tbW9kaXR5J1xuICByZXR1cm4gcXVlcnlTcWwoc3FsKVxufVxuXG5mdW5jdGlvbiBzb3J0KGNsYXNzTmFtZSkge1xuICBjb25zdCBzcWwgPSBgc2VsZWN0ICogZnJvbSBjb21tb2RpdHkgd2hlcmUgY2xhc3NOYW1lPScke2NsYXNzTmFtZX0nYFxuICByZXR1cm4gcXVlcnlTcWwoc3FsKVxufVxuXG5mdW5jdGlvbiByZW1vdmUoY29tbW9kaXR5SUQpIHtcbiAgY29uc3Qgc3FsID0gYERFTEVURSBGUk9NIGNvbW1vZGl0eSBXSEVSRSBjb21tb2RpdHlJRD0nJHtjb21tb2RpdHlJRH0nYFxuICByZXR1cm4gcXVlcnlTcWwoc3FsKVxufVxuXG5mdW5jdGlvbiBxdWVyeShpZCkge1xuICBjb25zdCBzcWwgPSBgc2VsZWN0ICogZnJvbSBjb21tb2RpdHkgd2hlcmUgY29tbW9kaXR5SUQ9JyR7aWR9J2BcbiAgcmV0dXJuIHF1ZXJ5U3FsKHNxbClcbn1cblxuZnVuY3Rpb24gdXBkYXRlKGNvbW1vZGl0eUlELCBuYW1lLCBjbGFzc05hbWUsIHByaWNlLCBzaG93LCBkZXNjcmliZSwgc3RhZmZJRCkge1xuICBjb25zdCBzcWwgPSBgdXBkYXRlIGNvbW1vZGl0eSBzZXQgXG4gICAgXFxgbmFtZVxcYD0nJHtuYW1lfScsIGNsYXNzTmFtZT0nJHtjbGFzc05hbWV9JywgcHJpY2U9JyR7cHJpY2V9JywgXFxgZGVzY3JpYmVcXGA9JyR7ZGVzY3JpYmV9Jywgc3RhZmZJRD0nJHtzdGFmZklEfScsXFxgc2hvd1xcYD0nJHtzaG93LnRvU3RyaW5nKCl9J1xuICAgIHdoZXJlIGNvbW1vZGl0eUlEPScke2NvbW1vZGl0eUlEfSdgXG4gIHJldHVybiBxdWVyeVNxbChzcWwpXG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBjcmVhdGUsIGxpc3QsIHJlbW92ZSwgdXBkYXRlLCBzb3J0LCBxdWVyeVxufSJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "commodity.js"
      ],
      "names": [
        "querySql",
        "require",
        "create",
        "commodityID",
        "name",
        "className",
        "price",
        "show",
        "describe",
        "staffID",
        "sql",
        "list",
        "sort",
        "remove",
        "query",
        "id",
        "update",
        "toString",
        "module",
        "exports"
      ],
      "mappings": "AAAA,MAAM;AAAEA,EAAAA;AAAF,IAAeC,OAAO,CAAC,UAAD,CAA5B;;AAEA,SAASC,MAAT,CAAgBC,WAAhB,EAA6BC,IAA7B,EAAmCC,SAAnC,EAA8CC,KAA9C,EAAqDC,IAArD,EAA2DC,QAA3D,EAAqEC,OAArE,EAA8E;AAC5E,QAAMC,GAAG,GAAI;YACHP,WAAY,MAAKC,IAAK,MAAKC,SAAU,MAAKC,KAAM,MAAKC,IAAK,MAAKC,QAAS,MAAKC,OAAQ,IAD/F;AAEA,SAAOT,QAAQ,CAACU,GAAD,CAAf;AACD;;AAED,SAASC,IAAT,GAAgB;AACd,QAAMD,GAAG,GAAG,yBAAZ;AACA,SAAOV,QAAQ,CAACU,GAAD,CAAf;AACD;;AAED,SAASE,IAAT,CAAcP,SAAd,EAAyB;AACvB,QAAMK,GAAG,GAAI,4CAA2CL,SAAU,GAAlE;AACA,SAAOL,QAAQ,CAACU,GAAD,CAAf;AACD;;AAED,SAASG,MAAT,CAAgBV,WAAhB,EAA6B;AAC3B,QAAMO,GAAG,GAAI,4CAA2CP,WAAY,GAApE;AACA,SAAOH,QAAQ,CAACU,GAAD,CAAf;AACD;;AAED,SAASI,KAAT,CAAeC,EAAf,EAAmB;AACjB,QAAML,GAAG,GAAI,8CAA6CK,EAAG,GAA7D;AACA,SAAOf,QAAQ,CAACU,GAAD,CAAf;AACD;;AAED,SAASM,MAAT,CAAgBb,WAAhB,EAA6BC,IAA7B,EAAmCC,SAAnC,EAA8CC,KAA9C,EAAqDC,IAArD,EAA2DC,QAA3D,EAAqEC,OAArE,EAA8E;AAC5E,QAAMC,GAAG,GAAI;gBACCN,IAAK,iBAAgBC,SAAU,aAAYC,KAAM,oBAAmBE,QAAS,eAAcC,OAAQ,eAAcF,IAAI,CAACU,QAAL,EAAgB;yBACxHd,WAAY,GAFnC;AAGA,SAAOH,QAAQ,CAACU,GAAD,CAAf;AACD;;AAEDQ,MAAM,CAACC,OAAP,GAAiB;AACfjB,EAAAA,MADe;AACPS,EAAAA,IADO;AACDE,EAAAA,MADC;AACOG,EAAAA,MADP;AACeJ,EAAAA,IADf;AACqBE,EAAAA;AADrB,CAAjB",
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\",
      "sourcesContent": [
        "const { querySql } = require('../mysql');\n\nfunction create(commodityID, name, className, price, show, describe, staffID) {\n  const sql = `insert into commodity(commodityID,\\`name\\`,className,price,\\`show\\`,\\`describe\\`,staffID) \n  values('${commodityID}','${name}','${className}','${price}','${show}','${describe}','${staffID}')`\n  return querySql(sql)\n}\n\nfunction list() {\n  const sql = 'select * from commodity'\n  return querySql(sql)\n}\n\nfunction sort(className) {\n  const sql = `select * from commodity where className='${className}'`\n  return querySql(sql)\n}\n\nfunction remove(commodityID) {\n  const sql = `DELETE FROM commodity WHERE commodityID='${commodityID}'`\n  return querySql(sql)\n}\n\nfunction query(id) {\n  const sql = `select * from commodity where commodityID='${id}'`\n  return querySql(sql)\n}\n\nfunction update(commodityID, name, className, price, show, describe, staffID) {\n  const sql = `update commodity set \n    \\`name\\`='${name}', className='${className}', price='${price}', \\`describe\\`='${describe}', staffID='${staffID}',\\`show\\`='${show.toString()}'\n    where commodityID='${commodityID}'`\n  return querySql(sql)\n}\n\nmodule.exports = {\n  create, list, remove, update, sort, query\n}"
      ]
    },
    "sourceType": "module",
    "mtime": 1588753459513
  },
  "{\"sourceRoot\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\router\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"filename\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\router\\\\promotion.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"plugins\":[],\"presets\":[]}:7.9.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "G:\\Project\\Web\\git\\household-service-server",
      "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\promotion.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "G:\\Project\\Web\\git\\household-service-server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\promotion.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\promotion.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\",
        "sourceFileName": "promotion.js"
      }
    },
    "ast": null,
    "code": "const express = require('express');\n\nconst Result = require('../models/Result');\n\nconst {\n  create,\n  list,\n  update,\n  remove,\n  query\n} = require('../service/promotion');\n\nconst {\n  increase\n} = require('../utils/auto-increase');\n\nconst {\n  SOURCE_PATH,\n  UPLOAD_PATH\n} = require('../utils/constant');\n\nconst fs = require('fs');\n\nconst router = express.Router();\nrouter.post('/replace', (req, res) => {\n  const filePath = UPLOAD_PATH + '/poster/' + req.body.url;\n  fs.unlink(filePath, function (err) {\n    if (err) {\n      console.log(err);\n      new Result('移除失败').fail(res);\n    } else {\n      new Result('移除成功').success(res);\n    }\n  });\n});\nrouter.post('/create', (req, res) => {\n  const {\n    promotionName,\n    commodityID,\n    promotionPrice,\n    describe\n  } = req.body;\n  const poster = SOURCE_PATH + '/poster/' + req.body.poster;\n  list().then(result => {\n    let data = new Result(result, '查询成功').data;\n    create(increase(data, 'promotionID'), promotionName, commodityID, poster, promotionPrice, describe).then(result => {\n      if (result) {\n        new Result('申请成功').success(res);\n      } else {\n        new Result('申请失败').fail(res);\n      }\n    });\n  });\n});\nrouter.post('/update', (req, res) => {\n  const {\n    id,\n    status\n  } = req.body;\n  update(id, status).then(result => {\n    if (result) {\n      new Result('更新成功').success(res);\n    } else {\n      new Result('更新失败').fail(res);\n    }\n  });\n});\nrouter.post('/remove', (req, res) => {\n  remove(req.body.id).then(result => {\n    if (result) {\n      new Result('移除成功').success(res);\n    } else {\n      new Result('移除失败').fail(res);\n    }\n  });\n});\nrouter.get('/list', (req, res) => {\n  list().then(result => {\n    if (result) {\n      new Result(result, '查询成功').success(res);\n    } else {\n      new Result('申请失败').fail(res);\n    }\n  });\n});\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb21vdGlvbi5qcyJdLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsIlJlc3VsdCIsImNyZWF0ZSIsImxpc3QiLCJ1cGRhdGUiLCJyZW1vdmUiLCJxdWVyeSIsImluY3JlYXNlIiwiU09VUkNFX1BBVEgiLCJVUExPQURfUEFUSCIsImZzIiwicm91dGVyIiwiUm91dGVyIiwicG9zdCIsInJlcSIsInJlcyIsImZpbGVQYXRoIiwiYm9keSIsInVybCIsInVubGluayIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJmYWlsIiwic3VjY2VzcyIsInByb21vdGlvbk5hbWUiLCJjb21tb2RpdHlJRCIsInByb21vdGlvblByaWNlIiwiZGVzY3JpYmUiLCJwb3N0ZXIiLCJ0aGVuIiwicmVzdWx0IiwiZGF0YSIsImlkIiwic3RhdHVzIiwiZ2V0IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBRCxDQUF2Qjs7QUFDQSxNQUFNQyxNQUFNLEdBQUdELE9BQU8sQ0FBQyxrQkFBRCxDQUF0Qjs7QUFDQSxNQUFNO0FBQUVFLEVBQUFBLE1BQUY7QUFBVUMsRUFBQUEsSUFBVjtBQUFnQkMsRUFBQUEsTUFBaEI7QUFBd0JDLEVBQUFBLE1BQXhCO0FBQWdDQyxFQUFBQTtBQUFoQyxJQUEwQ04sT0FBTyxDQUFDLHNCQUFELENBQXZEOztBQUNBLE1BQU07QUFBRU8sRUFBQUE7QUFBRixJQUFlUCxPQUFPLENBQUMsd0JBQUQsQ0FBNUI7O0FBQ0EsTUFBTTtBQUFFUSxFQUFBQSxXQUFGO0FBQWVDLEVBQUFBO0FBQWYsSUFBK0JULE9BQU8sQ0FBQyxtQkFBRCxDQUE1Qzs7QUFDQSxNQUFNVSxFQUFFLEdBQUdWLE9BQU8sQ0FBQyxJQUFELENBQWxCOztBQUVBLE1BQU1XLE1BQU0sR0FBR1osT0FBTyxDQUFDYSxNQUFSLEVBQWY7QUFFQUQsTUFBTSxDQUFDRSxJQUFQLENBQVksVUFBWixFQUF3QixDQUFDQyxHQUFE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QUNyQixHQUFELEVBQU1DLEdBQU4sS0FBYztBQUNoQ1osRUFBQUEsSUFBSSxHQUFHMkIsSUFBUCxDQUFZQyxNQUFNLElBQUk7QUFDcEIsUUFBSUEsTUFBSixFQUFZO0FBQ1YsVUFBSTlCLE1BQUosQ0FBVzhCLE1BQVgsRUFBbUIsTUFBbkIsRUFBMkJQLE9BQTNCLENBQW1DVCxHQUFuQztBQUNELEtBRkQsTUFFTztBQUNMLFVBQUlkLE1BQUosQ0FBVyxNQUFYLEVBQW1Cc0IsSUFBbkIsQ0FBd0JSLEdBQXhCO0FBQ0Q7QUFDRixHQU5EO0FBUUQsQ0FURDtBQVdBcUIsTUFBTSxDQUFDQyxPQUFQLEdBQWlCMUIsTUFBakIiLCJzb3VyY2VSb290IjoiRzpcXFByb2plY3RcXFdlYlxcZ2l0XFxob3VzZWhvbGQtc2VydmljZS1zZXJ2ZXJcXHNyY1xccm91dGVyXFwiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpXG5jb25zdCBSZXN1bHQgPSByZXF1aXJlKCcuLi9tb2RlbHMvUmVzdWx0JylcbmNvbnN0IHsgY3JlYXRlLCBsaXN0LCB1cGRhdGUsIHJlbW92ZSwgcXVlcnkgfSA9IHJlcXVpcmUoJy4uL3NlcnZpY2UvcHJvbW90aW9uJylcbmNvbnN0IHsgaW5jcmVhc2UgfSA9IHJlcXVpcmUoJy4uL3V0aWxzL2F1dG8taW5jcmVhc2UnKVxuY29uc3QgeyBTT1VSQ0VfUEFUSCwgVVBMT0FEX1BBVEggfSA9IHJlcXVpcmUoJy4uL3V0aWxzL2NvbnN0YW50JylcbmNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKVxuXG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpXG5cbnJvdXRlci5wb3N0KCcvcmVwbGFjZScsIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCBmaWxlUGF0aCA9IFVQTE9BRF9QQVRIICsgJy9wb3N0ZXIvJyArIHJlcS5ib2R5LnVybFxuICBmcy51bmxpbmsoZmlsZVBhdGgsIGZ1bmN0aW9uIChlcnIpIHtcbiAgICBpZiAoZXJyKSB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICBuZXcgUmVzdWx0KCfnp7vpmaTlpLHotKUnKS5mYWlsKHJlcylcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBuZXcgUmVzdWx0KCfnp7vpmaTmiJDlip8nKS5zdWNjZXNzKHJlcylcbiAgICB9XG4gIH0pXG59KVxuXG5yb3V0ZXIucG9zdCgnL2NyZWF0ZScsIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCB7IHByb21vdGlvbk5hbWUsIGNvbW1vZGl0eUlELCBwcm9tb3Rpb25QcmljZSwgZGVzY3JpYmUgfSA9IHJlcS5ib2R5XG4gIGNvbnN0IHBvc3RlciA9IFNPVVJDRV9QQVRIICsgJy9wb3N0ZXIvJyArIHJlcS5ib2R5LnBvc3RlclxuICBsaXN0KCkudGhlbihyZXN1bHQgPT4ge1xuICAgIGxldCBkYXRhID0gbmV3IFJlc3VsdChyZXN1bHQsICfmn6Xor6LmiJDlip8nKS5kYXRhXG4gICAgY3JlYXRlKGluY3JlYXNlKGRhdGEsICdwcm9tb3Rpb25JRCcpLCBwcm9tb3Rpb25OYW1lLCBjb21tb2RpdHlJRCwgcG9zdGVyLCBwcm9tb3Rpb25QcmljZSwgZGVzY3JpYmUpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgbmV3IFJlc3VsdCgn55Sz6K+35oiQ5YqfJykuc3VjY2VzcyhyZXMpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgUmVzdWx0KCfnlLPor7flpLHotKUnKS5mYWlsKHJlcylcbiAgICAgIH1cbiAgICB9KVxuICB9KVxufSlcblxucm91dGVyLnBvc3QoJy91cGRhdGUnLCAocmVxLHJlcyk9PiB7XG4gIGNvbnN0IHsgaWQsIHN0YXR1cyB9ID0gcmVxLmJvZHlcbiAgdXBkYXRlKGlkLCBzdGF0dXMpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICBpZiAocmVzdWx0KSB7XG4gICAgICBuZXcgUmVzdWx0KCfmm7TmlrDmiJDlip8nKS5zdWNjZXNzKHJlcylcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3IFJlc3VsdCgn5pu05paw5aSx6LSlJykuZmFpbChyZXMpXG4gICAgfVxuICB9KVxufSlcblxucm91dGVyLnBvc3QoJy9yZW1vdmUnLChyZXEscmVzKT0+e1xuICByZW1vdmUocmVxLmJvZHkuaWQpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICBpZiAocmVzdWx0KSB7XG4gICAgICBuZXcgUmVzdWx0KCfnp7vpmaTmiJDlip8nKS5zdWNjZXNzKHJlcylcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3IFJlc3VsdCgn56e76Zmk5aSx6LSlJykuZmFpbChyZXMpXG4gICAgfVxuICB9KVxufSlcblxucm91dGVyLmdldCgnL2xpc3QnLCAocmVxLCByZXMpID0+IHtcbiAgbGlzdCgpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICBpZiAocmVzdWx0KSB7XG4gICAgICBuZXcgUmVzdWx0KHJlc3VsdCwgJ+afpeivouaIkOWKnycpLnN1Y2Nlc3MocmVzKVxuICAgIH0gZWxzZSB7XG4gICAgICBuZXcgUmVzdWx0KCfnlLPor7flpLHotKUnKS5mYWlsKHJlcylcbiAgICB9XG4gIH0pXG5cbn0pXG5cbm1vZHVsZS5leHBvcnRzID0gcm91dGVyIl19",
    "map": {
      "version": 3,
      "sources": [
        "promotion.js"
      ],
      "names": [
        "express",
        "require",
        "Result",
        "create",
        "list",
        "update",
        "remove",
        "query",
        "increase",
        "SOURCE_PATH",
        "UPLOAD_PATH",
        "fs",
        "router",
        "Router",
        "post",
        "req",
        "res",
        "filePath",
        "body",
        "url",
        "unlink",
        "err",
        "console",
        "log",
        "fail",
        "success",
        "promotionName",
        "commodityID",
        "promotionPrice",
        "describe",
        "poster",
        "then",
        "result",
        "data",
        "id",
        "status",
        "get",
        "module",
        "exports"
      ],
      "mappings": "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",
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\",
      "sourcesContent": [
        "const express = require('express')\nconst Result = require('../models/Result')\nconst { create, list, update, remove, query } = require('../service/promotion')\nconst { increase } = require('../utils/auto-increase')\nconst { SOURCE_PATH, UPLOAD_PATH } = require('../utils/constant')\nconst fs = require('fs')\n\nconst router = express.Router()\n\nrouter.post('/replace', (req, res) => {\n  const filePath = UPLOAD_PATH + '/poster/' + req.body.url\n  fs.unlink(filePath, function (err) {\n    if (err) {\n      console.log(err)\n      new Result('移除失败').fail(res)\n    }\n    else {\n      new Result('移除成功').success(res)\n    }\n  })\n})\n\nrouter.post('/create', (req, res) => {\n  const { promotionName, commodityID, promotionPrice, describe } = req.body\n  const poster = SOURCE_PATH + '/poster/' + req.body.poster\n  list().then(result => {\n    let data = new Result(result, '查询成功').data\n    create(increase(data, 'promotionID'), promotionName, commodityID, poster, promotionPrice, describe).then(result => {\n      if (result) {\n        new Result('申请成功').success(res)\n      } else {\n        new Result('申请失败').fail(res)\n      }\n    })\n  })\n})\n\nrouter.post('/update', (req,res)=> {\n  const { id, status } = req.body\n  update(id, status).then(result => {\n    if (result) {\n      new Result('更新成功').success(res)\n    } else {\n      new Result('更新失败').fail(res)\n    }\n  })\n})\n\nrouter.post('/remove',(req,res)=>{\n  remove(req.body.id).then(result => {\n    if (result) {\n      new Result('移除成功').success(res)\n    } else {\n      new Result('移除失败').fail(res)\n    }\n  })\n})\n\nrouter.get('/list', (req, res) => {\n  list().then(result => {\n    if (result) {\n      new Result(result, '查询成功').success(res)\n    } else {\n      new Result('申请失败').fail(res)\n    }\n  })\n\n})\n\nmodule.exports = router"
      ]
    },
    "sourceType": "module",
    "mtime": 1588563006846
  },
  "{\"sourceRoot\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\service\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"filename\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\service\\\\promotion.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"plugins\":[],\"presets\":[]}:7.9.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "G:\\Project\\Web\\git\\household-service-server",
      "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\promotion.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "G:\\Project\\Web\\git\\household-service-server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\promotion.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\promotion.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\",
        "sourceFileName": "promotion.js"
      }
    },
    "ast": null,
    "code": "const {\n  querySql\n} = require('../mysql');\n\nfunction create(promotionID, promotionName, commodityID, poster, promotionPrice, describe) {\n  const sql = `insert into promotion(promotionID,promotionName,commodityID,poster,promotionPrice,\\`describe\\`,status) \n  values('${promotionID}','${promotionName}','${commodityID}','${poster}','${promotionPrice}','${describe}','待审核')`;\n  return querySql(sql);\n}\n\nfunction list() {\n  const sql = `select * from promotion`;\n  return querySql(sql);\n}\n\nfunction update(id, status) {\n  const sql = `update promotion set status='${status}' where promotionID='${id}'`;\n  return querySql(sql);\n}\n\nfunction remove(id) {\n  const sql = `delete from promotion where promotionID='${id}'`;\n  return querySql(sql);\n}\n\nmodule.exports = {\n  create,\n  list,\n  update,\n  remove\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb21vdGlvbi5qcyJdLCJuYW1lcyI6WyJxdWVyeVNxbCIsInJlcXVpcmUiLCJjcmVhdGUiLCJwcm9tb3Rpb25JRCIsInByb21vdGlvbk5hbWUiLCJjb21tb2RpdHlJRCIsInBvc3RlciIsInByb21vdGlvblByaWNlIiwiZGVzY3JpYmUiLCJzcWwiLCJsaXN0IiwidXBkYXRlIiwiaWQiLCJzdGF0dXMiLCJyZW1vdmUiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNO0FBQUVBLEVBQUFBO0FBQUYsSUFBZUMsT0FBTyxDQUFDLFVBQUQsQ0FBNUI7O0FBRUEsU0FBU0MsTUFBVCxDQUFnQkMsV0FBaEIsRUFBNkJDLGFBQTdCLEVBQTRDQyxXQUE1QyxFQUF5REMsTUFBekQsRUFBaUVDLGNBQWpFLEVBQWlGQyxRQUFqRixFQUEyRjtBQUN6RixRQUFNQyxHQUFHLEdBQUk7WUFDSE4sV0FBWSxNQUFLQyxhQUFjLE1BQUtDLFdBQVksTUFBS0MsTUFBTyxNQUFLQyxjQUFlLE1BQUtDLFFBQVMsVUFEeEc7QUFFQSxTQUFPUixRQUFRLENBQUNTLEdBQUQsQ0FBZjtBQUNEOztBQUVELFNBQVNDLElBQVQsR0FBZ0I7QUFDZCxRQUFNRCxHQUFHLEdBQUkseUJBQWI7QUFDQSxTQUFPVCxRQUFRLENBQUNTLEdBQUQsQ0FBZjtBQUNEOztBQUVELFNBQVNFLE1BQVQsQ0FBZ0JDLEVBQWhCLEVBQW9CQyxNQUFwQixFQUE0QjtBQUMxQixRQUFNSixHQUFHLEdBQUksZ0NBQStCSSxNQUFPLHdCQUF1QkQsRUFBRyxHQUE3RTtBQUNBLFNBQU9aLFFBQVEsQ0FBQ1MsR0FBRCxDQUFmO0FBQ0Q7O0FBRUQsU0FBU0ssTUFBVCxDQUFnQkYsRUFBaEIsRUFBb0I7QUFDbEIsUUFBTUgsR0FBRyxHQUFJLDRDQUEyQ0csRUFBRyxHQUEzRDtBQUNBLFNBQU9aLFFBQVEsQ0FBQ1MsR0FBRCxDQUFmO0FBQ0Q7O0FBRURNLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQjtBQUNmZCxFQUFBQSxNQURlO0FBQ1BRLEVBQUFBLElBRE87QUFDREMsRUFBQUEsTUFEQztBQUNPRyxFQUFBQTtBQURQLENBQWpCIiwic291cmNlUm9vdCI6Ikc6XFxQcm9qZWN0XFxXZWJcXGdpdFxcaG91c2Vob2xkLXNlcnZpY2Utc2VydmVyXFxzcmNcXHNlcnZpY2VcXCIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgcXVlcnlTcWwgfSA9IHJlcXVpcmUoJy4uL215c3FsJyk7XG5cbmZ1bmN0aW9uIGNyZWF0ZShwcm9tb3Rpb25JRCwgcHJvbW90aW9uTmFtZSwgY29tbW9kaXR5SUQsIHBvc3RlciwgcHJvbW90aW9uUHJpY2UsIGRlc2NyaWJlKSB7XG4gIGNvbnN0IHNxbCA9IGBpbnNlcnQgaW50byBwcm9tb3Rpb24ocHJvbW90aW9uSUQscHJvbW90aW9uTmFtZSxjb21tb2RpdHlJRCxwb3N0ZXIscHJvbW90aW9uUHJpY2UsXFxgZGVzY3JpYmVcXGAsc3RhdHVzKSBcbiAgdmFsdWVzKCcke3Byb21vdGlvbklEfScsJyR7cHJvbW90aW9uTmFtZX0nLCcke2NvbW1vZGl0eUlEfScsJyR7cG9zdGVyfScsJyR7cHJvbW90aW9uUHJpY2V9JywnJHtkZXNjcmliZX0nLCflvoXlrqHmoLgnKWBcbiAgcmV0dXJuIHF1ZXJ5U3FsKHNxbClcbn1cblxuZnVuY3Rpb24gbGlzdCgpIHtcbiAgY29uc3Qgc3FsID0gYHNlbGVjdCAqIGZyb20gcHJvbW90aW9uYFxuICByZXR1cm4gcXVlcnlTcWwoc3FsKVxufVxuXG5mdW5jdGlvbiB1cGRhdGUoaWQsIHN0YXR1cykge1xuICBjb25zdCBzcWwgPSBgdXBkYXRlIHByb21vdGlvbiBzZXQgc3RhdHVzPScke3N0YXR1c30nIHdoZXJlIHByb21vdGlvbklEPScke2lkfSdgXG4gIHJldHVybiBxdWVyeVNxbChzcWwpXG59XG5cbmZ1bmN0aW9uIHJlbW92ZShpZCkge1xuICBjb25zdCBzcWwgPSBgZGVsZXRlIGZyb20gcHJvbW90aW9uIHdoZXJlIHByb21vdGlvbklEPScke2lkfSdgXG4gIHJldHVybiBxdWVyeVNxbChzcWwpXG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBjcmVhdGUsIGxpc3QsIHVwZGF0ZSwgcmVtb3ZlXG59Il19",
    "map": {
      "version": 3,
      "sources": [
        "promotion.js"
      ],
      "names": [
        "querySql",
        "require",
        "create",
        "promotionID",
        "promotionName",
        "commodityID",
        "poster",
        "promotionPrice",
        "describe",
        "sql",
        "list",
        "update",
        "id",
        "status",
        "remove",
        "module",
        "exports"
      ],
      "mappings": "AAAA,MAAM;AAAEA,EAAAA;AAAF,IAAeC,OAAO,CAAC,UAAD,CAA5B;;AAEA,SAASC,MAAT,CAAgBC,WAAhB,EAA6BC,aAA7B,EAA4CC,WAA5C,EAAyDC,MAAzD,EAAiEC,cAAjE,EAAiFC,QAAjF,EAA2F;AACzF,QAAMC,GAAG,GAAI;YACHN,WAAY,MAAKC,aAAc,MAAKC,WAAY,MAAKC,MAAO,MAAKC,cAAe,MAAKC,QAAS,UADxG;AAEA,SAAOR,QAAQ,CAACS,GAAD,CAAf;AACD;;AAED,SAASC,IAAT,GAAgB;AACd,QAAMD,GAAG,GAAI,yBAAb;AACA,SAAOT,QAAQ,CAACS,GAAD,CAAf;AACD;;AAED,SAASE,MAAT,CAAgBC,EAAhB,EAAoBC,MAApB,EAA4B;AAC1B,QAAMJ,GAAG,GAAI,gCAA+BI,MAAO,wBAAuBD,EAAG,GAA7E;AACA,SAAOZ,QAAQ,CAACS,GAAD,CAAf;AACD;;AAED,SAASK,MAAT,CAAgBF,EAAhB,EAAoB;AAClB,QAAMH,GAAG,GAAI,4CAA2CG,EAAG,GAA3D;AACA,SAAOZ,QAAQ,CAACS,GAAD,CAAf;AACD;;AAEDM,MAAM,CAACC,OAAP,GAAiB;AACfd,EAAAA,MADe;AACPQ,EAAAA,IADO;AACDC,EAAAA,MADC;AACOG,EAAAA;AADP,CAAjB",
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\",
      "sourcesContent": [
        "const { querySql } = require('../mysql');\n\nfunction create(promotionID, promotionName, commodityID, poster, promotionPrice, describe) {\n  const sql = `insert into promotion(promotionID,promotionName,commodityID,poster,promotionPrice,\\`describe\\`,status) \n  values('${promotionID}','${promotionName}','${commodityID}','${poster}','${promotionPrice}','${describe}','待审核')`\n  return querySql(sql)\n}\n\nfunction list() {\n  const sql = `select * from promotion`\n  return querySql(sql)\n}\n\nfunction update(id, status) {\n  const sql = `update promotion set status='${status}' where promotionID='${id}'`\n  return querySql(sql)\n}\n\nfunction remove(id) {\n  const sql = `delete from promotion where promotionID='${id}'`\n  return querySql(sql)\n}\n\nmodule.exports = {\n  create, list, update, remove\n}"
      ]
    },
    "sourceType": "module",
    "mtime": 1588135644453
  },
  "{\"sourceRoot\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\router\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"filename\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\router\\\\wechat.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"plugins\":[],\"presets\":[]}:7.9.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "G:\\Project\\Web\\git\\household-service-server",
      "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\wechat.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "G:\\Project\\Web\\git\\household-service-server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\wechat.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\wechat.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\",
        "sourceFileName": "wechat.js"
      }
    },
    "ast": null,
    "code": "const express = require('express');\n\nconst Result = require('../models/Result');\n\nconst {\n  login,\n  create,\n  update\n} = require('../service/wechat');\n\nconst {\n  PRIVATE_KEY\n} = require('../utils/constant');\n\nconst jwt = require('jsonwebtoken');\n\nconst {\n  decode\n} = require('../utils/decode');\n\nconst router = express.Router();\n\nfunction getToken(data) {\n  const token = jwt.sign({\n    data\n  }, PRIVATE_KEY);\n  return token;\n}\n\nrouter.post('/login', (req, res) => {\n  const {\n    openid\n  } = req.body;\n  login(openid).then(result => {\n    if (result.length !== 0) {\n      const token = getToken(result.customerID);\n      new Result({\n        token\n      }, '登录成功').success(res);\n    } else {\n      const {\n        avatarUrl,\n        nickName\n      } = req.body;\n      create(openid, avatarUrl, nickName).then(answer => {\n        if (answer) {\n          const token = getToken(openid);\n          new Result({\n            token\n          }, '新增成功').success(res);\n        } else {\n          new Result('新增失败').fail(res);\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  }).catch(err => {\n    console.log(err);\n  });\n});\nrouter.post('/update', (req, res) => {\n  const {\n    openid,\n    address,\n    name,\n    contact\n  } = req.body;\n  update(openid, address, name, contact).then(result => {\n    if (result) {\n      new Result('更新成功').success(res);\n    } else {\n      new Result('更新失败').fail(res);\n    }\n  }).catch(err => {\n    console.log(err);\n  });\n});\nrouter.post('/query', (req, res) => {\n  const {\n    openid\n  } = req.body;\n  login(openid).then(result => {\n    if (result) {\n      new Result(result, '查询成功').success(res);\n    } else {\n      new Result('查询失败').fail(res);\n    }\n  }).catch(err => {\n    console.log(err);\n  });\n});\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlY2hhdC5qcyJdLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsIlJlc3VsdCIsImxvZ2luIiwiY3JlYXRlIiwidXBkYXRlIiwiUFJJVkFURV9LRVkiLCJqd3QiLCJkZWNvZGUiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJnZXRUb2tlbiIsImRhdGEiLCJ0b2tlbiIsInNpZ24iLCJwb3N0IiwicmVxIiwicmVzIiwib3BlbmlkIiwiYm9keSIsInRoZW4iLCJyZXN1bHQiLCJsZW5ndGgiLCJjdXN0b21lcklEIiwic3VjY2VzcyIsImF2YXRhclVybCIsIm5pY2tOYW1lIiwiYW5zd2VyIiwiZmFpbCIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImFkZHJlc3MiLCJuYW1lIiwiY29udGFjdCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQUQsQ0FBdkI7O0FBQ0EsTUFBTUMsTUFBTSxHQUFHRCxPQUFPLENBQUMsa0JBQUQsQ0FBdEI7O0FBQ0EsTUFBTTtBQUFFRSxFQUFBQSxLQUFGO0FBQVNDLEVBQUFBLE1BQVQ7QUFBaUJDLEVBQUFBO0FBQWpCLElBQTRCSixPQUFPLENBQUMsbUJBQUQsQ0FBekM7O0FBQ0EsTUFBTTtBQUFFSyxFQUFBQTtBQUFGLElBQWtCTCxPQUFPLENBQUMsbUJBQUQsQ0FBL0I7O0FBQ0EsTUFBTU0sR0FBRyxHQUFHTixPQUFPLENBQUMsY0FBRCxDQUFuQjs7QUFDQSxNQUFNO0FBQUVPLEVBQUFBO0FBQUYsSUFBYVAsT0FBTyxDQUFDLGlCQUFELENBQTFCOztBQUVBLE1BQU1RLE1BQU0sR0FBR1QsT0FBTyxDQUFDVSxNQUFSLEVBQWY7O0FBRUEsU0FBU0MsUUFBVCxDQUFrQkMsSUFBbEIsRUFBd0I7QUFDdEIsUUFBTUMsS0FBSyxHQUFHTixHQUFHLENBQUNPLElBQUosQ0FDWjtBQUFFRixJQUFBQTtBQUFGLEdBRFksRUFFWk4sV0FGWSxDQUFkO0FBSUEsU0FB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QUFuQixDQUF3QlgsR0FBeEI7QUFDRDtBQUNGLEdBTkQsRUFNR1ksS0FOSCxDQU1TQyxHQUFHLElBQUk7QUFDZEMsSUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVlGLEdBQVo7QUFDRCxHQVJEO0FBU0QsQ0FYRDtBQWFBTSxNQUFNLENBQUNDLE9BQVAsR0FBaUI1QixNQUFqQiIsInNvdXJjZVJvb3QiOiJHOlxcUHJvamVjdFxcV2ViXFxnaXRcXGhvdXNlaG9sZC1zZXJ2aWNlLXNlcnZlclxcc3JjXFxyb3V0ZXJcXCIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJylcbmNvbnN0IFJlc3VsdCA9IHJlcXVpcmUoJy4uL21vZGVscy9SZXN1bHQnKVxuY29uc3QgeyBsb2dpbiwgY3JlYXRlLCB1cGRhdGUgfSA9IHJlcXVpcmUoJy4uL3NlcnZpY2Uvd2VjaGF0JylcbmNvbnN0IHsgUFJJVkFURV9LRVkgfSA9IHJlcXVpcmUoJy4uL3V0aWxzL2NvbnN0YW50JylcbmNvbnN0IGp3dCA9IHJlcXVpcmUoJ2pzb253ZWJ0b2tlbicpXG5jb25zdCB7IGRlY29kZSB9ID0gcmVxdWlyZSgnLi4vdXRpbHMvZGVjb2RlJylcblxuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKVxuXG5mdW5jdGlvbiBnZXRUb2tlbihkYXRhKSB7XG4gIGNvbnN0IHRva2VuID0gand0LnNpZ24oXG4gICAgeyBkYXRhIH0sXG4gICAgUFJJVkFURV9LRVksXG4gIClcbiAgcmV0dXJuIHRva2VuXG59XG5cbnJvdXRlci5wb3N0KCcvbG9naW4nLCAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgeyBvcGVuaWQgfSA9IHJlcS5ib2R5XG4gIGxvZ2luKG9wZW5pZCkudGhlbihyZXN1bHQgPT4ge1xuICAgIGlmIChyZXN1bHQubGVuZ3RoICE9PSAwKSB7XG4gICAgICBjb25zdCB0b2tlbiA9IGdldFRva2VuKHJlc3VsdC5jdXN0b21lcklEKVxuICAgICAgbmV3IFJlc3VsdCh7IHRva2VuIH0sICfnmbvlvZXmiJDlip8nKS5zdWNjZXNzKHJlcylcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBjb25zdCB7IGF2YXRhclVybCwgbmlja05hbWUgfSA9IHJlcS5ib2R5XG4gICAgICBjcmVhdGUob3BlbmlkLCBhdmF0YXJVcmwsIG5pY2tOYW1lKS50aGVuKGFuc3dlciA9PiB7XG4gICAgICAgIGlmIChhbnN3ZXIpIHtcbiAgICAgICAgICBjb25zdCB0b2tlbiA9IGdldFRva2VuKG9wZW5pZClcbiAgICAgICAgICBuZXcgUmVzdWx0KHsgdG9rZW4gfSwgJ+aWsOWinuaIkOWKnycpLnN1Y2Nlc3MocmVzKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ldyBSZXN1bHQoJ+aWsOWinuWksei0pScpLmZhaWwocmVzKVxuICAgICAgICB9XG4gICAgICB9KS5jYXRjaChlcnIgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICB9KVxuICAgIH1cbiAgfSkuY2F0Y2goZXJyID0+IHtcbiAgICBjb25zb2xlLmxvZyhlcnIpXG4gIH0pXG59KVxuXG5yb3V0ZXIucG9zdCgnL3VwZGF0ZScsIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCB7IG9wZW5pZCwgYWRkcmVzcyxuYW1lLGNvbnRhY3QgfSA9IHJlcS5ib2R5XG4gIHVwZGF0ZShvcGVuaWQsIGFkZHJlc3MsIG5hbWUsIGNvbnRhY3QpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICBpZiAocmVzdWx0KSB7XG4gICAgICBuZXcgUmVzdWx0KCfmm7TmlrDmiJDlip8nKS5zdWNjZXNzKHJlcylcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3IFJlc3VsdCgn5pu05paw5aSx6LSlJykuZmFpbChyZXMpXG4gICAgfVxuICB9KS5jYXRjaChlcnIgPT4ge1xuICAgIGNvbnNvbGUubG9nKGVycilcbiAgfSlcbn0pXG5cbnJvdXRlci5wb3N0KCcvcXVlcnknLCAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgeyBvcGVuaWQgfSA9IHJlcS5ib2R5XG4gIGxvZ2luKG9wZW5pZCkudGhlbihyZXN1bHQgPT4ge1xuICAgIGlmIChyZXN1bHQpIHtcbiAgICAgIG5ldyBSZXN1bHQocmVzdWx0LCfmn6Xor6LmiJDlip8nKS5zdWNjZXNzKHJlcylcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3IFJlc3VsdCgn5p+l6K+i5aSx6LSlJykuZmFpbChyZXMpXG4gICAgfVxuICB9KS5jYXRjaChlcnIgPT4ge1xuICAgIGNvbnNvbGUubG9nKGVycilcbiAgfSlcbn0pXG5cbm1vZHVsZS5leHBvcnRzID0gcm91dGVyXG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "wechat.js"
      ],
      "names": [
        "express",
        "require",
        "Result",
        "login",
        "create",
        "update",
        "PRIVATE_KEY",
        "jwt",
        "decode",
        "router",
        "Router",
        "getToken",
        "data",
        "token",
        "sign",
        "post",
        "req",
        "res",
        "openid",
        "body",
        "then",
        "result",
        "length",
        "customerID",
        "success",
        "avatarUrl",
        "nickName",
        "answer",
        "fail",
        "catch",
        "err",
        "console",
        "log",
        "address",
        "name",
        "contact",
        "module",
        "exports"
      ],
      "mappings": "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",
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\",
      "sourcesContent": [
        "const express = require('express')\nconst Result = require('../models/Result')\nconst { login, create, update } = require('../service/wechat')\nconst { PRIVATE_KEY } = require('../utils/constant')\nconst jwt = require('jsonwebtoken')\nconst { decode } = require('../utils/decode')\n\nconst router = express.Router()\n\nfunction getToken(data) {\n  const token = jwt.sign(\n    { data },\n    PRIVATE_KEY,\n  )\n  return token\n}\n\nrouter.post('/login', (req, res) => {\n  const { openid } = req.body\n  login(openid).then(result => {\n    if (result.length !== 0) {\n      const token = getToken(result.customerID)\n      new Result({ token }, '登录成功').success(res)\n    }\n    else {\n      const { avatarUrl, nickName } = req.body\n      create(openid, avatarUrl, nickName).then(answer => {\n        if (answer) {\n          const token = getToken(openid)\n          new Result({ token }, '新增成功').success(res)\n        } else {\n          new Result('新增失败').fail(res)\n        }\n      }).catch(err => {\n        console.log(err)\n      })\n    }\n  }).catch(err => {\n    console.log(err)\n  })\n})\n\nrouter.post('/update', (req, res) => {\n  const { openid, address,name,contact } = req.body\n  update(openid, address, name, contact).then(result => {\n    if (result) {\n      new Result('更新成功').success(res)\n    } else {\n      new Result('更新失败').fail(res)\n    }\n  }).catch(err => {\n    console.log(err)\n  })\n})\n\nrouter.post('/query', (req, res) => {\n  const { openid } = req.body\n  login(openid).then(result => {\n    if (result) {\n      new Result(result,'查询成功').success(res)\n    } else {\n      new Result('查询失败').fail(res)\n    }\n  }).catch(err => {\n    console.log(err)\n  })\n})\n\nmodule.exports = router\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1588733396846
  },
  "{\"sourceRoot\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\service\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"filename\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\service\\\\wechat.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"plugins\":[],\"presets\":[]}:7.9.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "G:\\Project\\Web\\git\\household-service-server",
      "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\wechat.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "G:\\Project\\Web\\git\\household-service-server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\wechat.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\wechat.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\",
        "sourceFileName": "wechat.js"
      }
    },
    "ast": null,
    "code": "const {\n  querySql\n} = require('../mysql');\n\nfunction login(openid) {\n  const sql = `select * from customer where customerID='${openid}'`;\n  return querySql(sql);\n}\n\nfunction create(openid, avatarUrl, nickName) {\n  const sql = `insert into customer (\\`customerID\\`, \\`avatar\\`, \\`nickName\\`) \n  VALUES ('${openid}', '${avatarUrl}', '${nickName}')`;\n  return querySql(sql);\n}\n\nfunction update(openid, address, name, contact) {\n  let sql;\n  if (address) sql = `UPDATE \\`customer\\` SET \\`serviceAddress\\`='${address}' WHERE (\\`customerID\\`='${openid}')`;else {\n    sql = `UPDATE \\`customer\\` SET \\`name\\`='${name}', \\`contact\\`='${contact}' WHERE (\\`customerID\\`='${openid}')`;\n  }\n  return querySql(sql);\n}\n\nmodule.exports = {\n  login,\n  create,\n  update\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlY2hhdC5qcyJdLCJuYW1lcyI6WyJxdWVyeVNxbCIsInJlcXVpcmUiLCJsb2dpbiIsIm9wZW5pZCIsInNxbCIsImNyZWF0ZSIsImF2YXRhclVybCIsIm5pY2tOYW1lIiwidXBkYXRlIiwiYWRkcmVzcyIsIm5hbWUiLCJjb250YWN0IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTTtBQUFFQSxFQUFBQTtBQUFGLElBQWVDLE9BQU8sQ0FBQyxVQUFELENBQTVCOztBQUVBLFNBQVNDLEtBQVQsQ0FBZUMsTUFBZixFQUF1QjtBQUNyQixRQUFNQyxHQUFHLEdBQUksNENBQTJDRCxNQUFPLEdBQS9EO0FBQ0EsU0FBT0gsUUFBUSxDQUFDSSxHQUFELENBQWY7QUFDRDs7QUFFRCxTQUFTQyxNQUFULENBQWdCRixNQUFoQixFQUF3QkcsU0FBeEIsRUFBbUNDLFFBQW5DLEVBQTZDO0FBQzNDLFFBQU1ILEdBQUcsR0FBSTthQUNGRCxNQUFPLE9BQU1HLFNBQVUsT0FBTUMsUUFBUyxJQURqRDtBQUVBLFNBQU9QLFFBQVEsQ0FBQ0ksR0FBRCxDQUFmO0FBQ0Q7O0FBRUQsU0FBU0ksTUFBVCxDQUFnQkwsTUFBaEIsRUFBd0JNLE9BQXhCLEVBQWlDQyxJQUFqQyxFQUF1Q0MsT0FBdkMsRUFBZ0Q7QUFDOUMsTUFBSVAsR0FBSjtBQUNBLE1BQUlLLE9BQUosRUFDRUwsR0FBRyxHQUFJLCtDQUE4Q0ssT0FBUSw0QkFBMkJOLE1BQU8sSUFBL0YsQ0FERixLQUVLO0FBQ0hDLElBQUFBLEdBQUcsR0FBSSxxQ0FBb0NNLElBQUssbUJBQWtCQyxPQUFRLDRCQUEyQlIsTUFBTyxJQUE1RztBQUNEO0FBQ0QsU0FBT0gsUUFBUSxDQUFDSSxHQUFELENBQWY7QUFDRDs7QUFFRFEsTUFBTSxDQUFDQyxPQUFQLEdBQWlCO0FBQ2ZYLEVBQUFBLEtBRGU7QUFDUkcsRUFBQUEsTUFEUTtBQUNBRyxFQUFBQTtBQURBLENBQWpCIiwic291cmNlUm9vdCI6Ikc6XFxQcm9qZWN0XFxXZWJcXGdpdFxcaG91c2Vob2xkLXNlcnZpY2Utc2VydmVyXFxzcmNcXHNlcnZpY2VcXCIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgcXVlcnlTcWwgfSA9IHJlcXVpcmUoJy4uL215c3FsJyk7XG5cbmZ1bmN0aW9uIGxvZ2luKG9wZW5pZCkge1xuICBjb25zdCBzcWwgPSBgc2VsZWN0ICogZnJvbSBjdXN0b21lciB3aGVyZSBjdXN0b21lcklEPScke29wZW5pZH0nYFxuICByZXR1cm4gcXVlcnlTcWwoc3FsKVxufVxuXG5mdW5jdGlvbiBjcmVhdGUob3BlbmlkLCBhdmF0YXJVcmwsIG5pY2tOYW1lKSB7XG4gIGNvbnN0IHNxbCA9IGBpbnNlcnQgaW50byBjdXN0b21lciAoXFxgY3VzdG9tZXJJRFxcYCwgXFxgYXZhdGFyXFxgLCBcXGBuaWNrTmFtZVxcYCkgXG4gIFZBTFVFUyAoJyR7b3BlbmlkfScsICcke2F2YXRhclVybH0nLCAnJHtuaWNrTmFtZX0nKWBcbiAgcmV0dXJuIHF1ZXJ5U3FsKHNxbClcbn1cblxuZnVuY3Rpb24gdXBkYXRlKG9wZW5pZCwgYWRkcmVzcywgbmFtZSwgY29udGFjdCkge1xuICBsZXQgc3FsXG4gIGlmIChhZGRyZXNzKVxuICAgIHNxbCA9IGBVUERBVEUgXFxgY3VzdG9tZXJcXGAgU0VUIFxcYHNlcnZpY2VBZGRyZXNzXFxgPScke2FkZHJlc3N9JyBXSEVSRSAoXFxgY3VzdG9tZXJJRFxcYD0nJHtvcGVuaWR9JylgXG4gIGVsc2Uge1xuICAgIHNxbCA9IGBVUERBVEUgXFxgY3VzdG9tZXJcXGAgU0VUIFxcYG5hbWVcXGA9JyR7bmFtZX0nLCBcXGBjb250YWN0XFxgPScke2NvbnRhY3R9JyBXSEVSRSAoXFxgY3VzdG9tZXJJRFxcYD0nJHtvcGVuaWR9JylgXG4gIH1cbiAgcmV0dXJuIHF1ZXJ5U3FsKHNxbClcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGxvZ2luLCBjcmVhdGUsIHVwZGF0ZVxufSJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "wechat.js"
      ],
      "names": [
        "querySql",
        "require",
        "login",
        "openid",
        "sql",
        "create",
        "avatarUrl",
        "nickName",
        "update",
        "address",
        "name",
        "contact",
        "module",
        "exports"
      ],
      "mappings": "AAAA,MAAM;AAAEA,EAAAA;AAAF,IAAeC,OAAO,CAAC,UAAD,CAA5B;;AAEA,SAASC,KAAT,CAAeC,MAAf,EAAuB;AACrB,QAAMC,GAAG,GAAI,4CAA2CD,MAAO,GAA/D;AACA,SAAOH,QAAQ,CAACI,GAAD,CAAf;AACD;;AAED,SAASC,MAAT,CAAgBF,MAAhB,EAAwBG,SAAxB,EAAmCC,QAAnC,EAA6C;AAC3C,QAAMH,GAAG,GAAI;aACFD,MAAO,OAAMG,SAAU,OAAMC,QAAS,IADjD;AAEA,SAAOP,QAAQ,CAACI,GAAD,CAAf;AACD;;AAED,SAASI,MAAT,CAAgBL,MAAhB,EAAwBM,OAAxB,EAAiCC,IAAjC,EAAuCC,OAAvC,EAAgD;AAC9C,MAAIP,GAAJ;AACA,MAAIK,OAAJ,EACEL,GAAG,GAAI,+CAA8CK,OAAQ,4BAA2BN,MAAO,IAA/F,CADF,KAEK;AACHC,IAAAA,GAAG,GAAI,qCAAoCM,IAAK,mBAAkBC,OAAQ,4BAA2BR,MAAO,IAA5G;AACD;AACD,SAAOH,QAAQ,CAACI,GAAD,CAAf;AACD;;AAEDQ,MAAM,CAACC,OAAP,GAAiB;AACfX,EAAAA,KADe;AACRG,EAAAA,MADQ;AACAG,EAAAA;AADA,CAAjB",
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\service\\",
      "sourcesContent": [
        "const { querySql } = require('../mysql');\n\nfunction login(openid) {\n  const sql = `select * from customer where customerID='${openid}'`\n  return querySql(sql)\n}\n\nfunction create(openid, avatarUrl, nickName) {\n  const sql = `insert into customer (\\`customerID\\`, \\`avatar\\`, \\`nickName\\`) \n  VALUES ('${openid}', '${avatarUrl}', '${nickName}')`\n  return querySql(sql)\n}\n\nfunction update(openid, address, name, contact) {\n  let sql\n  if (address)\n    sql = `UPDATE \\`customer\\` SET \\`serviceAddress\\`='${address}' WHERE (\\`customerID\\`='${openid}')`\n  else {\n    sql = `UPDATE \\`customer\\` SET \\`name\\`='${name}', \\`contact\\`='${contact}' WHERE (\\`customerID\\`='${openid}')`\n  }\n  return querySql(sql)\n}\n\nmodule.exports = {\n  login, create, update\n}"
      ]
    },
    "sourceType": "module",
    "mtime": 1588733535959
  },
  "{\"sourceRoot\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\router\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"filename\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\\\\src\\\\router\\\\jwt.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"G:\\\\Project\\\\Web\\\\git\\\\household-service-server\",\"plugins\":[],\"presets\":[]}:7.9.0": {
    "metadata": {},
    "options": {
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "G:\\Project\\Web\\git\\household-service-server",
      "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\jwt.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "G:\\Project\\Web\\git\\household-service-server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\jwt.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\jwt.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\",
        "sourceFileName": "jwt.js"
      }
    },
    "ast": null,
    "code": "const expressJwt = require('express-jwt');\n\nconst {\n  PRIVATE_KEY\n} = require('../utils/constant');\n\nconst jwtAuth = expressJwt({\n  secret: PRIVATE_KEY,\n  credentialsRequired: true // 设置为false就不进行校验了，游客也可以访问\n\n}).unless({\n  path: ['/', '/user/login', '/wechat/login'] // 设置 jwt 认证白名单\n\n});\nmodule.exports = {\n  jwtAuth\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImp3dC5qcyJdLCJuYW1lcyI6WyJleHByZXNzSnd0IiwicmVxdWlyZSIsIlBSSVZBVEVfS0VZIiwiand0QXV0aCIsInNlY3JldCIsImNyZWRlbnRpYWxzUmVxdWlyZWQiLCJ1bmxlc3MiLCJwYXRoIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsVUFBVSxHQUFHQyxPQUFPLENBQUMsYUFBRCxDQUExQjs7QUFDQSxNQUFNO0FBQUVDLEVBQUFBO0FBQUYsSUFBa0JELE9BQU8sQ0FBQyxtQkFBRCxDQUEvQjs7QUFFQSxNQUFNRSxPQUFPLEdBQUdILFVBQVUsQ0FBQztBQUN6QkksRUFBQUEsTUFBTSxFQUFFRixXQURpQjtBQUV6QkcsRUFBQUEsbUJBQW1CLEVBQUUsSUFGSSxDQUVDOztBQUZELENBQUQsQ0FBVixDQUdiQyxNQUhhLENBR047QUFDUkMsRUFBQUEsSUFBSSxFQUFFLENBQ0osR0FESSxFQUVKLGFBRkksRUFHSixlQUhJLENBREUsQ0FLTDs7QUFMSyxDQUhNLENBQWhCO0FBV0FDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQjtBQUFFTixFQUFBQTtBQUFGLENBQWpCIiwic291cmNlUm9vdCI6Ikc6XFxQcm9qZWN0XFxXZWJcXGdpdFxcaG91c2Vob2xkLXNlcnZpY2Utc2VydmVyXFxzcmNcXHJvdXRlclxcIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzc0p3dCA9IHJlcXVpcmUoJ2V4cHJlc3Mtand0Jyk7XG5jb25zdCB7IFBSSVZBVEVfS0VZIH0gPSByZXF1aXJlKCcuLi91dGlscy9jb25zdGFudCcpO1xuXG5jb25zdCBqd3RBdXRoID0gZXhwcmVzc0p3dCh7XG4gIHNlY3JldDogUFJJVkFURV9LRVksXG4gIGNyZWRlbnRpYWxzUmVxdWlyZWQ6IHRydWUgLy8g6K6+572u5Li6ZmFsc2XlsLHkuI3ov5vooYzmoKHpqozkuobvvIzmuLjlrqLkuZ/lj6/ku6Xorr/pl65cbn0pLnVubGVzcyh7XG4gIHBhdGg6IFtcbiAgICAnLycsXG4gICAgJy91c2VyL2xvZ2luJyxcbiAgICAnL3dlY2hhdC9sb2dpbidcbiAgXSwgLy8g6K6+572uIGp3dCDorqTor4Hnmb3lkI3ljZVcbn0pXG5cbm1vZHVsZS5leHBvcnRzID0geyBqd3RBdXRoIH0iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "jwt.js"
      ],
      "names": [
        "expressJwt",
        "require",
        "PRIVATE_KEY",
        "jwtAuth",
        "secret",
        "credentialsRequired",
        "unless",
        "path",
        "module",
        "exports"
      ],
      "mappings": "AAAA,MAAMA,UAAU,GAAGC,OAAO,CAAC,aAAD,CAA1B;;AACA,MAAM;AAAEC,EAAAA;AAAF,IAAkBD,OAAO,CAAC,mBAAD,CAA/B;;AAEA,MAAME,OAAO,GAAGH,UAAU,CAAC;AACzBI,EAAAA,MAAM,EAAEF,WADiB;AAEzBG,EAAAA,mBAAmB,EAAE,IAFI,CAEC;;AAFD,CAAD,CAAV,CAGbC,MAHa,CAGN;AACRC,EAAAA,IAAI,EAAE,CACJ,GADI,EAEJ,aAFI,EAGJ,eAHI,CADE,CAKL;;AALK,CAHM,CAAhB;AAWAC,MAAM,CAACC,OAAP,GAAiB;AAAEN,EAAAA;AAAF,CAAjB",
      "sourceRoot": "G:\\Project\\Web\\git\\household-service-server\\src\\router\\",
      "sourcesContent": [
        "const expressJwt = require('express-jwt');\nconst { PRIVATE_KEY } = require('../utils/constant');\n\nconst jwtAuth = expressJwt({\n  secret: PRIVATE_KEY,\n  credentialsRequired: true // 设置为false就不进行校验了，游客也可以访问\n}).unless({\n  path: [\n    '/',\n    '/user/login',\n    '/wechat/login'\n  ], // 设置 jwt 认证白名单\n})\n\nmodule.exports = { jwtAuth }"
      ]
    },
    "sourceType": "module",
    "mtime": 1588562984589
  }
}